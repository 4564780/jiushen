import{E as c,a as i}from"./ModalContentIndex.Dj08dEyt.js";import{a as p,az as S,Z as h,bq as R,I,q as g,co as v,cp as L,S as E,a6 as T,bg as k,v as M,bu as O}from"./main.C8q1iJMV.js";import{a as V,L as C}from"./ListItemIndex.Bcx-5lrU.js";import{f as b,l as D,p as t,r as m,w as A,o as N,a as z}from"../vendors/vendor-@vue.DNlpgob2.js";import{D as B,E as F}from"./NoDataViewMore.DgOJ3Ycu.js";import"./index.C870Y1OX.js";import"./index.nTWlx4yZ.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"./SourceTextIndex.B2mGCFWw.js";const H=b(()=>{const{t:e}=p();return[{label:e("lobby.center.components.dateRadio.all"),value:c.All},{label:e("lobby.modal.task.collected"),value:c.Received},{label:e("lobby.modal.task.distributed"),value:c.Distributed}]});b(()=>{const{t:e}=p();return[{label:e("lobby.center.components.dateRadio.today"),value:i.Today},{label:e("lobby.center.components.dateRadio.yesterday"),value:i.Yesterday},{label:e("lobby.center.components.dateRadio.lastSevenDay"),value:i.LastSevenDay},{label:e("lobby.center.components.dateRadio.lastFifteenDay"),value:i.LastFifteenDay},{label:e("lobby.center.components.dateRadio.lastThirtyDay"),value:i.LastThirtyDay},{label:e("lobby.center.components.dateRadio.lastSixtyDay"),value:i.LastSixtyDay}]});const Y="_received_s23c8_17",q="_text1_s23c8_24",P="_text2_s23c8_27",U="_item_s23c8_36",u={received:Y,text1:q,text2:P,item:U},[$]=g("pages-records-record-info"),j=D({name:$,props:{listError:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showActivityIcon:{type:Boolean,default:!0},totalRecv:{type:Number,default:0},totalActivity:{type:Number,default:0}},emits:["retry"],setup(e,{emit:d}){const{t:o}=p(),n=S();return()=>n.hasLogined?t("div",{class:u.received},[t("div",{class:u.item},[t("span",null,[o("lobby.reward.base.awardAmount")]),e.listError?t(h,{loading:e.loading,onRetry:()=>d("retry")},null):t("span",{class:u.text1},[R(e.totalRecv)])]),e.totalActivity>0&&t("div",{class:u.item},[t("span",null,[o("lobby.records.activity")]),e.listError?t(h,{loading:e.loading,onRetry:()=>d("retry")},null):t("div",{class:u.text2},[e.showActivityIcon&&t(I,{src:"/lobby_asset/common/web/common/comm_icon_shy.svg"},null),t("span",null,[R(e.totalActivity,0)])])])]):t("div",null,null)}}),W="_recordHeader_1k9hi_17",Z="_recordSelect_1k9hi_23",G="_rateSelect_1k9hi_37",J="_placeholder_1k9hi_50",K="_recordMain_1k9hi_55",y={recordHeader:W,recordSelect:Z,rateSelect:G,placeholder:J,recordMain:K},[Q]=g("pages-records"),pe=D({name:Q,setup(){const e=m(0),d=m(0),o=m(v.TODAY),n=m(c.All),f=!1,l=L(V,{immediate:!1,transformFn:a=>({data:a.list,total:a.count,totalReward:a.totalReward,totalActivity:a.totalActivity}),defaultPageSize:20}),_=()=>{l.payload.value={timeDay:v.TODAY,status:c.All},o.value=v.TODAY,n.value=c.All};A(o,a=>{l.payload.value={...l.payload.value,timeDay:a},s(!0)}),A(n,a=>{l.payload.value={...l.payload.value,status:a},s(!0)}),N(async()=>{_(),s()}),z(()=>{_(),s(!0)});const s=async(a=!1)=>{if(!S().hasLogined)return;const r=await l.loadData(a);e.value=r==null?void 0:r.totalReward,d.value=r==null?void 0:r.totalActivity},x=b(()=>O().isListLoading?"nested-loading":null);return()=>t(M,null,{header:()=>t("div",{class:y.recordHeader},[t("div",{class:y.recordSelect},[t(B,{onValueChange:a=>{o.value=a},selectedValue:o.value,showAll:f},null),t(E,{size:"mini",zIndex:10,round:!0,autoWidth:!0,offset:[0,0],modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,dropdownClassName:y.rateSelect,options:H.value},null)]),t(j,{listError:!!l.listError.value,loading:l.loading.value,onRetry:s,showActivityIcon:!1,totalRecv:e.value,totalActivity:d.value},null)]),default:()=>t(T,{class:y.placeholder,type:x.value},{default:()=>[t(k,{finished:l.finished.value,error:!!l.listError.value,loading:l.loading.value,class:y.recordMain,onLoad:s,onRetry:s,emptyText:t(F,{selectValue:o.value,onMoreClick:a=>{o.value=a},hasAll:f},null)},{default:()=>{var a,r;return[(r=(a=l.list)==null?void 0:a.value)==null?void 0:r.map(w=>t(C,{listItem:w},null))]}})]})})}});export{pe as default};
//# sourceMappingURL=RecordsIndex.Kito9BUa.js.map
