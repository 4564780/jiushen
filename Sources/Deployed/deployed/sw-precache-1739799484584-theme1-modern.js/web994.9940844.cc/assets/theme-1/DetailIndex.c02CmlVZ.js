import{a as T,dY as k,u as D,R as C,ez as P,ey as O,q as w,dZ as H,I as S,eA as M,e3 as A,e4 as U,dP as V,dQ as E,p as R,B as $,v as F,b as Y,a6 as q}from"./main.C8q1iJMV.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{B as z}from"./BetPriceBoxIndex.0wG_1LJ-.js";import{C as W,a as j}from"./index.4KOhFRoM.js";import{M as J}from"./MarketTabsIndex.CDUHicku.js";import{l as L,r as f,p as e,v as m,F as x,f as G,n as Q,d as Z}from"../vendors/vendor-@vue.DNlpgob2.js";import{s as K}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as X}from"./useHeader.DBPcJJMn.js";import{T as ee,F as te}from"./TimeInfoIndex.CsOFrg5p.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"./ArrowPriceIndex.D_dprz8o.js";import"./SymbolPriceIndex.DnolemMB.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const p={"content-collapse":"_content-collapse_1mge9_17","content-main":"_content-main_1mge9_21","virtual-item":"_virtual-item_1mge9_21","content-item":"_content-item_1mge9_24","item-icon":"_item-icon_1mge9_47","collapse-content":"_collapse-content_1mge9_55","item-teams":"_item-teams_1mge9_55","team-name":"_team-name_1mge9_77","item-list":"_item-list_1mge9_84"},[ne]=w("pages-sport-details-bet-tabs"),se=L({name:ne,props:{eventId:{type:Number,required:!0},selection:Object,loading:Boolean},setup(i){const{t:v}=T(),c=f(),o=k(),l=D(),u=f(!0),y=f(),d=f([]);C({initTabs:async()=>{u.value=!0,!(!o.marketList.length&&!await o.fetchEventsAndMarkets())&&(u.value=!1,o.openBetSSEWatch=!0,d.value=o.marketList.map(n=>n.marketId))}});const b=({index:n})=>{var t,s;(s=(t=c.value)==null?void 0:t.virtualizer)==null||s.scrollToIndex(n,{align:"start"})},h=(n,t)=>{o.isShowingBetDialog||(o.isShowingBetDialog=!0,l.open("sportBet",{openType:"overlay",fromDetail:!0,market:n,selection:t}))},I=(n,t)=>e(z,{market:n,selection:t,onChange:s=>{h(n,s)}},null);return()=>e(x,null,[e(J,{modelValue:y.value,"onUpdate:modelValue":n=>y.value=n,onClickTab:b},null),e(W,{modelValue:d.value,"onUpdate:modelValue":n=>d.value=n,class:p["content-collapse"]},{default:()=>{var n;return[e(P,{ref:c,class:p["content-main"],emptyText:v("lobby.selfoperatedGames.sports.noEventsYet"),loading:i.loading||u.value,virtualOptions:{total:(n=o.marketList.length)!=null?n:0,estimateSize:"1rem"}},{default:t=>{var _;const s=(_=t==null?void 0:t.index)!=null?_:0,r=o.marketList[s];return e("div",{class:p["virtual-item"]},[e(j,{name:r.marketId,title:r.betTypeName,class:p["content-item"],key:s},{icon:()=>e("i",{class:p["item-icon"]},null),default:()=>{const B=o.eventInfo;return e("div",{class:p["collapse-content"]},[r.betUIType===O.Handicap&&e("div",{class:p["item-teams"]},[e("p",{class:p["team-name"]},[B.teamInfo.homeName,m("("),v("lobby.selfoperatedGames.sports.home"),m(")")]),e("p",{class:p["team-name"]},[B.teamInfo.awayName,m("("),v("lobby.selfoperatedGames.sports.away"),m(")")])]),e("div",{class:p["item-list"]},[r.selections.map(N=>I(r,N))])])}})])}})]}})])}}),ae="_score_14n7y_83",oe="_live_14n7y_123",a={"event-info":"_event-info_14n7y_17","team-info":"_team-info_14n7y_24","team-one":"_team-one_14n7y_31","img-logo":"_img-logo_14n7y_37","img-bg":"_img-bg_14n7y_50","team-name":"_team-name_14n7y_54","colour-banding":"_colour-banding_14n7y_67",score:ae,"score-item":"_score-item_14n7y_88","event-text":"_event-text_14n7y_99","score-time":"_score-time_14n7y_105","score-info":"_score-info_14n7y_109","score-line":"_score-line_14n7y_118",live:oe,"soccer-info":"_soccer-info_14n7y_149","yellow-card":"_yellow-card_14n7y_168","red-card":"_red-card_14n7y_175"},[le]=w("pages-sport-detail-event-info"),re=L({name:le,setup(){const{t:i}=T(),{rect:v}=X(),c=k(),o=H(),{liveUrl:l}=K(o),{fetchLiveStreamingUrl:u,openLiveDialog:y}=o,d=f(!1);C({checkShowLivePlayer:async()=>{var t;if(!((t=c.eventInfo)!=null&&t.eventId)){d.value=!1;return}if(!M(c.eventInfo)){d.value=!1;return}await u(c.eventInfo,!0),d.value=!!l.value}});const b=async()=>{await u(c.eventInfo),y(v.height.value)},h=()=>{const{eventId:n,isLive:t,globalShowTime:s,sportType:r,gameInfo:_}=c.eventInfo;return n?e(ee,{sportType:r,gameInfo:_,localDateTime:A(s,U.Detail),isLive:t,isDetail:!0,key:"".concat(n,"-").concat(JSON.stringify(_))},null):null},I=G(()=>{const{gameInfo:n,isLive:t}=c.eventInfo;return n.isBreak||n.isHt?{eventText:i("lobby.selfoperatedGames.sports.halftimeBreak"),isOnLive:!0}:n.isClosed?{eventText:i("lobby.selfoperatedGames.eventStatus.close"),isOnLive:!1}:t?{eventText:i("lobby.selfoperatedGames.eventStatus.running"),isOnLive:!0}:{eventText:i("lobby.selfoperatedGames.eventStatus.prepare"),isOnLive:!1}});return()=>{const{soccerInfo:n,teamInfo:t,gameInfo:s}=c.eventInfo,{isOnLive:r,eventText:_}=I.value;return e(S,{class:a["event-info"],src:"/lobby_asset/common/common/selfoperated-games/img_ty_bg.png",tag:"div",useSkeleton:!0},{default:()=>[e("div",{class:a["team-info"]},[e("div",{class:a["team-one"]},[e("div",{class:a["img-logo"]},[e(S,{useSkeleton:!0,src:t==null?void 0:t.homeIconUrl},null)]),e("div",{class:a["colour-banding"]},[e(S,{class:a["img-bg"],src:"/lobby_asset/common/common/selfoperated-games/img_ty_blue.png"},null),e("span",null,[i("lobby.selfoperatedGames.sports.home")])]),e("p",{class:a["team-name"]},[t==null?void 0:t.homeName])]),e("div",{class:a.score},[e("div",{class:a["score-item"]},[h()]),e("div",{class:a["score-info"]},[r?e(x,null,[e("span",null,[s==null?void 0:s.liveHomeScore]),e("span",{class:a["score-line"]},[m("-")]),e("span",null,[s==null?void 0:s.liveAwayScore])]):e("h2",null,[m("VS")])]),e("p",{class:a["event-text"]},[_])]),e("div",{class:a["team-one"]},[e("div",{class:a["img-logo"]},[e(S,{useSkeleton:!0,src:t==null?void 0:t.awayIconUrl},null)]),e("div",{class:a["colour-banding"]},[e(S,{class:a["img-bg"],src:"/lobby_asset/common/common/selfoperated-games/img_ty_red.png"},null),e("span",null,[i("lobby.selfoperatedGames.sports.away")])]),e("p",{class:a["team-name"]},[t==null?void 0:t.awayName])])]),r&&d.value&&e("div",{class:a.live,onClick:b},[e("div",null,[m("live")]),e("span",null,[i("lobby.selfoperatedGames.sports.liveStreaming")])]),r&&n&&e("div",{class:a["soccer-info"]},[e("div",{class:a["yellow-card"]},null),e("div",null,[i("lobby.selfoperatedGames.sports.yellowCard"),m(" "),n.homeYellowCard,e("span",null,[m("-")]),n.awayYellowCard]),e("div",{class:a["red-card"]},null),e("div",null,[i("lobby.selfoperatedGames.sports.redCard"),m(" "),n.homeRedCard,e("span",null,[m("-")]),n.awayRedCard])])]})}}}),ie="_header_20x5p_17",ce={header:ie},[me]=w("pages-sport-detail"),Be=L({name:me,setup(){const{t:i}=T(),v=Y(),c=f(),o=f(),l=k(),u=V(),{guideLoginAll:y,toggleSportWatch:d}=E(),g=f(!1),b=()=>{var t,s;d(!0),(t=c.value)==null||t.checkShowLivePlayer(),(s=o.value)==null||s.initTabs()};R(async()=>{var r;const t=Number((r=v.route.query.eventId)!=null?r:0),s=l.eventInfo.eventId;if((u.isSportMaintenance||!t||!s||s!==t)&&(g.value=!1),u.isSportMaintenance||!t){l.updateEventInfo({}),v.replace("/home/sport");return}await y(),g.value||(l.updateEventInfo({eventId:t}),await l.fetchEventsAndMarkets(),g.value=!0,await Q()),b()}),Z(()=>l.openBetSSEWatch=!1);const h=()=>{l.resError=!1,E().sportAuthErrorHandler({loginType:"all",onLogin:()=>(b(),Promise.resolve())})},I=G(()=>u.isAuthError||l.resError?"retry":l.eventInfo.eventId?null:"empty"),n=()=>I.value?e(q,{type:I.value,empty:{text:i("lobby.selfoperatedGames.sports.noEventsYet")},onRetry:h},null):e(se,{ref:o,eventId:l.eventInfo.eventId},null);return()=>{if(!g.value)return null;const t=l.eventInfo;return e(F,null,{header:()=>e($,null,{default:()=>e("div",{class:ce.header},[t.leagueName]),right:()=>t.eventId?e(te,{item:{sportType:t.sportType,leagueId:t.leagueId,isParlay:t.isParlay,eventId:t.eventId}},null):null}),default:()=>e(x,null,[t.eventId&&e(re,{ref:c},null),n()])})}}});export{Be as default};
//# sourceMappingURL=DetailIndex.c02CmlVZ.js.map
