import{eP as ce,a as q,eQ as d,eR as Z,eS as $,az as ee,eT as X,a3 as qe,Y as ie,U as te,eU as Be,aG as Ce,c0 as ue,a0 as Ue,cr as $e,w as V,I as M,dM as ze,bG as ke,a6 as de,E as J,b as _e,bN as Ke,bV as Qe,aN as pe,aO as Ie,Z as Se,al as je,_ as He,eV as Ve,dh as fe,t as ve,eW as We,eX as Ye,D as Ge,eY as le,eZ as be,cm as he,e_ as Ze,q as H,cs as Ae,e$ as Xe,f0 as Je,a9 as Ee,p as et,B as tt,v as at,f1 as ot,f2 as nt,f3 as st,f4 as lt,s as ct,f5 as rt}from"./main.C8q1iJMV.js";import{s as j,u as we}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as se,a as it,b as ut,c as dt}from"./index.DxyeSsHe.js";import{N as Ne,m as Te,T as _t}from"../vendors/vendor-lodash.BYdGDldS.js";import{r as w,f as R,l as D,h as pt,p as t,v as P,F as Re,C as W,a as bt,a4 as mt,o as Le,n as ft,b_ as vt,a1 as yt,w as De}from"../vendors/vendor-@vue.DNlpgob2.js";import{e as gt}from"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{u as kt}from"./useDevtools.BdNUia1z.js";import{U as ht}from"./UploadIndex.CYQY2hWp.js";import{P as Me}from"./index.CFOhg6Qr.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";var Q=(e=>(e.FEEDBACK="0",e.MY_FEEDBACKS="1",e))(Q||{});const Ct={[ce.ANNOUNCEMENT]:{list:"announcementMsgList",count:"announcementCount"},[ce.NOTICE]:{list:"noticeMsgList",count:"noticeCount"},[ce.MARQUEE]:{list:"marqueeList",count:"marqueeCount"}},Nt=()=>{const{t:e}=q(),n=10,r=w(0),a=w(d.ANNOUNCEMENT),s=w(1),c=w(1),o=w([]),l=w([]),u=w(!1),m=w(!1),y=w(!0),f=w(!1),v=w(!1),_=R(()=>{let i;return m.value?i="retry":u.value?i="nested-loading":o.value.length?i=null:i="empty",i}),b=R(()=>"calc(".concat(window.innerHeight,"px - ").concat("1.35rem",")")),C=R(()=>{const i=Z(),{state:N}=se(),{unreadAnnouncement:S,unreadNotice:B}=j(i);return[{key:d.SERVICE,value:e("lobby.tabbar.service"),componentName:$.SERVICE},{key:d.ANNOUNCEMENT,value:e("lobby.notice.announcement"),unread:S.value,componentName:$.ANNOUNCEMENT},{key:d.NOTICE,value:e("lobby.notice.notice"),unread:B.value,componentName:$.NOTICE},{key:d.MARQUEE,value:e("lobby.notice.marquee"),componentName:$.MARQUEE},{unread:N.unRead,key:d.FEEDBACK,value:e("lobby.header.menus.feedback"),componentName:$.FEEDBACK}]}),g=async i=>{const{getNoticeNew:N,recordPage:S}=Z(),{hasLogined:B}=ee();u.value=!0,s.value=1,r.value=0,m.value=!1;const A=await N(c.value,i);if(A){const p=Ct[i];if(A!=null&&A[p.list]){if(l.value=Ne(A==null?void 0:A[p.list],["read_status",h=>-h.create_time]),r.value=B?A==null?void 0:A[p.count]:l.value.length,S!=null&&S.page&&i===S.type){I(S.page),u.value=!1;return}o.value=l.value.slice((s.value-1)*n,s.value*n)}u.value=!1}else m.value=!0},x=i=>{if(i&&i.length>0)return i.map(N=>(N.read_status==X.unclaimed&&(N.read_status=X.claimed),N))},I=async i=>{const{getNoticeNew:N,noticeReadIds:S,setRecordPage:B}=Z(),A=l.value.length,p=Math.ceil(A/n);if(i>p){s.value=i,u.value=!0,c.value+=1;const h=await N(c.value,a.value);u.value=!1,a.value==d.ANNOUNCEMENT?l.value=[...l.value,...h.announcementMsgList]:a.value==d.NOTICE?l.value=[...l.value,...h.noticeMsgList]:l.value=[...l.value,...h.marqueeList];const O=l.value.slice((i-1)*n,i*n);O.forEach(L=>{S.includes(L.id)&&(L.read_status=X.claimed)}),o.value=Ne(O,["read_status",L=>-L.create_time]),B({type:a.value})}else o.value=l.value.slice((i-1)*n,i*n),s.value=i};return{loading:u,retryLoading:m,PAGE_SIZE:n,firstLoad:f,firstLoaded:y,newsScrollHeight:b,tabs:C,listData:o,activeKey:a,totalListData:l,total:r,currentPage:s,controlLoading:v,pagePlaceholderType:_,initData:g,listRead:x,onPageChange:I}},Tt="_title_1pu8k_32",xt="_label_1pu8k_33",It="_required_1pu8k_44",St="_mark_1pu8k_84",At="_ml20_1pu8k_91",Et="_rules_1pu8k_94",wt="_formcount_1pu8k_135",Rt="_footer_1pu8k_142",T={"send-feedback-root":"_send-feedback-root_1pu8k_17","send-feedback-root-inner":"_send-feedback-root-inner_1pu8k_25",title:Tt,label:xt,"sub-title":"_sub-title_1pu8k_39",required:It,"flex-item-center":"_flex-item-center_1pu8k_51","re-upload":"_re-upload_1pu8k_66",mark:St,ml20:At,rules:Et,"rules-title":"_rules-title_1pu8k_98","content-text":"_content-text_1pu8k_102","select-box":"_select-box_1pu8k_107","textarea-box":"_textarea-box_1pu8k_117",formcount:wt,footer:Rt};function Lt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[Dt]=te("FeedbackCreate"),Mt=D({name:Dt,setup(){const e=pt({loading:!1,file:null,form:{type:void 0,content:"",source:"",geetest:void 0}}),{setHasCreateNewFeedback:n,setActiveKey:r}=se(),{t:a}=q(),s=w(),c=w(),o="feedback-input-"+Date.now(),l=1e3,u=w(!1),m=g=>{u.value||(u.value=!0,V({type:"warn",message:g,onClosed:()=>u.value=!1}))},y=()=>{e.form={type:void 0,content:"",source:"",geetest:void 0},e.file=null,c.value.clear()},f=R(()=>{var x,I,i;const g=Be();return(I=(x=Ce)==null?void 0:x.package)!=null&&I.isLite?g===ue.ANDROID_APP?"ANDROID_LITE":"IOS_LITE":(i=Ce)!=null&&i.package.isVest?g===ue.ANDROID_APP?"ANDROID_VEST":"IOS_VEST":"H5"}),v=async()=>{const{keyword:g,openDevtools:x}=kt();if(g===e.form.content){x();return}(async()=>{var B;const{loading:i,form:N,file:S}=e;if(!i)try{if(await((B=s.value)==null?void 0:B.validate()),!N.type){m(a("lobby.feedback.feedbackTypePlaceholder"));return}if(!N.content.trim()){m(a("lobby.feedback.feedbackContentMessage"));return}e.loading=!0;const A=async p=>{await it(p).then(()=>{y(),V({type:"success",message:a("lobby.feedback.feedbackTips")}),n(!0),r(Q.MY_FEEDBACKS)}).catch(()=>{}),e.loading=!1};if(S){const p=new FormData;p.append("uploadfile",S);const[h,O]=await gt(ut(p));if(O){const L=Te({},N,{fileLink:O==null?void 0:O.fileLink,source:f.value});A(L)}else e.loading=!1,console.error(h)}else A(Te({},N,{source:f.value}))}catch(A){e.loading=!1}})()},_=()=>{let g;return t("div",{class:T["flex-item-center"]},[t("label",{class:T.label},[a("lobby.feedback.feedbackUpload"),t("span",{class:T["sub-title"]},[P("("),a("lobby.feedback.feedbackUploadSubtitle"),P(")")])]),t(ht,{preview:!1,ref:c,limit:1,inputId:o,buttonCloseVisible:!1,acceptVideo:!0,acceptImage:!0,onChange:x=>{var i;const I=(i=x[0])!=null?i:void 0;I&&(e.file=I)}},null),e.file&&t("label",{for:o,class:[T["re-upload"],T.label]},[t(ie,{onClick:()=>{c.value&&(e.file=null,c.value.clear(),c.value.focus())}},Lt(g=a("lobby.finance.withdraw.add.retry"))?g:{default:()=>[g]})]),t("span",{class:T.mark},[a("lobby.feedback.feedbackUploadPlaceholder")])])},b=()=>t("div",{class:T["textarea-box"]},[t("label",{class:T.label},[a("lobby.feedback.feedbackContent"),t("span",{class:T["sub-title"]},[P("("),a("lobby.feedback.feedbackSubtitle"),P(") ")]),t("span",{class:T.required},[P("*")])]),t(Ue,{type:"textarea",value:e.form.content,"onUpdate:value":g=>e.form.content=g,rows:5,placeholder:a("lobby.feedback.feedbackPlaceholder"),maxlength:l},null)]),C=()=>{const g=[{value:1,label:a("lobby.feedback.feedbackTypeS.1")},{value:2,label:a("lobby.feedback.feedbackTypeS.2")},{value:3,label:a("lobby.feedback.feedbackTypeS.3")},{value:4,label:a("lobby.feedback.feedbackTypeS.4")},{value:5,label:a("lobby.feedback.feedbackTypeS.5")},{value:6,label:a("lobby.feedback.feedbackTypeS.6")},{value:7,label:a("lobby.feedback.feedbackTypeS.7")},{value:99,label:a("lobby.feedback.feedbackTypeS.99")}];return t("div",{class:T["select-box"]},[t("label",{class:T.label},[a("lobby.feedback.feedbackType"),P(" "),t("span",{class:T.required},[P("*")])]),t($e,{modelValue:e.form.type,"onUpdate:modelValue":x=>e.form.type=x,showArrow:!0,placeholder:a("lobby.feedback.feedbackTypePlaceholder"),options:g,class:T.select,size:"large",fillMode:e.form.type?"lead":"neutral_3"},null)])};return()=>t(Re,null,[t("div",{class:T["send-feedback-root"]},[t("div",{class:T["send-feedback-root-inner"]},[t(qe,{layout:"vertical",model:e.form,onSubmit:g=>{console.log(g)},ref:s},{default:()=>[t("div",null,[C()]),t("div",null,[b()]),t("div",{class:T.formcount,key:"contentCount"},[e.form.content.length,P("/"),l]),t("div",null,[_()])]}),t("div",{class:T.rules},[t("label",{class:[T["rules-title"],T.label]},[a("lobby.feedback.feedbackRuleTitle")]),t("div",{class:T["content-text"]},[a("lobby.feedback.feedbackRule")])])])]),t("div",{class:T.footer},[t(ie,{type:"primary",loading:e.loading,onClick:v},{default:()=>[!e.loading&&a("lobby.feedback.submit")]})])])}});var Oe=(e=>(e[e.Pendding=0]="Pendding",e[e.CanReceive=1]="CanReceive",e[e.AlreadyReceive=2]="AlreadyReceive",e))(Oe||{}),Y=(e=>(e[e.Pendding=0]="Pendding",e[e.Adopted=1]="Adopted",e[e.Ignored=-1]="Ignored",e[e.Deleted=-2]="Deleted",e))(Y||{});const Ot={data:{type:Object,default:()=>({})}},Ft="_row_zny0r_27",Pt="_dateTime_zny0r_45",qt="_copy_zny0r_99",Bt="_success_zny0r_126",E={"feedbak-item":"_feedbak-item_zny0r_17",row:Ft,"feedback-content":"_feedback-content_zny0r_31",dateTime:Pt,"feedback-reply":"_feedback-reply_zny0r_54","wrapper-list":"_wrapper-list_zny0r_85","feedback-id":"_feedback-id_zny0r_88","feedback-id-literal":"_feedback-id-literal_zny0r_95",copy:qt,"date-time":"_date-time_zny0r_104","text-right":"_text-right_zny0r_108","right-icon":"_right-icon_zny0r_116",success:Bt,"win-prize":"_win-prize_zny0r_129"},[Ut]=te("FeedbackList"),$t=D({name:Ut,props:Ot,emits:["itemClick"],setup(e,{emit:n}){const{t:r}=q(),a={[Y.Pendding]:r("lobby.feedback.pendding"),[Y.Adopted]:r("lobby.feedback.adopted"),[Y.Ignored]:r("lobby.feedback.ignored"),[Y.Deleted]:r("lobby.feedback.deleted")};return()=>{var l,u,m,y;const s=e.data,c=(u=(l=s==null?void 0:s.chat)==null?void 0:l[1])==null?void 0:u.content,o=(y=(m=s==null?void 0:s.chat)==null?void 0:m[1])==null?void 0:y.time;return t("div",{class:E["feedbak-item"],key:s.feedbackId,onClick:()=>n("itemClick",s)},[s.receiveStatus==Oe.CanReceive&&t("div",{class:E["win-prize"]},[t("span",null,[r("lobby.notice.winPrize")]),t(M,{class:E["right-icon"],src:"/lobby_asset/common/web/common/img_label_def-2.svg"},null)]),t("div",{class:E.row},[t("div",{class:[E["feedback-id"],E.col]},[t("span",{class:E["feedback-id-literal"]},[r("lobby.feedback.feedbackID"),P(":")]),s.feedbackId,t(ze,{class:E.copy,text:s.feedbackId.toString()},null)]),t("div",{class:[E["text-right"],E.col]},[t("div",{class:s.status===Y.Adopted?E.success:""},[a[s.status]]),t(M,{class:E["right-icon"],src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])]),t("div",null,[t("div",{class:[E["feedback-content"],E.col]},[t("p",null,[t("span",null,[r("lobby.feedback.feedbackContent")]),t("span",{class:E["date-time"]},[ke(s.createTime)])]),t("p",null,[s.content])]),!!c&&t("div",{class:[E["feedback-reply"],E.col]},[t("p",null,[t("span",null,[r("lobby.feedback.feedbackReply")]),t("span",{class:E["date-time"]},[ke(o)])]),t("p",null,[c])])])])}}}),zt="_placeholder_16qgd_22",Kt="_pagination_16qgd_26",ye={"my-feedbaks-root":"_my-feedbaks-root_16qgd_17",placeholder:zt,pagination:Kt};function Qt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[jt]=te("FeedbackList"),Ht=D({name:jt,setup(){const{t:e}=q(),n=w(),r=se(),{state:a,pageSize:s,setHasCreateNewFeedback:c,getFeedBackData:o,setFetching:l,reset:u,setFeedbackItem:m}=r,{data:y,isFetching:f,total:v,currentPage:_}=j(r),b=_e(),C=R(()=>f.value?"nested-loading":a.getUserFeedbackAxiosError?"retry":y.value.length?null:"empty"),g=I=>{var i;o(I),(i=n.value)==null||i.scrollTo({y:0},{duration:0})};bt(()=>{a.hasCreateNewFeedback&&u(),c(!1),o()});const x=async I=>{l(!0),await o();const{feedbackId:i}=I,N=y.value.find(S=>S.feedbackId===i);m(N!=null?N:I),b.push({name:J.FEEDBACK_DETAIL,query:{id:"".concat(i)}})};return()=>{let I;return t(Re,null,[t("div",{class:ye["my-feedbaks-root"],ref:n},[t(de,{type:C.value,empty:{text:e("lobby.feedback.empty")},onRetry:()=>{u(),o(1)},class:{[ye.placeholder]:C.value}},Qt(I=y.value.map(i=>t($t,{onItemClick:x,data:i,key:i.feedbackId},null)))?I:{default:()=>[I]})]),v.value>10&&t(Me,{modelValue:_.value,"onUpdate:modelValue":i=>_.value=i,"total-items":v.value,"items-per-page":s,onChange:g,class:ye.pagination},null)])}}}),Vt="_clubFeedBack_xclt5_26",Wt="_tabs_xclt5_29",Yt="_literal_xclt5_103",Gt="_amount_xclt5_119",Zt="_text_xclt5_119",Xt="_button_xclt5_123",F={"feedback-root":"_feedback-root_xclt5_17",clubFeedBack:Vt,"tabs-wrapper":"_tabs-wrapper_xclt5_29",tabs:Wt,"is-my-feedback":"_is-my-feedback_xclt5_36",default:"_default_xclt5_69","red-hot":"_red-hot_xclt5_82","wrapper-receive":"_wrapper-receive_xclt5_92","inner-wrapper-receive":"_inner-wrapper-receive_xclt5_97",literal:Yt,amount:Gt,text:Zt,button:Xt};function ge(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[Jt]=te("Feedback"),ea=D({name:Jt,setup(){const{t:e}=q(),{state:n,setActiveKey:r,getFeedBackData:a}=se(),{isDemoMode:s}=ee(),{updatePrize:c}=Ke(),o=w(!1),{openLoginRegister:l}=Qe(),u=[{label:()=>e("lobby.feedback.createFeedback"),value:Q.FEEDBACK,component:t(Mt,null,null)},{label:()=>e("lobby.feedback.mineFeedback"),value:Q.MY_FEEDBACKS,component:t(Ht,null,null)}],m=(v,_)=>{const b=ee().hasLogined;if(_&&!b){l({onSuccess:()=>{r(v)}});return}r(v)},y=()=>{if(s){V({type:"warn",message:e("lobby.feedback.demoModeNotReceived")});return}o.value||(o.value=!0,dt({feedback:0}).then(()=>{V({type:"success",message:e("lobby.notice.receivedSuccess")}),a(),c(),je.Receive()}).finally(()=>{o.value=!1}))},f=R(()=>{var v;return He((v=n.availableRewards)!=null?v:0,{showGroup:!0,toFixedType:"currency",sign:!1}).toFixed({tailZero:!0}).toString()});return()=>{var b;let v,_;return t("div",{class:[F["feedback-root"],""]},[t("div",{class:F["tabs-wrapper"]},[t(pe,{shrink:!0,animated:!0,lineHeight:0,lineWidth:0,class:{[F.tabs]:!0,[F["is-my-feedback"]]:n.activeKey===Q.MY_FEEDBACKS}},ge(v=u.map(C=>{const g=C.value===Q.MY_FEEDBACKS;return t(Ie,{title:()=>{let x;return t(ie,{class:{[F["red-hot"]]:n.unRead&&g,[F.default]:C.value!==n.activeKey},plain:C.value!==n.activeKey,key:C.value,onClick:()=>m(C.value,g)},ge(x=C.label())?x:{default:()=>[x]})}},null)}))?v:{default:()=>[v]}),n.activeKey===Q.MY_FEEDBACKS&&t("div",{class:F["wrapper-receive"]},[t("div",{class:F["inner-wrapper-receive"]},[t("p",{class:F.literal},[e("lobby.feedback.toBeCollected"),P(" ")]),t("p",{class:F.amount},[n.getUserFeedbackAxiosError&&t(Se,{onRetry:()=>a(0)},null),t("span",{class:F.text},[!n.getUserFeedbackAxiosError&&f.value])])]),t(ie,{disabled:!n.availableRewards,type:"success",class:F.button,onClick:y},ge(_=e("lobby.feedback.toBeCollectedAll"))?_:{default:()=>[_]})])]),t(mt,null,[u[(b=n.activeKey)!=null?b:Q.FEEDBACK].component])])}}}),ta="_main_o5dr3_17",aa="_extraMain_o5dr3_20",oa="_titleNavClass_o5dr3_29",na="_listContainer_o5dr3_45",sa="_empty_o5dr3_52",la="_messagePlaceholder_o5dr3_63",ca="_list_o5dr3_45",ra="_innerList_o5dr3_77",ia="_listBox_o5dr3_92",ua="_announcement_o5dr3_96",da="_icon_o5dr3_112",_a="_annContent_o5dr3_116",pa="_noRead_o5dr3_121",ba="_title_o5dr3_29",ma="_createTime_o5dr3_153",fa="_marqueeTitle_o5dr3_158",va="_readed_o5dr3_192",ya="_winPrize_o5dr3_200",ga="_listDeleteBtn_o5dr3_228",ka="_marquee_o5dr3_158",ha="_feedback_o5dr3_260",Ca="_prizeBtn_o5dr3_276",Na="_prizeBtnReceved_o5dr3_283",Ta="_prizeTextWrap_o5dr3_286",xa="_prizeTitle_o5dr3_290",Ia="_prizeRemark_o5dr3_294",Sa="_tabsFooter_o5dr3_301",Aa="_footer_o5dr3_305",Ea="_footerLeft_o5dr3_311",wa="_cancle_o5dr3_329",Ra="_pageChangeButton_o5dr3_334",La="_footerButton_o5dr3_340",Da="_checkbox_o5dr3_360",Ma="_selected_o5dr3_371",Oa="_innerDefualt_o5dr3_378",Fa="_scrollContent_o5dr3_386",Pa="_messageTitle_o5dr3_407",qa="_noticeContent_o5dr3_413",Ba="_iconWrapper_o5dr3_450",Ua="_controlIcon_o5dr3_456",$a="_noticePagination_o5dr3_465",za="_loading_o5dr3_480",k={main:ta,extraMain:aa,titleNavClass:oa,listContainer:na,empty:sa,messagePlaceholder:la,list:ca,innerList:ra,listBox:ia,announcement:ua,icon:da,annContent:_a,noRead:pa,title:ba,createTime:ma,marqueeTitle:fa,readed:va,winPrize:ya,listDeleteBtn:ga,marquee:ka,feedback:ha,prizeBtn:Ca,prizeBtnReceved:Na,prizeTextWrap:Ta,prizeTitle:xa,prizeRemark:Ia,tabsFooter:Sa,footer:Aa,footerLeft:Ea,delete:"_delete_o5dr3_325",cancle:wa,pageChangeButton:Ra,footerButton:La,checkbox:Da,selected:Ma,innerDefualt:Oa,scrollContent:Fa,messageTitle:Pa,noticeContent:qa,iconWrapper:Ba,controlIcon:Ua,noticePagination:$a,loading:za},[Ka]=te("MessageList"),Qa=D({name:Ka,props:{dataType:{type:Object,default:d.NOTICE,required:!0},listData:{type:Array,default:[],required:!0}},emits:["getInnerPage"],setup(e,{emit:n,slots:r}){const{t:a}=q(),s=o=>{n("getInnerPage",o)};Le(()=>{ft(()=>{const o=document.querySelectorAll(".notice-marquee-content");o&&(o==null||o.forEach(l=>{Ve(l)}))})});const c=o=>{const l=o.read_status===X.claimed;let u="";switch(e.dataType){case d.ANNOUNCEMENT:u=fe("/lobby_asset/{layout}-{bg}-{skin}/common/_sprite/".concat(l?"icon_dt_1xx":"icon_dt_1xx_wd",".png"));break;case d.NOTICE:u=fe("/lobby_asset/{layout}-{bg}-{skin}/common/_sprite/icon_dt_1tz.png");break;case d.MARQUEE:u=fe("/lobby_asset/{layout}-{bg}-{skin}/common/_sprite/icon_dt_1gg.png");break}return t("div",{class:[k.announcement,"theme-box-shadow"],onClick:()=>s(o)},[t("div",null,[t("div",{class:{[k.icon]:!0,[k.noRead]:(e.dataType===d.ANNOUNCEMENT||e.dataType===d.NOTICE)&&!l}},[t(M,{class:k.annContent,useSkeleton:!0,src:u},null)]),t("div",{class:{[k.title]:!0,[k.marqueeTitle]:e.dataType===d.MARQUEE}},[e.dataType===d.MARQUEE?t("h1",{class:[k.noticeContent,"notice-marquee-content"]},[t(ve,{html:We(o.content),format:m=>m},null)]):t("h1",{class:k.noticeContent},[t(ve,{html:o.title,format:m=>m},null)]),o.create_time?t("p",{class:k.createTime},[ke(Number(o.create_time))]):null]),t("h2",{class:{[k.readed]:(e.dataType===d.ANNOUNCEMENT||e.dataType===d.NOTICE)&&l}},[e.dataType!==d.MARQUEE&&t(ve,{html:a(l?"lobby.notice.readed":"lobby.notice.unread"),format:m=>m},null),t(M,{src:"/lobby_asset/common/web/common/comm_icon_fh.svg",useSkeleton:!0},null)])]),e.dataType!==d.MARQUEE&&(o==null?void 0:o.prize_status)===Ye.unclaimed&&t("div",{class:k.winPrize},[t("span",null,[a("lobby.notice.winPrize")]),t(M,{useSkeleton:!0,src:"/lobby_asset/common/web/common/img_label_def-2.svg"},null)])])};return()=>{var o;return t("div",{class:k.listContainer},[t("ul",{class:k.list},[e.listData.map((l,u)=>t("li",{key:"".concat((l==null?void 0:l.triggerId)||"default","_").concat(l.id),class:"theme-box-shadow-h5",style:{cursor:"pointer"}},[t("div",{class:k.listBox,id:"listBox_".concat(u)},[c(l)])]))]),(o=r.default)==null?void 0:o.call(r)])}}}),[ja]=te("messageSwitch"),Ha=D({name:ja,props:{activeKey:{type:Object,default:d.NOTICE}},emits:["messageControl"],setup(e,{emit:n}){var y;const r=Ge(),{systemInfos:a}=j(r),{hasLogined:s}=ee(),c=(y=a.value)==null?void 0:y.messageSwitch,o=R(()=>[d.ANNOUNCEMENT,d.NOTICE].includes(e.activeKey)?e.activeKey===d.NOTICE?"notify":"ann":""),l=R(()=>{var f;return o.value?(f=c==null?void 0:c[o.value])==null?void 0:f.read:le.CLOSE}),u=R(()=>{var f;return o.value?(f=c==null?void 0:c[o.value])==null?void 0:f.delete:le.CLOSE}),m=f=>{s&&n("messageControl",f)};return()=>t("div",{class:k.iconWrapper},[u.value===le.OPEN&&t(M,{class:k.controlIcon,src:"/lobby_asset/common/web/common/comm_icon_xxzx_sc.svg",onClick:f=>{f.stopPropagation(),m("delete")}},null),l.value===le.OPEN&&t(M,{class:k.controlIcon,src:"/lobby_asset/common/web/common/comm_icon_xxzx_yd.svg",onClick:f=>{f.stopPropagation(),m("read")}},null)])}});var re=(e=>(e[e.Self=0]="Self",e[e.Third=1]="Third",e))(re||{});const Va="_icon_40efo_33",Wa="_button_40efo_49",U={"online-customers-wrapper":"_online-customers-wrapper_40efo_17","online-customers":"_online-customers_40efo_17","inner-online-customers":"_inner-online-customers_40efo_29",icon:Va,"literal-tools":"_literal-tools_40efo_37","default-title":"_default-title_40efo_40","default-describe":"_default-describe_40efo_44","button-mobile":"_button-mobile_40efo_49",button:Wa},[Ya]=H("service-online-customers"),Ga=D({name:Ya,setup(){const{t:e}=q(),n=be(),{serviceAxiosError:r,serviceInfo:a,loading:s}=j(n),{updateStaffall:c}=n,o=()=>e("lobby.service.online.title"),l=()=>e("lobby.service.online.describe"),u={[re.Self]:"/lobby_asset/common/common/support/img_kf_kf01.png",[re.Third]:"/lobby_asset/common/common/support/img_kf_kf03.png"},m=R(()=>{var f;return((f=a.value.customer.onlineCustomers)!=null?f:[]).slice(0,6)});return()=>t("div",{class:[U["online-customers-wrapper"]]},[t("div",{class:U["online-customers"]},[t("div",{class:U["inner-online-customers"]},[t(M,{class:U.icon,useSkeleton:!0,src:u[re.Self]},null),t("div",{class:U["literal-tools"]},[t("div",{class:U["default-title"]},[o()]),t("div",{class:U["default-describe"]},[l()])])]),t("div",{class:U["button-mobile"]},[r.value&&t(he,{plain:!0,"clear-background":!0,type:"primary",class:U.button,onClick:c},{default:()=>[t(Se,{onRetry:c,loading:s.value},null)]}),!r.value&&m.value.map(y=>t(he,{plain:!0,"clear-background":!0,type:"primary",class:U.button,onClick:()=>Ze(y),key:y.customerCode},{default:()=>[y.customerName]}))])])])}}),Fe=({queryKey:e,routeName:n=J.NOTICE,defaultActiveKey:r})=>{const a=we(),s=_e(),o=vt()[e];return{activeKey:w(o!==void 0?Number(o):r),urlKey:o,replaceRouterToActiveTab:m=>{s.replace({name:n,query:{...a.query,[e]:m}})}}},Za={customerList:{type:Array,default:()=>[]}},Xa="_scroll_16px9_20",Ja="_other_16px9_17",eo="_icon_16px9_47",z={"other-customers":"_other-customers_16px9_17",scroll:Xa,other:Ja,"other-content":"_other-content_16px9_29","other-item":"_other-item_16px9_37",icon:eo,"wrapper-customer-name":"_wrapper-customer-name_16px9_60","customer-name":"_customer-name_16px9_65","customer-number":"_customer-number_16px9_76"};function to(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[ao]=H("service-other-customers-list"),oo=D({name:ao,props:Za,setup(e){const{t:n}=q(),{copy:r}=yt(),a=(c,o)=>{r(c),V.success(n("lobby.common.tips.copy")),o&&setTimeout(()=>{Xe(o)},500)},s=c=>{const o=Je();return o===ue.IOS_H5?c.iosUrl:o===ue.ANDROID_H5?c.androidUrl:c.pcUrl};return()=>t("div",{class:z["other-customers"]},[t(Ae,{direction:"y",class:z.scroll},{default:()=>{var c;return[t("div",{class:z.other},[t("div",{class:z["other-content"]},[(c=e.customerList)==null?void 0:c.map(o=>{let l;return t("div",{class:z["other-item"],key:o==null?void 0:o.id},[t(M,{src:o==null?void 0:o.imgObject,class:z.icon,useSkeleton:!0},null),t("div",{class:z["wrapper-customer-name"]},[t("p",{class:z["customer-name"]},[o==null?void 0:o.customerName]),t("span",{class:z["customer-number"]},[o==null?void 0:o.customerNumber])]),t(he,{type:"primary",onClick:()=>{a(o==null?void 0:o.customerNumber,s(o))}},to(l=n("lobby.service.immediateContract"))?l:{default:()=>[l]})])})])])]}})])}}),no="_placeholder_gizva_17",ae={placeholder:no,"title-nav":"_title-nav_gizva_21","other-customers":"_other-customers_gizva_26","title-nav-padding":"_title-nav-padding_gizva_34","tabs-item":"_tabs-item_gizva_43"};var K=(e=>(e[e.Line=0]="Line",e[e.QQ=1]="QQ",e[e.Telegram=2]="Telegram",e[e.WeChat=3]="WeChat",e[e.WhatsApp=4]="WhatsApp",e[e.Skype=5]="Skype",e[e.Facebook=6]="Facebook",e[e.Customer=-1]="Customer",e))(K||{});const so=()=>{const{t:e}=q(),n="lobby.service.customerLiteral";return{otherCustomersTabList:{[K.Customer]:{url:"/lobby_asset/common/common/support/icon_kf_im.png",name:()=>e("lobby.service.customer")},[K.Line]:{url:"/lobby_asset/common/common/support/icon_im_LINE.png",name:()=>"Line".concat(e(n))},[K.QQ]:{url:"/lobby_asset/common/common/support/icon_im_QQ.png",name:()=>"QQ".concat(e(n))},[K.Skype]:{url:"/lobby_asset/common/common/support/icon_im_Skype.png",name:()=>"Skype".concat(e(n))},[K.Telegram]:{url:"/lobby_asset/common/common/support/icon_im_telegram.png",name:()=>"Telegram".concat(e(n))},[K.Facebook]:{url:"/lobby_asset/common/common/support/icon_im_Facebook.png",name:()=>"Facebook".concat(e(n))},[K.WeChat]:{url:"/lobby_asset/common/common/support/icon_im_WeChat.png",name:()=>e("lobby.service.weChatLiteral")},[K.WhatsApp]:{url:"/lobby_asset/common/common/support/icon_im_WhatsApp.png",name:()=>"WhatsApp".concat(e(n))}}}};function lo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[co]=H("service-other-customers"),ro=D({name:co,setup(){const e=be(),{serviceInfo:n,loading:r,serviceAxiosError:a}=j(e),{updateStaffall:s}=e,{userInfos:c}=ee(),{activeKey:o,replaceRouterToActiveTab:l}=Fe({queryKey:"otherCustomersType",defaultActiveKey:void 0}),u=R(()=>{var b;return(b=c==null?void 0:c.member_level)!=null?b:1}),m=R(()=>{var _,b;return(b=(_=n.value.customer)==null?void 0:_.otherCustomers)!=null?b:[]}),{otherCustomersTabList:y}=so(),f=R(()=>m.value.map(_=>{const b=_.customerList.filter(C=>C.userLevel.split(",").includes(String(u.value)));return{..._,customerList:b}}).filter(_=>_.customerList.length>0)),v=R(()=>r.value?"nested-loading":a.value?"retry":null);return De([f,r],()=>{f.value.length&&o.value===void 0&&(o.value=f.value[0].appType)},{immediate:!0}),()=>{let _;return f.value.length?t("div",{class:ae["other-customers"]},[t(de,{type:v.value,onRetry:s,retry:{loading:r.value},class:{[ae.placeholder]:v.value}},{default:()=>[t(pe,{shrink:!0,animated:!0,active:o.value,"onUpdate:active":b=>o.value=b,titleNavClass:[ae["title-nav"],ae["title-nav-padding"]],onChange:l},lo(_=f.value.map(({appType:b,customerList:C})=>t(Ee,{key:b,name:b,title:()=>{const{url:g,name:x}=y[b];return t("div",{class:ae["tabs-item"]},[t(M,{src:g,useSkeleton:!0},null),x()])}},{default:()=>[t(oo,{customerList:C},null)]})))?_:{default:()=>[_]})]})]):null}}});var G=(e=>(e[e.NormalQuestionType=0]="NormalQuestionType",e[e.HotQuestionType=1]="HotQuestionType",e))(G||{});const io={data:{type:Array,default:()=>[]},typeId:{type:Number,default:0},isHot:{type:Boolean,default:!1}},xe={"sub-category":"_sub-category_1whb1_17","hot-list":"_hot-list_1whb1_40"},[uo]=H("service-question-list"),Pe=D({name:uo,props:io,setup(e){const n=_e(),r=({typeId:a,questionId:s})=>{n.push({name:J.CUSTOMERS_QUESTION_DETAIL,query:{typeId:a,questionId:s}})};return()=>{var a;return t("ul",{class:{[xe["sub-category"]]:!0,[xe["hot-list"]]:e.isHot}},[(a=e.data)==null?void 0:a.map((s,c)=>t("li",{key:s.id,onClick:()=>r({typeId:e.typeId||s.typeId,questionId:s.id})},[t("div",null,[c+1,P("、"),s.title]),t(M,{useSkeleton:!0,src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)]))])}}}),_o={data:{type:Object,default:()=>({})}},po="_item_bpjyb_17",bo="_category_bpjyb_20",mo="_expand_bpjyb_42",oe={item:po,category:bo,"inner-category":"_inner-category_bpjyb_27","type-icon":"_type-icon_bpjyb_31",expand:mo},[fo]=H("service-question-list"),vo=D({name:fo,props:_o,setup(e){const n=w(!1);return()=>{const{typeIcon:r,typeName:a,typeId:s,questionList:c}=e.data;return t("div",{class:oe.item},[t("div",{class:oe.category,onClick:()=>n.value=!n.value},[t("div",{class:oe["inner-category"]},[t(M,{useSkeleton:!0,src:r,class:oe["type-icon"]},null),t("div",null,[t("p",null,[a])])]),t("span",{class:{[oe.expand]:n.value}},[t(M,{useSkeleton:!0,src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])]),n.value&&t(Pe,{data:c,typeId:s},null)])}}}),yo="_placeholder_6gpnc_17",ne={placeholder:yo,"title-nav":"_title-nav_6gpnc_21","tab-title":"_tab-title_6gpnc_26","normal-question-and-hot-question":"_normal-question-and-hot-question_6gpnc_33","wrapper-normal-question":"_wrapper-normal-question_6gpnc_45"};function go(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[ko]=H("service-question"),ho=D({name:ko,setup(){const{t:e}=q(),n=be(),{serviceInfo:r,loading:a,serviceAxiosError:s}=j(n),{updateStaffall:c}=n,{activeKey:o,replaceRouterToActiveTab:l}=Fe({queryKey:"question",defaultActiveKey:G.NormalQuestionType}),u=R(()=>{var _;return((_=r.value.question)!=null?_:[]).filter(b=>b.questionList.length)}),m=R(()=>{const v=u.value.map(b=>b.questionList.map(C=>({...C,typeId:b.typeId}))),_=[].concat(...v);return _t(_,10)}),y=R(()=>a.value?"nested-loading":s.value?"retry":null),f=[{value:()=>e("lobby.service.commonQuestion"),key:G.NormalQuestionType},{value:()=>e("lobby.service.hotQuestion"),key:G.HotQuestionType}];return()=>{let v;return u.value.length?t("div",{class:[ne["normal-question-and-hot-question"]]},[t(de,{type:y.value,onRetry:c,retry:{loading:a.value},class:{[ne.placeholder]:y.value}},{default:()=>[t(pe,{animated:!0,active:o.value,"onUpdate:active":_=>o.value=_,lazyRender:!0,shrink:!0,titleNavClass:ne["title-nav"],onChange:l},go(v=f.map(({key:_,value:b})=>t(Ee,{key:_,name:_,titleClass:ne["tab-title"],title:b()},{default:()=>[t(Ae,{class:ne["wrapper-normal-question"]},{default:()=>[_===G.NormalQuestionType&&u.value.map(C=>t(vo,{data:C,key:C.typeId},null)),_===G.HotQuestionType&&t(Pe,{data:m.value,isHot:!0},null)]})]})))?v:{default:()=>[v]})]})]):null}}}),Co={"service-root":"_service-root_ebsx3_17"},[No]=H("service-index"),To=D({name:No,setup(){const{updateStaffall:e}=be();return Le(()=>{e()}),()=>t("div",{class:[Co["service-root"]]},[t(Ga,null,null),t(ro,null,null),t(ho,null,null)])}});function xo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const[Io]=H("pages-notice"),$o=D({name:Io,setup(){const{t:e}=q(),{retryLoading:n,listData:r,activeKey:a,tabs:s,total:c,PAGE_SIZE:o,currentPage:l,controlLoading:u,pagePlaceholderType:m,initData:y,onPageChange:f}=Nt(),v=Z(),{announcementReadIds:_,noticeReadIds:b,unreadNotice:C,unreadAnnouncement:g}=j(v),{state:x,getFeedBackData:I}=se(),i=we(),N=_e();De(()=>a.value,async p=>{N.replace({name:J.NOTICE,query:{...p===d.SERVICE?i.query:{},noticeType:p}}),r.value=[],[d.ANNOUNCEMENT,d.MARQUEE,d.NOTICE].includes(p)&&(v.setRecordPage({}),y(p))},{immediate:!1});const S=()=>{i.query.noticeType||N.replace({name:J.NOTICE,query:{noticeType:d.ANNOUNCEMENT}});const p=Number(i.query.noticeType);a.value=p,[d.ANNOUNCEMENT,d.MARQUEE,d.NOTICE].includes(a.value)&&y(a.value),x.activeKey!==Q.MY_FEEDBACKS&&I(0)};et(()=>{const{notice:p,getMessageAll:h}=Z();JSON.stringify(p)=="{}"&&h({page:1,type:ce.INDEX_PAGE}),S()});const B=p=>{p&&(p.content=ot(p.content,{allowRedirects:"true"}));const h=Z(),{unreadAnnouncement:O,unreadNotice:L}=j(h),{hasLogined:me}=ee();a.value!==d.MARQUEE&&p.read_status===X.unclaimed&&(p.read_status=X.claimed,a.value==d.ANNOUNCEMENT&&(h.setUnreadAnnouncement(O.value-1),me||(_.value.push(p.id),v.setAnnouncementReadIds(_.value))),a.value==d.NOTICE&&(h.setUnreadNotice(L.value-1),me||(b.value.push(p.id),v.setNoticeReadIds(b.value))),me&&nt({id:p.id,type:a.value,triggerId:p==null?void 0:p.triggerId})),st.localStorage.set("noticeItem",p),h.setRecordPage({page:l.value,type:a.value}),N.push({name:J.NOTICE_DETAIL,query:{noticeType:a.value}})},A=p=>{if(r.value.length!==0&&!u.value)if(p==="read"){if(a.value===d.NOTICE&&C.value===0||a.value===d.ANNOUNCEMENT&&g.value===0)return;u.value=!0,lt({type:a.value}).then(()=>{V({type:"success",message:e("lobby.notice.readTip")}),S(),u.value=!1}).catch(()=>{u.value=!1})}else ct({title:e("lobby.notice.importantNotice"),type:"error",className:"delModel",messageAlign:"center",showCancelButton:!0,cancelButtonClearBackground:!0,message:()=>t("span",{style:"font-weight: bold;color:var(--skin__lead)"},[a.value===d.ANNOUNCEMENT?e("lobby.notice.annDeleteTip"):e("lobby.notice.noticeDeleteTip")]),onConfirm(){u.value=!0,rt({type:a.value}).then(()=>{V({type:"success",message:e("lobby.notice.hasDel")}),S(),u.value=!1}).catch(()=>{u.value=!1})}})};return()=>t(at,{useScroll:!1},{header:()=>t(tt,{class:"noticeBaseHeader"},{default:()=>t("p",{class:k.messageTitle},[e("lobby.header.menus.messageCenter")]),right:()=>t(Ha,{activeKey:a.value,onMessageControl:p=>{A(p)}},null)}),default:()=>{let p;return t("div",{class:{"global-views-notice":!0,[k.main]:!0,[k.extraMain]:[d.SERVICE,d.FEEDBACK].includes(a.value)}},[t(pe,{shrink:!0,animated:!0,class:{[k.commonTabs]:!0,[k.commonTabsService]:a.value===d.SERVICE,"theme-box-shadow":!0,"global-notice-tabs":!0},active:a.value,"onUpdate:active":h=>a.value=h,titleNavClass:k.titleNavClass},xo(p=s.value.map(h=>{var O;return t(Ie,{key:h.key,name:h.key,titleClass:"tab-item",title:h.value,showZeroBadge:!1,badge:[d.ANNOUNCEMENT,d.NOTICE,d.FEEDBACK].includes(h.key)&&(O=h.unread)!=null?O:void 0},{default:()=>[[$.ANNOUNCEMENT,$.MARQUEE,$.NOTICE].includes(h.componentName)&&t(de,{type:m.value,class:{[k.empty]:!r.value.length,[k.messagePlaceholder]:!0},empty:{text:e("lobby.notice.empty")},retry:{loading:n.value},onRetry:S},{default:()=>[t(Qa,{dataType:a.value,listData:r.value,onGetInnerPage:L=>B(L)},{default:()=>[c.value>10&&t(Me,{modelValue:l.value,"onUpdate:modelValue":L=>l.value=L,"total-items":c.value,"items-per-page":o,"force-ellipses":!0,onChange:L=>f(L),class:k.noticePagination},null)]})]}),h.componentName===$.FEEDBACK&&t(ea,null,null),h.componentName===$.SERVICE&&t(To,null,null)]})}))?p:{default:()=>[p]})])}})}});export{$o as default};
//# sourceMappingURL=NoticeIndex.BB__sBre.js.map
