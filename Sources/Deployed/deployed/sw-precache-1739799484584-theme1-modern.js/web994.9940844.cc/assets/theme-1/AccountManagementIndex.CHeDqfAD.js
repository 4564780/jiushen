import{a as W,hj as E,ho as V,hp as te,w as C,hq as ce,gJ as x,hr as P,hs as T,u as $,fq as M,I as A,U,ht as k,dM as ne,hu as F,r as J,cC as G,hv as oe,fn as R,hw as B,Z as se,hx as le,hy as ae,hz as ie,v as re}from"./main.C8q1iJMV.js";import{d as ue}from"../vendors/vendor-stable.LD58Pbb3.js";import{e as N}from"../vendors/vendor-default.CjiYZF7Q.js";import{r as Y,f as i,l as L,p as t,v as I,F as he,A as O}from"../vendors/vendor-@vue.DNlpgob2.js";import{d as we,c as _e}from"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const q=ue("withdrawAccount",()=>{const{t:c}=W(),e=E(),o=V(),l=Y(!1);return{showAccountNo:l,switchShowAccount:()=>{l.value=!l.value},deleteAccount:async(u,r)=>{const w={id:r.id,accountType:r.accountType,passwd:u},[s]=await N(te(w));o.getWithdrawSetting(),e.getUserWithdrawInfo(),!s&&C.success({message:c("lobby.finance.withdraw.add.delSuccess")})},setdefaultAccount:async u=>{const r={id:u.id.toString(),accountType:u.accountType},[w]=await N(ce(r));w||(C.success({message:c("lobby.finance.withdraw.add.setDefaultSuccess")}),o.getWithdrawSetting(),e.getUserWithdrawInfo())}}}),de={data:{type:Object,default:()=>{}}};function fe(c){const{t:e}=W(),o=i(()=>(c==null?void 0:c.bankName)||(c==null?void 0:c.withdrawTypeName)||""),l=i(()=>(c==null?void 0:c.accountType)===x.PIX),p=i(()=>(c==null?void 0:c.channelName)===P.CNPJ),b=i(()=>(c==null?void 0:c.channelName)===P.EVP),g=i(()=>(c==null?void 0:c.channelName)===P.CPF),u=i(()=>(c==null?void 0:c.accountType)===x.CGPAY_USDT),r=i(()=>(c==null?void 0:c.stop)===T.DISABLED),w=i(()=>(c==null?void 0:c.bankStop)===T.DISABLED),s=i(()=>(c==null?void 0:c.default)===T.DISABLED),f=i(()=>w.value?e("lobby.finance.withdraw.accountReceivable.bankDisable"):o.value);return{text:o,isPix:l,isCNPJ:p,isEVP:b,isCPF:g,isCgpayUSDT:u,isDisableAccount:r,isDisableBank:w,isDefAccount:s,labelText:f}}const me="_cell_1ajtt_17",be="_defAccount_1ajtt_27",ge="_corner_1ajtt_31",pe="_gou_1ajtt_38",Ae="_left_1ajtt_58",ye="_logo_1ajtt_62",ve="_info_1ajtt_68",Se="_channelName_1ajtt_68",De="_lighten_1ajtt_78",Ie="_l_1ajtt_58",Ne="_copyIcon_1ajtt_92",We="_right_1ajtt_98",Pe="_setDefault_1ajtt_104",Te="_disable_1ajtt_115",ke="_rightIcon_1ajtt_124",Ce="_deleBox_1ajtt_130",n={cell:me,defAccount:be,corner:ge,gou:pe,"corner-bg":"_corner-bg_1ajtt_46",left:Ae,logo:ye,info:ve,channelName:Se,lighten:De,l:Ie,"l-text":"_l-text_1ajtt_86",copyIcon:Ne,right:We,setDefault:Pe,disable:Te,delete:"_delete_1ajtt_118",rightIcon:ke,deleBox:Ce},[Ee]=U("account-info-cell"),Le=L({name:Ee,props:de,setup(c){const{data:e}=c,{t:o}=W(),l=q(),p=E(),b=$(),{getAccountRuleByType:g}=M(),{isPix:u,isCNPJ:r,isEVP:w,isCPF:s,isCgpayUSDT:f,isDisableAccount:_,isDisableBank:d,isDefAccount:h,labelText:y}=fe(e),X=async(a,S)=>{const[v]=await N(F({withdrawalPassword:String(a)}));if(v){const{code:D}=J(v);D===G.WRONG_PASSWORD&&S();return}l.deleteAccount(a,e),b.close("withdrawalPassword")},z=()=>{var S,v,D,j;const a=(v=(S=g(e==null?void 0:e.accountType))==null?void 0:S.deleteEnabled)!=null?v:!1;return((j=(D=p.accountList)==null?void 0:D.length)!=null?j:0)<1||!a?t("span",{class:n.deleBox},null):t("span",{class:n.delete,onClick:()=>{b.open("withdrawalPassword",{onSuccess:X})}},[t(A,{src:"/lobby_asset/common/web/common/comm_icon_del.svg"},null)])},H=()=>{console.log("handleDisableAccountClick"),C.warn({message:()=>t("div",null,[o("lobby.finance.withdraw.warning.disableAccount")])})},Z=we(()=>{l.setdefaultAccount(e)},300),K=()=>u.value?t("div",null,[t("span",null,[e==null?void 0:e.withdrawTypeName]),t("span",{class:n.lighten},[I("("),e==null?void 0:e.bankName,I(")")])]):t("span",null,[y.value]),Q=()=>{if(!(e!=null&&e.account))return;let a=e.account;return u.value&&(r.value&&(a=k(e.account,"2.3.3/4-2")),w.value&&(a=k(e.account,"8-4-4-4-12")),s.value&&(a=k(e.account,"3.3.3-2"))),t("p",{class:n.l},[t("span",{class:n["l-text"]},[(e==null?void 0:e.account)&&(l.showAccountNo?a:o("lobby.finance.withdraw.bankLess2No",{no:e.account.slice(-4)}))]),(e==null?void 0:e.account)&&l.showAccountNo&&t(ne,{icon:"/lobby_asset/common/web/profile/style_1_icon_copy.svg",class:n.copyIcon,text:a},null)])},ee=i(()=>_.value?t("span",{class:[n.setDefault,n.disable],onClick:H},[o("lobby.finance.withdraw.accountReceivable.disable")]):d.value?null:t("span",{class:n.setDefault,onClick:Z},[o("lobby.finance.withdraw.accountReceivable.addDefault")]));return()=>{var a;return t("div",{key:e==null?void 0:e.account,class:{[n.cell]:!0,[n.defAccount]:h.value}},[h.value&&t("span",{class:n.corner},[t(A,{class:n["corner-bg"],src:"/lobby_asset/common/web/common/comm_img_corner.svg"},null),t(A,{class:n.gou,src:"/lobby_asset/common/web/common/comm_icon_gou.svg"},null)]),t("div",{class:n.left},[t(A,{class:n.logo,src:(a=e==null?void 0:e.logo)!=null?a:""},null),t("div",{class:n.info},[t("p",{class:{[n.channelName]:!0}},[K(),(e==null?void 0:e.channelName)&&(e==null?void 0:e.cryptoCurrency)&&!f.value&&t("span",{class:n.lighten},[I("("),e.channelName,I(")")])]),Q()])]),t("div",{class:n.right},[h.value?t(he,null,[_.value&&t("span",{class:[n.setDefault,n.disable]},[o("lobby.finance.withdraw.accountReceivable.disable")])]):ee.value,z()])])}}}),je="_bindAccount_y0rkv_17",xe="_title_y0rkv_24",Re="_left_y0rkv_28",Be="_number_y0rkv_34",Oe="_retry_y0rkv_38",Ve="_right_y0rkv_42",$e="_hidden_y0rkv_46",Me="_accountList_y0rkv_49",m={bindAccount:je,title:xe,left:Re,number:Be,retry:Oe,right:Ve,hidden:$e,accountList:Me},[Ue]=U("receive-account"),Fe=L({name:Ue,setup(){const{t:c}=W(),e=q(),o=E(),l=V(),{bindAccountLimit:p}=oe(),{getAccountRuleByTypeId:b}=M(),g=Y(!1),u=()=>{if(!e.showAccountNo&&l.showWithdrawAccountSwitch===B.ALLOW_VERIFY_WITHDRAWAL_PASSWORD&&!g.value){const{open:s,close:f}=$();s("withdrawalPassword",{onSuccess:async(_,d)=>{const[h]=await N(F({withdrawalPassword:String(_)}));if(h){const{code:y}=J(h);y===G.WRONG_PASSWORD&&d();return}f("withdrawalPassword"),g.value=!0,e.switchShowAccount()}})}else e.switchShowAccount()},r=i(()=>{var _;const s=_e(o.accountList)||[];return s.sort((d,h)=>h.default-d.default),((_=b(R.NOWALLET))==null?void 0:_.normalWithdrawEnabled)?s:s.filter(d=>d.typeId!==R.NOWALLET)}),w=i(()=>{var s;return!!((s=r.value)!=null&&s.length)&&l.showWithdrawAccountSwitch!==B.DENY_MEMBER_VIEW});return()=>{var s,f,_,d;return t("div",{class:m.bindAccount},[t("div",{class:m.title},[t("div",{class:m.left},[c("lobby.finance.withdraw.tabs.account"),t("span",{class:m.number},["(".concat((f=(s=r.value)==null?void 0:s.length)!=null?f:0,"/").concat((_=p.value)!=null?_:0,")")]),t(se,{class:m.retry,loading:o.isWithdrawInfoLoading,onRetry:()=>{l.getWithdrawSetting(!1),o.getUserWithdrawInfo()}},null)]),w.value&&t("div",{class:m.right,onClick:u},[e.showAccountNo&&t(A,{src:"/lobby_asset/common/web/common/comm_icon_show.svg"},null),!e.showAccountNo&&t(A,{class:m.hidden,src:"/lobby_asset/common/web/common/comm_icon_hide.svg"},null)])]),t("div",{class:m.accountList},[(d=r.value)==null?void 0:d.map((h,y)=>t(Le,{key:"".concat(h.id).concat(y),data:h},null))])])}}}),Je="_manageAccount_dw9yv_17",Ge={manageAccount:Je},ct=L({setup(){const{addAccountInfo:c,addAccountModal:e,isOpen:o}=le();return O("acountInfo",c),O("isOpen",o),()=>t(re,null,{default:()=>[t("div",{class:Ge.manageAccount},[t(Fe,null,null),t(ae,{addAccountModal:e},null),t(ie,{show:o.value,"onUpdate:show":l=>o.value=l},null)])]})}});export{ct as default};
//# sourceMappingURL=AccountManagementIndex.CHeDqfAD.js.map
