import{r as L,l as F,f as b,p as y,h as M,s as G,w as q,d as U,a as $,o as j,W as V,q as _,C as W}from"../vendors/vendor-@vue.DNlpgob2.js";import{A as z,S as K,a as Q}from"../vendors/vendor-swiper.ZXc-sUCV.js";import{eH as l,kR as Z,aG as J,c0 as X,aE as O,br as Y,bs as ee,az as R,kS as te,kT as se,kU as ae,M as ne,jc as k,Z as oe,I as C,cH as T,as as re,kV as E}from"./main.C8q1iJMV.js";import{d as ie,s as le}from"../vendors/vendor-stable.LD58Pbb3.js";import{e as ce,d as S}from"../vendors/vendor-default.CjiYZF7Q.js";import{R as ue,E as de}from"./ReceiveCountdownIndex.C4K-6t0P.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";var h=(e=>(e[e.Single=0]="Single",e[e.Swiper=1]="Swiper",e))(h||{});const fe=e=>{var c,v,t;const{ANDROID_APP:s,IOS_APP:n,ANDROID_H5:r,IOS_H5:g}=X,u=Z((c=e==null?void 0:e.split(","))!=null?c:[]),d=(t=(v=J)==null?void 0:v.speedPackageConfig)==null?void 0:t.osType,i=new Map;return i.set(!d,()=>u.includes(r)||u.includes(g)),i.set(d===Number(n),()=>u.includes(n)),i.set(d===Number(s),()=>u.includes(s)),i.get(!0)()},N=(e="")=>{let s=0;if(e.includes(":")){const n=e.split(":").map(r=>Number(r));(n==null?void 0:n.length)>0&&(s=n[0]*3600+n[1]*60)}return s},I={[l.Proxy]:["#505453","#1f1f1f"],[l.RedPocket]:["#fee441","#fcc511"],[l.Collection]:["#ff7e3b","#ff4510"],[l.GuessingSports]:["#9e33d2","#6625ba"],[l.Customize]:["#fe5f3f","#fc2a18"],[l.DailyBonus]:["#5a8bfc","#4065f3"],[l.Wager]:["#fc5145","#f92614"],[l.Invest]:["#fe8d8b","#ff4441"],[l.Promote]:["#9551fb","#781ef3"],[l.Rescue]:["#ff7e3b","#ff4510"],[l.LuckyWheel]:["#c359dc","#9b18e2"],[l.LuckyWheelNew]:["#c359dc","#9b18e2"],[l.Deposit]:["#2c94fc","#0b6ef8"],[l.LuckyBet]:["#af73ff","#8239f6"],[l.DiscountCode]:["#ff892d","#ff5a04"],[l.CutOnce]:["#fe6444","#ff4221"],[l.NewCutOnce]:["#fe6444","#ff4221"],[l.Ranking]:["#ffb83c","#ff7d00"],default:["#fe5f3f","#fc2a18"]},B="/active/quickList",pe=async()=>{var s;const e=await O.request({url:B,method:"get",headers:{deviceModel:Y(),devicetype:ee()}},{omitKey:["platformType"],cache:{useCache:"fresh",time:60},token:{type:"staticOnly"},oss:{enable:!0}});return(s=e==null?void 0:e.data)==null?void 0:s.data},ye=e=>{if(!Array.isArray(e))return e;const{member_level:s=1,vip_level:n=0}=R().userInfos||{};return e.filter(r=>{var p;const g=r.userLevel?r.userLevel.split(","):[],u=r.vipLevel?(p=r.vipLevel)==null?void 0:p.split(","):[],d=!r.userLevel||r.userLevel===te.All||s&&r.userLevel&&g.includes(s.toString()),i=!r.vipLevel||n>=0&&r.vipLevel&&u.includes(n.toString());return d&&i})},P=ie("fastEntry",()=>{const e=L([]),s=L({date:null,list:[]}),n=async()=>{const[d,i]=await ce(pe());if(d&&(e.value=[]),Array.isArray(i)){const p=ye(i);e.value=p.filter(f=>{var t,a;const c=se(f.operation),v=(a=(t=s.value)==null?void 0:t.list)==null?void 0:a.includes(f.id);return ae(f.showDeviceType)&&(!f.endShowTime||f.endShowTime>=new Date().getTime()/1e3)&&c&&S().isBefore(S(f.endTime*1e3))&&!v})}};return{fastEntryList:e,fastEntryHideData:s,getFastEntryData:n,refreshFastEntryData:async()=>{await O.setCacheExpired(B),n()},resetFastEntryHideData:()=>{s.value={date:null,list:[]}},addFastEntryHideData:d=>{s.value.date=S(),s.value.list.push(d)}}},{persist:{paths:["fastEntryHideData"]}});var H=(e=>(e[e.Big=1]="Big",e[e.Small=2]="Small",e))(H||{});const ve={id:{type:Number},img:{type:String,required:!0},ActiveName:{type:String},isShowCountDown:{type:Number},clientShowImgSize:{type:Number},isShowActiveName:{type:Number},isUserUpload:{type:Number},template:{type:Number},detail:{type:Object}},me="_fastBtn_yb4ma_17",ge="_fastImg_yb4ma_25",Se="_fastText_yb4ma_29",we="_strokeColor7_yb4ma_56",be="_closeIcon_yb4ma_67",he="_bigImg_yb4ma_84",w={fastBtn:me,fastImg:ge,fastText:Se,strokeColor7:we,closeIcon:be,bigImg:he},A=ne(F({props:ve,emits:{close:()=>!0},setup(e,{slots:s,emit:n}){const r=L(""),g=()=>{P().refreshFastEntryData()},u=b(()=>S().unix()-S().startOf("day").unix()),d=b(()=>{var i,p,f;return(f=(p=(i=e.detail)==null?void 0:i.timingList)==null?void 0:p.map(c=>{const v=k(c.timing),t=k(c.timing+c.duration);return{startS:N(v),endS:N(t)}}))==null?void 0:f.sort((c,v)=>c.startS-v.startS)});return()=>{var t,a,o;const i=(a=(t=d.value)==null?void 0:t.find(m=>m.startS>u.value))==null?void 0:a.startS;let p=0;(o=d.value)!=null&&o.length&&!i&&(p=24*60*60-u.value+d.value[0].startS);let f=p;i&&(f=i-u.value);const[c,v]=I[e.template||"default"]||I.default;return y("div",{class:[w.fastBtn,e.clientShowImgSize===H.Big?w.bigImg:""]},[r.value==="error"?y(oe,{onRetry:g},null):y(C,{src:e.img,class:w.fastImg,onLoad:m=>r.value=m.type},null),!!e.isShowCountDown&&y(ue,{textFormatType:de.None,duration:f,className:"fastEntryRedPackCountdown"},null),y("span",{class:"".concat(w.fastText," ").concat(w["strokeColor"+e.template]),"data-text":e.ActiveName},[s.text?s.text():e.ActiveName&&y("span",{style:{backgroundImage:"linear-gradient(to bottom, ".concat(c,", ").concat(v,")")}},[e.ActiveName])]),y(C,{class:[w.closeIcon],onClick:m=>{m.stopPropagation(),n("close")},src:"/lobby_asset/common/common/common/comm_icon_gb.png",width:T(40),height:T(40)},null)])}}})),_e="_fastList_vkzyw_17",De="_swiperContainer_vkzyw_28",Le="_swiperSlide_vkzyw_31",D={fastList:_e,swiperContainer:De,swiperSlide:Le};function x(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!W(e)}const ke=F({setup(){const e=P(),{fastEntryList:s,fastEntryHideData:n}=le(e),g=M({slidesPerView:1,speed:500,observer:!0,loop:!0,allowTouchMove:!0,touchMoveStopPropagation:!0,autoplay:!0,spaceBetween:1,modules:[z]}),u=G(null),d=b(()=>{var t;return(t=n.value)==null?void 0:t.list}),i=t=>(!t.endShowTime||t.endShowTime>=new Date().getTime()/1e3)&&!d.value.includes(t.id)&&fe(t.showDeviceType),p=b(()=>{var t;return(t=s.value)==null?void 0:t.reduce((a,o)=>{const m=o.showType;return a[m]=a[m]||[],i(o)&&a[m].push(o),a},{[h.Single]:[],[h.Swiper]:[]})}),f=b(()=>p.value[h.Single].slice(0,c.value.length?2:3).reverse()),c=b(()=>p.value[h.Swiper]),v=t=>{e.addFastEntryHideData(t.id)};return q(()=>R().hasLogined,t=>{t&&e.resetFastEntryHideData(),e.getFastEntryData()}),U(()=>{var t,a;(a=(t=u.value)==null?void 0:t.autoplay)==null||a.stop()}),$(()=>{setTimeout(()=>{var t,a;(a=(t=u.value)==null?void 0:t.autoplay)==null||a.start()},100)}),j(()=>{const{date:t}=n.value;(!t||!S(t).isSame(S(),"day"))&&e.resetFastEntryHideData(),e.getFastEntryData()}),()=>{let t,a;return y("ul",{class:D.fastList},[y("section",null,[y(V,{name:re.WithoutNormalFlow.FlipList},x(t=f.value.map(o=>y(A,_({key:"".concat(o.id)},o,{onClick:()=>{E(o.id,!0)},onClose:()=>{v(o)}}),null)))?t:{default:()=>[t]}),c.value.length>0&&y(K,_(g,{class:D.swiperContainer,onSwiper:o=>{u.value=o}}),x(a=c.value.map(o=>y(Q,{class:D.swiperSlide,key:o.id},{default:()=>[y(A,_({key:o.id},o,{onClick:()=>{E(o.id,!0)},onClose:()=>{v(o)}}),null)]})))?a:{default:()=>[a]})])])}}}),Pe=ke;export{Pe as default};
//# sourceMappingURL=FastEntryIndex.Dsu8KB2q.js.map
