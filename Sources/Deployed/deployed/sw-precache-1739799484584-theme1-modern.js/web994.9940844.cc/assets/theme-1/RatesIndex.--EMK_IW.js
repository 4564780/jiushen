import{a as D,m as M,p as W,cS as C,a6 as G,B as L,v as q,q as A,b as P,bz as p,S,I as $,cQ as m,bq as j,af as w}from"./main.C8q1iJMV.js";import{u as z,s as U}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as F}from"./index.ruW6TaSz.js";import{T as K}from"./index.SS2HDjZq.js";import{K as T}from"../vendors/vendor-lodash.BYdGDldS.js";import{l as Q,r as x,f as c,w as H,p as o,C as Y,n as J,v as X}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"./index.C870Y1OX.js";import"./Table.CBQduS50.js";const Z="_platform_16h26_91",r={"cashback-placeholder":"_cashback-placeholder_16h26_17",platform:Z,"not-found":"_not-found_16h26_97"};function ee(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Y(n)}const[ae]=A("pages-cashback-rates"),ye=Q({name:ae,setup(){const{t:n}=D(),f=z(),v=F(),{isCN:R}=M(),_=P(),{isRatesLoading:N,ratesErr:B,cashbackRates:g,categoryList:i}=U(v),s=x(null),u=x(null),h=c(()=>{var t,a;if(p(s.value)||p(u.value))return[];const e=(a=(t=g.value)==null?void 0:t.ratio)!=null?a:[];return e==null?void 0:e.map((l,d)=>({...l,key:l.validBet+d.toString()}))}),b=c(()=>T(i.value,{categoryId:s.value})),y=c(()=>{var e,t;return T((t=(e=b.value)==null?void 0:e.list)!=null?t:[],{gameSecondCateId:u.value})}),V=c(()=>{var e,t;return N.value?(e=h.value)!=null&&e.length?"nested-loading":"loading":B.value?"retry":(t=i.value)!=null&&t.length?null:"empty"}),k=async()=>{p(s.value)||p(u.value)||v.getCashbackRates({cateId:s.value,platId:u.value})};W(async()=>{var e;(e=i.value)!=null&&e.length||await v.getCashbackSummary(),s.value=Number(f.query[C.GAMECATEGORYID]),u.value=Number(f.query[C.GAMESECONDCATEID]),k()});const E=c(()=>{var e;return(e=i.value)==null?void 0:e.map(t=>{var a;return{label:n("lobby.gameMenu.menu".concat((a=t==null?void 0:t.categoryId)!=null?a:0)),value:t.categoryId}})}),I=c(()=>{var e,t,a;return(a=(t=(e=b.value)==null?void 0:e.list)==null?void 0:t.map(l=>({label:l.gameSecondCate,value:l.gameSecondCateId})))!=null?a:[]});H(s,(e,t)=>{e&&t&&J(()=>{var a;u.value=(a=I.value[0])==null?void 0:a.value})});const O=c(()=>{var t;const e=(t=g.value)==null?void 0:t.returnGoldType;return[{title:()=>o(S,{size:"mini",modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,class:r.rateSelect,autoWidth:!0,minWidth:"1.6rem",fillMode:"neutral_2",round:!0,options:E.value},null),dataIndex:"category",key:"category",align:"center",customRender:()=>{var a,l;return o("span",{class:r.text},[n("lobby.gameMenu.menu".concat((l=(a=b.value)==null?void 0:a.categoryId)!=null?l:0))])}},{title:()=>o(S,{size:"mini",modelValue:u.value,"onUpdate:modelValue":a=>u.value=a,class:r.rateSelect,minWidth:"1.6rem",autoWidth:!0,fillMode:"neutral_2",round:!0,placeholder:n("lobby.cashback.table.selectPlatform"),options:I.value,renderNotFount:()=>o("div",{class:r["not-found"]},[n("lobby.event.luckyWheel.tabs.noData")])},null),dataIndex:"platform",key:"platform",align:"center",customRender:()=>{var a,l,d;return y.value?o("div",{class:r.platform},[o($,{class:r.icon,src:(a=y.value)==null?void 0:a.icon},null),o("span",{class:r.text},[(d=(l=y.value)==null?void 0:l.gameSecondCate)!=null?d:""])]):o("span",null,null)}},{title:e===m.vip?n("lobby.cashback.pageTitle.vipLevel"):n("lobby.cashback.subInfo.totalCodesWash"),dataIndex:e===m.vip?"vip":"validBet",key:e===m.vip?"vip":"validBet",align:"center",customRender:a=>{const l=e===m.vip?"VIP".concat(a):"â‰¥".concat(a,"+");return o("span",null,[l])}},{title:n("lobby.cashback.pageTitle.rates"),dataIndex:"rate",key:"rate",align:"center",customRender:(a,l)=>o(w,{content:l!=null&&l.isPresent?n("lobby.cashback.table.current"):"",position:"top-right",offset:R?[14,-4]:[7,-4]},{default:()=>[o("span",{class:r.current},[j(a),X("%")])]})}]});return()=>o(q,null,{default:()=>[o(G,{class:[r["cashback-placeholder"]],type:V.value,empty:{text:n("lobby.event.luckyWheel.tabs.noData")},onRetry:k},{default:()=>[o(K,{class:r.tableBox,columns:O.value,data:h.value,uniqueKey:"key"},null)]})],header:()=>{let e;return o(L,{onBack:()=>{_.back()}},ee(e=n("lobby.cashback.pageTitle.rates"))?e:{default:()=>[e]})}})}});export{ye as default};
//# sourceMappingURL=RatesIndex.--EMK_IW.js.map
