import{kN as A,kO as p,kP as M,E as S,p as T,e$ as $,_ as D,kQ as E,a as V,I as b,q as j}from"./main.C8q1iJMV.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{t as z,r as d,f as q,w as F,n as Q,l as Y,p as o,F as Z,v as G}from"../vendors/vendor-@vue.DNlpgob2.js";import{d as J}from"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";var H=(l=>(l[l.binded=1]="binded",l[l.noBind=2]="noBind",l[l.unBind=3]="unBind",l))(H||{});function K(l){const a=A(),{noWalletHeight:s,isNoWalletCollapse:r,userNoWalletInfo:L}=z(p()),_=d(),u=d(),m=d(),f=d(),W=d(),v=d(),I="-0.5rem",R=M("0.2rem"),g=d(!0),O=q(()=>a.value===S.MINE),y=n=>{n&&$(n)},w=n=>D(n||"0").toFixed({decimalPlaces:2,tailZero:!0}).toString(),x=async()=>{const[n,c]=await p().getNoWalletBindUrl();!n&&(c!=null&&c.bindUrl)&&y(c.bindUrl)},h=()=>{var n;(n=f.value)!=null&&n.offsetHeight&&(s.value=f.value.offsetHeight)},t=()=>{var n,c,N;if((n=u.value)!=null&&n.offsetWidth&&((c=m.value)!=null&&c.offsetWidth)&&((N=_.value)!=null&&N.offsetWidth)){const k=u.value.offsetWidth+m.value.offsetWidth,B=_.value.offsetWidth-R;k>=B?g.value=!0:g.value=!1,Q(()=>{h()})}},C=()=>{s.value&&(v.value={top:l.needSpecialExpandIconPosition?I:"".concat(s.value/2,"px"),transform:" translateY(-50%)",position:"absolute"})};return F([r,_,u,m,W],()=>{var n;r.value||(((n=L.value)==null?void 0:n.bind)!==H.binded?h():t())},{flush:"post"}),F(r,n=>{switch(n){case!0:C();break;case!1:v.value={};break;default:v.value={};break}}),T(()=>r.value&&C()),{walletHandleRef:_,buyAreaRef:u,scoreRef:m,noWalletRef:f,unBindAreaRef:W,navTopStyle:v,multiLanguageStyle:g,isMinePage:O,toLink:y,formatCurrency:w,goBindNoWallet:x}}const X="_isCollapse_1bvs5_53",ee="_noLogo2_1bvs5_62",oe="_arrowIcon_1bvs5_77",ne="_collapse_1bvs5_82",le="_content_1bvs5_93",te="_prize_1bvs5_104",ae="_label_1bvs5_108",se="_score_1bvs5_120",ce="_lotteryButton_1bvs5_157",ie="_retry_1bvs5_162",re="_loaded_1bvs5_167",ue="_rotate_1bvs5_1",be="_bindButton_1bvs5_185",de="_walletLink_1bvs5_188",_e="_inrContent_1bvs5_192",me="_noLogo1_1bvs5_198",e={"no-wallet-container":"_no-wallet-container_1bvs5_17",isCollapse:X,noLogo2:ee,"expand-icon":"_expand-icon_1bvs5_65",arrowIcon:oe,collapse:ne,"expand-icon-collapse-index":"_expand-icon-collapse-index_1bvs5_87","expand-icon-collapse-mine":"_expand-icon-collapse-mine_1bvs5_90",content:le,prize:te,label:ae,"wallet-handle":"_wallet-handle_1bvs5_112","wallet-handle-multi":"_wallet-handle-multi_1bvs5_116",score:se,"buy-area":"_buy-area_1bvs5_128","number-text":"_number-text_1bvs5_134",lotteryButton:ce,retry:ie,loaded:re,rotate:ue,"un-bind-area":"_un-bind-area_1bvs5_170","bind-area":"_bind-area_1bvs5_174","bind-retry":"_bind-retry_1bvs5_177",bindButton:be,walletLink:de,inrContent:_e,noLogo1:me,"no-logo-un-bind":"_no-logo-un-bind_1bvs5_207","no-logo-bind":"_no-logo-bind_1bvs5_210"},[ve]=j("bind-no-wallet"),pe=Y({name:ve,props:E,setup(l){const{userNoWalletInfo:a,isNoWalletCollapse:s,isFetching:r,isOpenNoWallet:L,isOpenCny:_,isOpenInr:u,isNoWalletConfig:m}=z(p()),{walletHandleRef:f,buyAreaRef:W,scoreRef:v,noWalletRef:I,unBindAreaRef:R,navTopStyle:g,multiLanguageStyle:O,isMinePage:y,toLink:w,formatCurrency:x,goBindNoWallet:h}=K(l),{t}=V(),C=()=>{var k,B,P,U;const n=x((k=a.value)==null?void 0:k.rmbBalance),c=x((B=a.value)==null?void 0:B.score),{bind:N=""}=(P=a.value)!=null?P:{};return N!==H.binded?o("div",{ref:R,class:["bind-no-wallet-content",e.content,u.value?e.inrContent:""]},[o("p",{class:e["un-bind-area"]},[t("lobby.mine.noWallet.bind"),o(b,{class:[e.noLogo1,e["no-logo-un-bind"]],src:"/lobby_asset/common/web/common/comm_icon_NOlogo1.svg"},null),t("lobby.mine.noWallet.tips"),o("span",{class:e.prize},[(U=a.value)==null?void 0:U.maxScoreReward]),t("lobby.mine.noWallet.prize")]),o("div",{class:e["bind-area"]},[o("button",{onClick:J(()=>h(),300),class:e.bindButton},[t("lobby.mine.noWallet.bind")]),o(b,{class:[e["bind-retry"],r.value?e.loaded:""],onClick:()=>p().getUsNoWalletfoData(),src:"/lobby_asset/common/web/common/comm_icon_retry.svg"},null)])]):o("div",{class:["bind-no-wallet-content",e.content,u.value?e.inrContent:""]},[o("div",{class:[e["wallet-handle"],O.value?e["wallet-handle-multi"]:""],ref:f},[o("p",{class:e["buy-area"],ref:W},[o(b,{class:[e.noLogo1,e["no-logo-bind"]],src:"/lobby_asset/common/web/common/comm_icon_NOlogo1.svg"},null),o("span",{class:e.label},[t("lobby.game.nav.wallet")]),o("span",{class:e["number-text"]},[G(" "),n||0]),o(b,{class:[e.retry,r.value?e.loaded:""],onClick:()=>p().getUsNoWalletfoData(),src:"/lobby_asset/common/web/common/comm_icon_retry.svg"},null),o("button",{onClick:()=>{var i;return w((i=a.value)==null?void 0:i.buyUrl)},class:e.bindButton},[t("lobby.mine.noWallet.buy")])]),o("p",{class:e.score,ref:v},[o("span",{class:e.label},[t("lobby.event.bet.item.integral")]),o("span",{class:e["number-text"]},[c||0]),o("button",{onClick:()=>{var i;return w((i=a.value)==null?void 0:i.scoreUrl)},class:e.lotteryButton},[t("lobby.event.cutOnce.lottery")])])]),o(b,{onClick:()=>{var i;return w((i=a.value)==null?void 0:i.homeUrl)},class:e.walletLink,src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])};return()=>!L.value||!m.value?o(Z,null,null):o("div",{ref:I,class:{[e["no-wallet-container"]]:!0,[e.isCollapse]:s.value}},[_.value&&o("button",{style:g.value,class:{[e["expand-icon"]]:!0,[e["expand-icon-collapse-mine"]]:s.value&&y.value,[e["expand-icon-collapse-index"]]:s.value&&!y.value},onClick:p().changeNoWalletExStatus},[o(b,{class:e.noLogo2,src:"/lobby_asset/common/web/common/comm_icon_NOlogo2.svg"},null),o(b,{class:[e.arrowIcon,s.value?e.collapse:""],src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)]),!s.value&&C()])}}),Be=pe;export{Be as default};
//# sourceMappingURL=BindNoWallet.CaYpVRTi.js.map
