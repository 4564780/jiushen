import{D as E}from"../vendors/vendor-default.CjiYZF7Q.js";import{hC as w,bV as S,a as C,hE as v,fM as b,gz as P,Y as O,fI as D,q as h,hG as y,w as I,r as U,cX as i,g5 as A}from"./main.C8q1iJMV.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{l as G,r as N,h as T,p as e,C as F}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";const M="_registerPasswordDialog_o22o5_17",V="_registerPassword_o22o5_17",j="_title_o22o5_23",q="_desc_o22o5_30",H="_submit_o22o5_34",l={registerPasswordDialog:M,registerPassword:V,title:j,desc:q,submit:H};function L(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!F(r)}const[k]=h("pages-dialogs-register-password"),$=G({name:k,setup(){const{visible:r,openOptions:n,closeDialog:m}=w("registerPassword"),{openLoginRegister:f}=S(),{t:c}=C(),t=N(!1),{validate:p,validateField:_}=E(),o=T({userpass:"",confirmUserpass:""});v("CONFIG_CHANGE_SUCCESS",()=>p());const R=async()=>{if((await p()).valid&&!t.value&&n.value){t.value=!0;try{await y().register({...n.value.form,passwd:o.userpass}),I.success({message:c("lobby.modal.forceSetPwd.successTips"),onClose(){var s,a,d,g;m("registerPassword"),(a=(s=n.value)==null?void 0:s.onSuccess)==null||a.call(s),(g=(d=n.value)==null?void 0:d.onRegisterSuccess)==null||g.call(d),t.value=!1}})}catch(s){t.value=!1;const{code:a}=U(s);a===i.CONFIG_CHANGE_PASSWORD_FORMAT_ERR?A("CONFIG_CHANGE_ERR").emit():[i.REGISTER_PASSWORD_FORMAT_ERR,i.REGISTER_USERNAME_FORMAT_ERR,i.REGISTER_USERNAME_EXISTED_ERROR,i.REGISTER_FAILED_ERROR].includes(a)||(f({register:!0,openType:"insert"}),m("registerConfirm"))}}};return()=>{let u;return e(D,{show:r.value,"onUpdate:show":s=>r.value=s,class:l.registerPasswordDialog,showCloseButton:!1,closeOnRouteChange:!1},{default:()=>[e("div",{class:l.registerPassword},[e("h3",{class:l.title},[c("lobby.modal.forceSetPwd.title")]),e(b,{name:"userpass",useConfig:!0,required:!0,modelValue:o.userpass,"onUpdate:modelValue":s=>o.userpass=s,onChange:s=>{s&&o.confirmUserpass&&_("confirmUserpass")}},null),e(P,{required:!0,name:"confirmUserpass",password:o.userpass,modelValue:o.confirmUserpass,"onUpdate:modelValue":s=>o.confirmUserpass=s},null),e("div",{class:l.desc},[c("lobby.modal.forceSetPwd.tips")]),e("div",{class:l.submit},[e(O,{block:!0,type:"primary",loading:t.value,onClick:R},L(u=c("lobby.common.tips.confirm"))?u:{default:()=>[u]})])])]})}}});export{$ as default};
//# sourceMappingURL=RegisterPasswordIndex.BNijJv7x.js.map
