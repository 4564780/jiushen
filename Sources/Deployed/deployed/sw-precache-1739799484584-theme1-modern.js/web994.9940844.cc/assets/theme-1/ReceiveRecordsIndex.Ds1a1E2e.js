import{a as h,co as f,cp as T,az as C,bg as S,bG as w,I as q,B as N,v as D,q as L,b as x,aa as M,bq as k}from"./main.C8q1iJMV.js";import{a as B}from"./index.DffUij__.js";import{D as O,E as V}from"./NoDataViewMore.DgOJ3Ycu.js";import{l as j,r as Y,w as z,f as E,o as G,a as H,p as t,C as U,v as u}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";const A="_receiveRecordsMain_141ah_17",P="_receiveRecordsHeader_141ah_23",F="_receiveRecordsList_141ah_29",J="_listItem_141ah_32",K="_listItemLeft_141ah_40",Q="_itemUserName_141ah_45",W="_itemTime_141ah_50",X="_listItemRight_141ah_57",Z="_button_141ah_60",$="_icon_141ah_63",ee="_colorYellow_141ah_75",te="_colorGreen_141ah_79",ae="_colorRed_141ah_83",se="_colorPrimary_141ah_87",oe="_requestModal_141ah_91",re="_modalContent_141ah_91",le="_itemTitle_141ah_97",ce="_questionItem_141ah_101",ie="_reply_141ah_104",ne="_replyContent_141ah_104",me="_rateSelect_141ah_112",de="_rateSelectItemsBox_141ah_116",a={receiveRecordsMain:A,receiveRecordsHeader:P,receiveRecordsList:F,listItem:J,listItemLeft:K,itemUserName:Q,itemTime:W,listItemRight:X,button:Z,icon:$,colorYellow:ee,colorGreen:te,colorRed:ae,colorPrimary:se,requestModal:oe,modalContent:re,itemTitle:le,questionItem:ce,reply:ie,replyContent:ne,rateSelect:me,rateSelectItemsBox:de};function ue(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!U(s)}const[_e]=L("pages-receive-records"),we=j({name:_e,setup(){const{t:s}=h(),b=x(),l=Y(f.TODAY),o=T(B,{immediate:!1,transformFn:e=>({data:(e==null?void 0:e.record)||[],total:e.total}),alias:{page:"page",pageSize:"size"},defaultPageSize:15});z(l,e=>{o.payload.value={...o.payload.value,timeDay:e},c(!0)});const R=E(()=>{const{t:e}=h();return[{class:a.colorYellow,value:e("lobby.records.underReview")},{class:a.colorGreen,value:e("lobby.records.passed")},{class:a.colorRed,value:e("lobby.records.rejected")}]}),I=e=>{var p;const{questions:i,request_remark:r,frontRemark:m,amount:_}=e||{};let v=[],d=[];try{v=r?(p=JSON.parse(r))==null?void 0:p.answers:[],d=i?JSON.parse(i):[]}catch(n){console.warn("err",n)}M.showDialog({title:()=>s("lobby.records.info"),className:a.requestModal,message:()=>t("div",{class:a.modalContent},[t("div",{class:a.questions},[d==null?void 0:d.map(n=>{var y;return t("div",{class:a.questionItem,key:n.id},[t("span",{class:a.itemTitle},[n.question,u(":")])," ",(y=v.find(g=>g.id===n.id))==null?void 0:y.answer])}),t("div",{class:a.questionItem},[t("span",{class:a.itemTitle},[s("lobby.records.rewardAmount2"),u(":")])," ",_?k(_):"--"])]),t("div",{class:a.reply},[t("div",{class:a.itemTitle},[s("lobby.records.administratorReply"),u(":")]),t("div",{class:a.replyContent},[m||s("lobby.records.noReply")])])]),showCloseButton:!0,showConfirmButton:!1})};G(async()=>{o.payload.value={timeDay:f.TODAY},c()}),H(()=>{c(!0)});const c=async(e=!1)=>{C().hasLogined&&o.loadData(e)};return()=>t(D,null,{default:()=>[t("div",{class:a.receiveRecordsMain},[t("div",{class:a.receiveRecordsHeader},[t(O,{onValueChange:e=>{l.value=e},selectedValue:l.value,zIndex:0,class:a.rateSelect},null)]),t(S,{class:a.receiveRecordsList,finished:o.finished.value,error:!!o.listError.value,loading:o.loading.value,onLoad:c,onRetry:c,emptyText:t(V,{selectValue:l.value,onMoreClick:e=>{l.value=e}},null)},{default:()=>{var e,i;return[(i=(e=o.list)==null?void 0:e.value)==null?void 0:i.map(r=>{const m=R.value[Number(r.checkstatus)];return t("div",{class:a.listItem},[t("div",{class:a.listItemLeft},[t("div",{class:a.itemUserName},[t("div",null,[r.activeName])]),t("div",{class:a.itemTime},[t("span",null,[w(r.createtime)])])]),t("div",{class:a.listItemRight,onClick:()=>I(r)},[t("div",{class:[a.button,m.class]},[m.value]),t(q,{class:a.icon,src:"/lobby_asset/common/web/common/img_scroll_jt.svg"},null)])])})]}})])],header:()=>{let e;return t(N,{onBack:()=>{b.back()}},ue(e=s("lobby.records.receiveRecords"))?e:{default:()=>[e]})}})}});export{we as default};
//# sourceMappingURL=ReceiveRecordsIndex.Ds1a1E2e.js.map
