import{a as Y,gV as j,gc as G,az as J,q as K,B as Q,v as Z,dL as $,t as C,cr as L,O as U,fM as ee,Y as S,w as g,gW as le,gX as oe,I as ne,b as te}from"./main.C8q1iJMV.js";import{s as k,o as ae}from"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{l as re,r as p,o as se,p as e,F,v as O,C as ue}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const de="_defaultBox_3db6q_17",ie="_infoBox_3db6q_27",ce="_userInfo_3db6q_42",be="_ruleBox_3db6q_57",fe="_label_3db6q_77",ve="_select_3db6q_83",me="_selectOption_3db6q_90",pe="_optionIcon_3db6q_97",_e="_optionSelected_3db6q_101",ye="_optionUser_3db6q_110",Se="_info_3db6q_27",ge="_footer_3db6q_134",xe="_cancel_3db6q_155",Be="_banned_3db6q_161",t={defaultBox:de,infoBox:ie,userInfo:ce,ruleBox:be,label:fe,select:ve,"base-select-dropdown":"_base-select-dropdown_3db6q_87",selectOption:me,optionIcon:pe,optionSelected:_e,optionUser:ye,info:Se,footer:ge,cancel:xe,banned:Be};function _(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!ue(l)}const[we]=K("forbiddenSelf"),Pe=re({name:we,setup(){const{t:l}=Y(),f=j(),{logout:P}=G(),i=p({status:[],password:"",duration:""}),s=p(),c=p(),b=p(""),u=p(!1),R=J(),{userInfos:d}=k(R),N=te(),{selfRestraintInfo:x,restrict:B,selfRestraintInfoStatusList:T}=k(f),w=()=>{i.value={},s.value="",c.value="",b.value=""},I=()=>{var n,o;u.value||(o=(n=i.value)==null?void 0:n.status)!=null&&o.length?(u.value=!1,w()):N.back()},E=[{value:"3m",label:l("lobby.center.forbiddenSelf.month",{num:3})},{value:"4m",label:l("lobby.center.forbiddenSelf.month",{num:4})},{value:"5m",label:l("lobby.center.forbiddenSelf.month",{num:5})},{value:"6m",label:l("lobby.center.forbiddenSelf.month",{num:6})},{value:"1y",label:l("lobby.center.forbiddenSelf.year",{num:1})},{value:"2y",label:l("lobby.center.forbiddenSelf.year",{num:2})},{value:"3y",label:l("lobby.center.forbiddenSelf.year",{num:3})},{value:"5y",label:l("lobby.center.forbiddenSelf.year",{num:5})}],D=async()=>{await z(),i.value.status=[s.value],i.value.duration=c.value,i.value.password=b.value;try{await f.updateRestrict(i.value),s.value===3?await P("manual"):I()}finally{console.info("")}},M=()=>{u.value=!0},z=async()=>new Promise((n,o)=>{if(!s.value)return g({type:"warn",message:l("lobby.center.forbiddenSelf.selectStatus")}),o();if(!c.value)return g({type:"warn",message:l("lobby.center.forbiddenSelf.selectDuration")}),o();if(b.value==="")return g({type:"warn",message:l("lobby.center.forbiddenSelf.inputConfirmPwd")}),o();if(le(b.value,oe.Simple))return o();n(!0)}),H=()=>e("div",{class:t.banned},[e(ne,{src:"/lobby_asset/common/web/common/comm_icon_tip2.png"},null),f.getBannedStr()]),A=()=>{var n,o,a,v,m;return e("div",{class:t.defaultBox},[e("div",{class:t.infoBox},[e($,{canToLink:!1},null),e("div",{class:t.userInfo},[e("p",null,[e("span",null,[O("ID:")]),(n=d.value)==null?void 0:n.username]),e("p",null,[e("span",null,[l("lobby.center.forbiddenSelf.userAccount"),O(":")]),(o=d.value)==null?void 0:o.platfromid])])]),e("div",{class:t.ruleBox},[e("b",null,[l("lobby.center.forbiddenSelf.rule")]),e("div",null,[e(C,{html:(a=x.value)==null?void 0:a.ruleText},null)])]),(m=(v=B.value)==null?void 0:v.status)!=null&&m.length?H():null])},W=()=>{var a,v,m,h,q,V;let n,o;return e("div",{class:t.defaultBox},[e("div",{class:t.ruleBox},[e("b",null,[l("lobby.center.forbiddenSelf.confirm")]),e("div",null,[e(C,{html:(a=x.value)==null?void 0:a.secondConfirmText},null)])]),e("div",{class:t.label},[l("lobby.center.forbiddenSelf.selfStint")]),e(L,{modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,offset:[0,0],size:"large",fillMode:s.value?"lead":"neutral_2",placeholder:l("lobby.center.forbiddenSelf.selectStatus")},_(n=T.value.map((r,y)=>e(U,{value:Number(r.value),key:y,label:r.label},{default:()=>[r.label]})))?n:{default:()=>[n]}),e("div",{class:t.label},[l("lobby.center.forbiddenSelf.duration")]),e(L,{modelValue:c.value,"onUpdate:modelValue":r=>c.value=r,offset:[0,0],size:"large",fillMode:c.value?"lead":"neutral_2",placeholder:l("lobby.center.forbiddenSelf.selectDuration")},_(o=E.map((r,y)=>e(U,{value:r.value,key:y,label:r.label},{default:()=>[r.label]})))?o:{default:()=>[o]}),e("div",{class:t.optionUser},[e("div",{class:t.label},[l("lobby.center.forbiddenSelf.optionUser")]),e("div",{class:t.info},[e("p",null,[e("span",null,[l("lobby.center.forbiddenSelf.user")]),(v=d.value)==null?void 0:v.platfromid]),((m=d.value)==null?void 0:m.mobile_phone)&&e("p",null,[e("span",null,[l("lobby.center.forbiddenSelf.phone")]),(h=d.value)==null?void 0:h.mobile_phone]),((q=d.value)==null?void 0:q.email)&&e("p",null,[e("span",null,[l("lobby.center.forbiddenSelf.email")]),(V=d.value)==null?void 0:V.email])])]),e("div",{class:t.label},[l("lobby.center.forbiddenSelf.confirmPwd")]),e(ee,{required:!0,name:"userpass",modelValue:b.value,"onUpdate:modelValue":r=>b.value=r,placeholder:l("lobby.center.forbiddenSelf.inputConfirmPwd")},null)])},X=()=>{let n,o,a;return e("div",{class:t.footer},[u.value?[e(S,{class:t.cancel,onClick:()=>I()},_(n=l("lobby.center.forbiddenSelf.cancle"))?n:{default:()=>[n]}),e(S,{onClick:()=>D()},_(o=l("lobby.center.forbiddenSelf.confirmBan"))?o:{default:()=>[o]})]:e(S,{onClick:()=>M()},_(a=l("lobby.center.forbiddenSelf.title"))?a:{default:()=>[a]})])};return se(()=>{f.getSelfRestraintInfo(),f.getRestrict()}),ae((n,o,a)=>{u.value?(u.value=!1,w(),a(!1)):a()}),()=>e(Z,null,{header:()=>e(Q,null,{default:()=>e(F,null,[l("lobby.center.forbiddenSelf.title")])}),default:()=>{var n,o;return e(F,null,[u.value?W():A(),(o=(n=B.value)==null?void 0:n.status)!=null&&o.length?null:X()])}})}});export{Pe as default};
//# sourceMappingURL=ForbiddenSelfIndex.CGV7LcSX.js.map
