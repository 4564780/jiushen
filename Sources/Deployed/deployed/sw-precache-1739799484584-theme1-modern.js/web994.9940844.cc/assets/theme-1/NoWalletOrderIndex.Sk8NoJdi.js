import{kG as m,a as k,kH as t,kI as S,kJ as N,_ as I,a4 as K,I as W,ab as Y,Y as Q,a3 as X,q as z,kK as Z,kL as ee,w as V,aa as B,dM as oe,bG as ne,kM as ae,e$ as L,aS as te,b0 as le,bg as se,hC as re,cs as ce}from"./main.C8q1iJMV.js";import{b as U}from"../vendors/vendor-stable.LD58Pbb3.js";import{C as ie,e as G}from"../vendors/vendor-default.CjiYZF7Q.js";import{l as R,r as j,h as de,p as e,C as H,f as J,v as A}from"../vendors/vendor-@vue.DNlpgob2.js";import{d as me}from"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const ue=n=>{const{t:o}=k();return{[t.PendingReview]:o("lobby.modal.noWalletOrder.pendingReview"),[t.PendingConfirmation]:o("lobby.modal.noWalletOrder.pendingConfirmation"),[t.PendingPayment]:o("lobby.modal.noWalletOrder.pendingPayment"),[t.PaymentDelayed]:o("lobby.modal.noWalletOrder.paymentDelayed"),[t.PendingRelease]:o("lobby.modal.noWalletOrder.pendingRelease"),[t.ReleaseDelayed]:o("lobby.modal.noWalletOrder.releaseDelayed"),[t.Complaint]:o("lobby.modal.noWalletOrder.complaint"),[t.RightsProtection]:o("lobby.modal.noWalletOrder.rightsProtection"),[t.TransactionSuccess]:o("lobby.modal.noWalletOrder.transactionSuccess"),[t.TransactionFailed]:o("lobby.modal.noWalletOrder.reviewTimeout"),[t.ReviewTimeout]:o("lobby.modal.noWalletOrder.reviewTimeout"),[t.Canceled]:o("lobby.modal.noWalletOrder.canceled")}[n]},E=(n,o)=>{const{t:l}=k();if(n===S.Recharge)return l("lobby.modal.noWalletOrder.continuePayment");if(n===S.Purchase)switch(o){case t.PendingPayment:return l("lobby.modal.noWalletOrder.transferCompleted");case t.ReviewTimeout:return l("lobby.modal.noWalletOrder.handlingException");case t.Complaint:return l("lobby.modal.noWalletOrder.handlingComplaint");case t.RightsProtection:return l("lobby.modal.noWalletOrder.handlingRightsProtection");case t.TransactionFailed:return l("lobby.modal.noWalletOrder.handlingException");default:return""}if(n===S.Sale)switch(o){case t.PendingConfirmation:return l("lobby.modal.noWalletOrder.confirmSale");case t.PendingRelease:return l("lobby.modal.noWalletOrder.releaseOnArrival");case t.ReviewTimeout:return l("lobby.modal.noWalletOrder.handlingException");case t.Complaint:return l("lobby.modal.noWalletOrder.handlingComplaint");case t.RightsProtection:return l("lobby.modal.noWalletOrder.handlingRightsProtection");case t.TransactionFailed:return l("lobby.modal.noWalletOrder.handlingException");default:return""}},q={[m.BankCard]:"/lobby_asset/common/common/wallet/zhifu_icon_yinlian.png",[m.Alipay]:"/lobby_asset/common/common/wallet/zhifu_icon_zhifubaozhuanzhang.png.png",[m.WeChat]:"/lobby_asset/common/common/wallet/zhifu_icon_wexinzhuanzhang.png",[m.AlipayQRCode]:"/lobby_asset/common/common/wallet/zhifu_icon_zhifubaosaoma.png",[m.WeChatQRCode]:"/lobby_asset/common/common/wallet/zhifu_icon_wexinsaoma.png",[m.GameWalletBalance]:"/lobby_asset/common/common/wallet/zhifu_icon_youxiqianbaoyue.png",[m.QQAccount]:"/lobby_asset/common/common/wallet/zhifu_icon_qqzhuanzhang.png",[m.QQQRCode]:"/lobby_asset/common/common/wallet/zhifu_icon_qqsaoma.png",[m.DigitalRMB]:"/lobby_asset/common/common/wallet/zhifu_icon_shuzirenminbi.png",[m.TransferBalance]:"/lobby_asset/common/common/wallet/zhifu_icon_banzhuan.png",[m.USDTBalance]:"/lobby_asset/common/common/wallet/zhifu_icon_usdt.png",[m.ScanPayment]:"/lobby_asset/common/common/wallet/zhifu_icon_saomazhifu.png",[m.BalancePayment]:"/lobby_asset/common/common/wallet/zhifu_icon_yuezhifu.png"},be="_form_nnx05_17",_e="_info_nnx05_24",ye="_amount_nnx05_29",pe="_value_nnx05_44",ge="_mt20_nnx05_48",he="_label_nnx05_54",fe="_text_nnx05_60",we="_icon_nnx05_70",ve="_show_nnx05_76",Oe="_hidden_nnx05_79",xe="_remark_nnx05_82",Pe="_active_nnx05_90",We="_button_nnx05_95",i={form:be,info:_e,amount:ye,value:pe,mt20:ge,"item-password":"_item-password_nnx05_51",label:he,text:fe,"no-icon":"_no-icon_nnx05_66",icon:we,show:ve,hidden:Oe,remark:xe,active:Pe,button:We};function Ce(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!H(n)}const[Se]=z("pages-dialogs-no-wallet-password-dialog"),ze=R({name:Se,props:{instance:{type:Object,default:null},order:Object},setup(n){const{t:o}=k(),l=j(!0),a=de({password:""}),c=j(),f=j(!1),s=N(),_=async()=>{var d,w,v,O;if(!s.bubbleInfo||!n.order)return;f.value=!0;const{merchantMemberNo:b,depositAppId:y,merchCode:p}=s.bubbleInfo,g={merchantMemberNo:b,depositAppId:y,merchCode:p,merchantOrderNo:(d=n.order)==null?void 0:d.orderNo,password:ie.SHA256(a.password).toString()},u={[t.PendingPayment]:Z,[t.PendingRelease]:ee},[h]=await G((v=u[(w=n.order)==null?void 0:w.state])==null?void 0:v.call(u,g));f.value=!1,!h&&(s.initPayload(),V.success({message:((O=n.order)==null?void 0:O.state)===t.PendingPayment?o("lobby.modal.noWalletOrder.rechargeSuccess"):o("lobby.modal.noWalletOrder.transactionSuccess")}),B.closeDialog(n.instance),s.listObj.reset())},x=()=>{l.value=!l.value};return()=>{let b;return e(X,{ref:c,model:a,layout:"horizontal",onSubmit:_,class:i.form},{default:()=>{var y,p,g,u,h,d,w,v,O;return[e("div",{class:i.info},[((y=n.order)==null?void 0:y.state)===t.PendingPayment&&e("p",{class:i.amount},[I((g=(p=n.order)==null?void 0:p.amount)!=null?g:0,{sign:"auto",toFixedType:"currency"}).toString()]),((u=n.order)==null?void 0:u.state)===t.PendingRelease&&e("div",null,[e("span",null,[o("lobby.modal.noWalletOrder.arrivalAmount")]),e("span",{class:i.value},[I((d=(h=n.order)==null?void 0:h.amount)!=null?d:0,{sign:!1,toFixedType:"currency"}).toString()])]),((w=n.order)==null?void 0:w.state)===t.PendingRelease&&e("div",{class:i.mt20},[e("span",null,[o("lobby.modal.noWalletOrder.payerName")]),e("span",{class:i.value},[(v=n.order)==null?void 0:v.name])]),((O=n.order)==null?void 0:O.state)===t.PendingPayment&&e("div",null,[e("span",null,[o("lobby.modal.noWalletOrder.paymentMethod")]),e("span",{class:i.value},[o("lobby.modal.pay.gameWalletBalance")])])]),e(K,{name:"password",label:"",required:!0,validateTrigger:["onBlur"],rules:[P=>P?!0:o("lobby.modal.pay.passwordNotEmpty")]},{default:()=>[e("div",{class:i["item-password"]},[e("div",{class:i.label},[e("div",{class:i.text},[e(W,{class:i["no-icon"],src:"/lobby_asset/common/common/deposit/icon_cz_no.png"},null),e("span",null,[o("lobby.modal.noWalletOrder.label")])]),e("span",{class:i.icon,onClick:x},[e(W,{src:l.value?"/lobby_asset/common/web/common/comm_icon_hide.svg":"/lobby_asset/common/web/common/comm_icon_show.svg",class:l.value?i.hidden:i.show},null)])]),e(Y,{length:"6",modelValue:a.password,"onUpdate:modelValue":P=>a.password=P,mask:l.value,onComplete:()=>c.value.validate()},null)])]}),e(Q,{class:i.button,loading:f.value,nativeType:"submit"},Ce(b=o("lobby.modal.passModal.ok"))?b:{default:()=>[b]})]}})}}}),Re="_title_1wchx_31",Te="_copy_1wchx_60",ke="_status_1wchx_47",Ne="_icon_1wchx_67",je="_content_1wchx_73",Ie="_money_1wchx_78",Be="_name_1wchx_94",De="_date_1wchx_99",r={"no-wallet-password-dialog":"_no-wallet-password-dialog_1wchx_17","order-type":"_order-type_1wchx_24",title:Re,"order-item":"_order-item_1wchx_38","status-box":"_status-box_1wchx_47",copy:Te,status:ke,icon:Ne,content:je,money:Ie,name:Be,date:De};function Fe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!H(n)}const[Me]=z("pages-dialogs-no-wallet-order-item"),$e=R({name:Me,props:{order:Object},setup(n){const{t:o}=k(),l=N(),a=J(()=>n.order),c=async()=>{if(!l.bubbleInfo||!a.value)return;const{state:s,orderType:_,orderNo:x,url:b,isScan:y}=a.value,{merchantMemberNo:p,depositAppId:g,merchCode:u}=l.bubbleInfo,h={merchantMemberNo:p,depositAppId:g,merchCode:u,merchantOrderNo:x};if(_===S.Sale&&s===t.PendingConfirmation){const[d]=await G(ae(h));if(d)return;V.success({message:o("lobby.modal.noWalletOrder.purchaseSuccess")}),l.initPayload(),l.listObj.reset();return}if(s===t.PendingRelease||_===S.Recharge&&s===t.PendingPayment&&!y){const d=B.showDialog({className:r["no-wallet-password-dialog"],title:()=>e("span",null,[s===t.PendingRelease?o("lobby.modal.noWalletOrder.confirmRelease"):o("lobby.modal.noWalletOrder.confirmPayment")]),message:()=>e(ze,{instance:d==null?void 0:d.instance,order:a.value},null),showConfirmButton:!1,showCloseButton:!0});return}f(b)},f=s=>{s&&L(s)};return()=>{var _,x,b,y,p,g,u,h,d,w,v,O,P,D,F,M,$;let s;return e("div",{class:r["order-item"],onClick:()=>{var T;f((T=a.value)==null?void 0:T.url)}},[e("div",{class:r["status-box"]},[e("div",null,[e("span",null,[(_=a.value)==null?void 0:_.orderNo]),e(oe,{class:r.copy,text:String((x=a.value)==null?void 0:x.orderNo)},null)]),e("div",{class:r.status},[e("span",null,[!!a.value&&ue((b=a.value)==null?void 0:b.state)]),e(W,{src:"/lobby_asset/common/web/common/comm_icon_fh.svg",class:r.icon},null)])]),e("div",{class:r.content},[e("div",{class:r.left},[e("div",{class:r.money},[!!q[(p=(y=a.value)==null?void 0:y.payType)!=null?p:""]&&e(W,{src:q[(u=(g=a.value)==null?void 0:g.payType)!=null?u:""],class:r.icon},null),e("span",null,[I((d=(h=a.value)==null?void 0:h.amount)!=null?d:0,{toFixedType:"currency"}).toString()]),!!((w=a.value)!=null&&w.name)&&e("span",{class:r.name},[A("（"),(v=a.value)==null?void 0:v.name,A("）")])]),e("p",{class:r.date},[!!((O=a.value)!=null&&O.createdAt)&&ne((P=a.value)==null?void 0:P.createdAt)])]),a.value&&E((D=a.value)==null?void 0:D.orderType,(F=a.value)==null?void 0:F.state)?e(Q,{type:"primary",size:"small",onClick:T=>{T.stopPropagation(),c()}},Fe(s=E((M=a.value)==null?void 0:M.orderType,($=a.value)==null?void 0:$.state))?s:{default:()=>[s]}):null])])}}}),[Ae]=z("pages-dialogs-no-wallet-order-type"),Ee=R({name:Ae,props:{title:te(""),orders:le([])},setup(n){return()=>{var o;return e("div",{class:r["order-type"]},[e("div",{class:r.title},[n==null?void 0:n.title]),(o=n.orders)==null?void 0:o.map(l=>e($e,{class:r["order-item"],order:l},null))])}}}),[qe]=z("pages-dialogs-no-wallet-order-list"),Qe=R({name:qe,setup(){const{t:n}=U(),o=N(),l=J(()=>{const a=[{name:n("lobby.modal.noWalletOrder.recharge"),list:[]},{name:n("lobby.modal.noWalletOrder.purchase"),list:[]},{name:n("lobby.modal.noWalletOrder.sale"),list:[]}];return o.listObj.list.forEach(c=>{switch(c.orderType){case 1:a[0].list.push(c);break;case 2:a[1].list.push(c);break;case 3:a[2].list.push(c);break}}),a.filter(c=>c.list.length>0)});return()=>e("div",{class:r["order-list"]},[e(se,{finished:o.listObj.finished,error:!!o.listObj.listError,loading:o.listObj.loading,class:r.recordMain,onLoad:o.listObj.loadData,onRetry:o.listObj.reset},{default:()=>{var a;return[(a=l.value)==null?void 0:a.map(c=>e(Ee,{title:c.name,orders:c.list},null))]}})])}}),C={"wallet-order":"_wallet-order_1m31d_17","wallet-order-title":"_wallet-order-title_1m31d_30","no-icon":"_no-icon_1m31d_34","record-icon":"_record-icon_1m31d_38"},[Ve]=z("pages-dialogs-no-wallet-order"),oo=R({name:Ve,setup(){const{t:n}=U(),o=N(),{onDialogOpen:l,visible:a}=re("noWalletOrder"),c=me(()=>{o.initPayload(),o.listObj.reset()},1e3,{leading:!0,trailing:!1});l(()=>{c()});const f=()=>{L(o.url)},s=()=>e("div",{class:C["wallet-order-title"]},[e(W,{class:C["no-icon"],src:"/lobby_asset/common/common/deposit/icon_cz_no.png"},null),e("span",null,[n("lobby.modal.noWalletOrder.title")]),e(W,{class:C["record-icon"],useSkeleton:!0,src:"/lobby_asset/common/web/deposit/comm_icon_cz_jl.svg",onClick:f},null)]);return()=>e(B,{show:a.value,"onUpdate:show":_=>a.value=_,class:C["wallet-order"],closeControl:{shouldOccupySpace:!0},title:s},{default:()=>[e(ce,{class:C.scrollBox},{default:()=>[e(Qe,null,null)]})]})}});export{oo as default};
//# sourceMappingURL=NoWalletOrderIndex.Sk8NoJdi.js.map
