import{bt as k,bu as T,R as z,bv as A,q as C,a as M,E as m,bw as y,p as w,a6 as U,bx as V,as as q,Y as B,v as D,by as j,bz as P,bA as F,bB as W,b as $}from"./main.C8q1iJMV.js";import{s as I,u as H}from"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{L as Y}from"./ListItemIndex.CC07h5PG.js";import{l as S,f as g,p as r,r as Z,o as _,a as G,C as J,n as K}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"./index.JiQV5KHQ.js";import"./LazyLoader.cfovhYZu.js";const Q={"hide-time-list-item":"_hide-time-list-item_5y6g8_17"},[X]=C("pages-event-list"),ee=S({name:X,props:{eventList:{type:Array,default:()=>[]}},setup(n){const d=k(),l=g(()=>d.value),u=T(),{curTab:o}=I(u);return z({scroller:l}),()=>{var s;return r("div",null,[(s=n.eventList)==null?void 0:s.map(i=>r(Y,{curTab:o.value,key:i.activeId,class:{[Q["hide-time-list-item"]]:i.isShowTime===A.Hide},eventItem:i},null))])}}}),v={"event-placeholder":"_event-placeholder_99fzr_17","event-tabs":"_event-tabs_99fzr_21","event-tabs-title":"_event-tabs-title_99fzr_27","event-list":"_event-list_99fzr_40","event-extra-button":"_event-extra-button_99fzr_45"};function te(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!J(n)}const[ae]=C("pages-event-index"),me=S({name:ae,setup(){const{t:n}=M(),d=$(),l=H(),u=Z(),o=T(),{curTab:s,isListLoading:i,listErr:N,filterCategories:c,activeEventsList:p}=I(o);_(()=>{var t,e,a;l.name===m.EVENT&&(isNaN((e=Number((t=l.query)==null?void 0:t.eventCurrent))!=null?e:0)||o.setCurTab(Number((a=l.query)==null?void 0:a.eventCurrent)))}),G(()=>{o.curTab&&h(o.curTab,!1)});const h=(t,e=!0)=>{K(()=>{var a,b;d.replace({name:m.EVENT,query:{eventCurrent:t}}),u.value&&e&&j((b=(a=u.value)==null?void 0:a.scroller)==null?void 0:b.value,{y:0})})},R=g(()=>{var t,e,a;if(i.value){if(!((t=p.value)!=null&&t.length))return"loading"}else{if(N.value&&!((e=p.value)!=null&&e.length))return"retry";if(!((a=c.value)!=null&&a.length))return"empty"}return null});_(async()=>{y.doReport({rule:y.rules.CUSTOM_BURIED,eventName:y.buriedEvents.EnterEventCenter})});const E=async()=>{var t,e;await o.getEventCategoriesAndEvents(),c.value.length&&P(s.value)&&(s.value=(e=(t=c.value)==null?void 0:t[0])==null?void 0:e.categoryId)},x=()=>{d.push({name:m.RECORDS})};w(async()=>{E()});const L=g(()=>{var t;return(t=c.value)==null?void 0:t.map(e=>{var a;return{label:e.name,value:e.categoryId,badge:(a=e.activeCount)!=null?a:0,icon:(b,O)=>{if(e.categoryType===F.CUSTOMIZE){const f=O?e.checkedIcon:e.unCheckedIcon;return f!=null?f:""}return W[e==null?void 0:e.categoryId].normal}}})});return()=>r(D,{useScroll:!1},{default:()=>[r(U,{class:[v["event-placeholder"]],type:R.value,empty:{text:n("lobby.event.luckyWheel.tabs.noData")},onRetry:E},{default:()=>[r(V,{active:s.value,"onUpdate:active":t=>s.value=t,onChange:h,tabsList:L.value,tabVShowMode:!1,contentScrollable:!0,transition:q.WithoutNormalFlow.Fade,contentScrollProps:{bindRoute:!0,scrollbarTrigger:"none"},class:v["event-tabs"],titleNavClass:v["event-tabs-title"]},{default:()=>[r(ee,{key:String(s.value),ref:u,class:v["event-list"],eventList:p.value},null)],"nav-extra":()=>{var e;let t;return(e=c.value)!=null&&e.length?r("div",{class:v["event-extra-button"]},[r(B,{size:"small",onClick:x},te(t=n("lobby.game.nav.receiveRecord"))?t:{default:()=>[t]})]):null}})]})]})}});export{me as default};
//# sourceMappingURL=EventIndex.Dkg3Lp1A.js.map
