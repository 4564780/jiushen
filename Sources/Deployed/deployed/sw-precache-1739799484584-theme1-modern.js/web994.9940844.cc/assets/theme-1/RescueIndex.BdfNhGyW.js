import{a as g,ly as f,bQ as o,eI as I,iX as z,Z as B,bq as T,cm as F,a6 as q,q as L,lz as X,lA as $,bX as V,bL as W,ca as m,w as Y,lB as _}from"./main.C8q1iJMV.js";import{a as G,E as K}from"./props.DdPRoj_x.js";import{u as b}from"./index.BB5bZn2v.js";import{f as v,l as Q,r as Z,p as n,C as H}from"../vendors/vendor-@vue.DNlpgob2.js";import{B as J}from"./BottomReceiveIndex.D3vCadgd.js";import{P as U}from"./PublicIntroductionIndex.bUl03y0X.js";import{T as ee}from"./index.SS2HDjZq.js";import{a as te}from"./activeReceiveOne.CY32GsDi.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"./Table.CBQduS50.js";const ae=v(()=>{const{cycleType:e}=b().eventItemData||{},{t:a}=g();let t="";switch(e){case f.Weekly:t=a("lobby.event.rescue.yestodayData1");break;case f.Monthly:t=a("lobby.event.rescue.yestodayData2");break;default:t=a("lobby.event.rescue.yesterdayData");break}return t}),ne=v(()=>{const{cycleType:e}=b().eventItemData||{},{t:a}=g();let t="";switch(e){case f.Weekly:t=a("lobby.event.rescue.todayData1");break;case f.Monthly:t=a("lobby.event.rescue.todayData2");break;default:t=a("lobby.event.rescue.todayData");break}return t}),N=e=>{var t;let a=e===o.CanReceive||e===o.PendingCheck;return((t=b().eventItemData)==null?void 0:t.giveType)===I.ManualDistribution&&(e===o.PendingCheck||e===o.PendingApply)&&(a=e===o.PendingApply),a},se=e=>{var i;const{t:a}=g();let t=z(e);return((i=b().eventItemData)==null?void 0:i.giveType)===I.ManualDistribution&&(e===o.PendingCheck||e===o.PendingApply)&&(t=N(e)?a("lobby.modal.task.applyAll"):a("lobby.modal.task.applied")),[o.Processing,o.CanReceive].includes(e)&&(t=a("lobby.modal.task.collectAll")),t},re="_eventRescue_4taku_17",oe={eventRescue:re};function le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!H(e)}const[ce]=L("event-item-modes-rescue"),we=Q({name:ce,props:{...G,eventId:Number},emits:["marginTypeChange"],setup(e,{emit:a}){const{t}=g(),i=Z(!1),p=b(),S=v(()=>p.isItemLoading?"nested-loading":p.itemErr?"retry":null);a("marginTypeChange",K.BOTTOM_BTN);const d=async()=>{e.eventId&&p.refreshEventItemDetail(e.eventId)},O=v(()=>{var u;const s=((u=r.value)==null?void 0:u.rewardType)===X.FIXED,y=s?t("lobby.event.rescue.columns.reward.labelNoPercent"):t("lobby.event.rescue.columns.reward.label",{unit:"%"});return[{title:t("lobby.event.rescue.columns.amount.label"),dataIndex:"amount",key:"amount",customRender:c=>n("span",{class:"amount"},["â‰¥".concat(T(c,0))])},{title:y,dataIndex:"reward",key:"reward",customRender:c=>n("span",{class:"yellow"},["".concat(T(c)).concat(s?"":"%")])}]}),l=v(()=>p.eventItemData),r=v(()=>l.value.activeData),D=v(()=>{var s;return(s=r.value)==null?void 0:s.receiveStatus}),j=async()=>{var c,R,k,h,E,w,C,x,P,A,M;if(!l.value.id)return;const s=$(r.value);if((c=r.value)!=null&&c.receiveDuration&&s){V({message:s});return}const y={receiveDeviceType:(R=l.value)==null?void 0:R.receiveDeviceType,receiveStatus:(k=r.value)==null?void 0:k.receiveStatus,receiveCategory:(h=r.value)==null?void 0:h.logCategory,amount:(E=r.value)==null?void 0:E.prize,taskCondition:(w=l.value)==null?void 0:w.taskCondition};if(await W.check({eventData:y,checkOptions:{[m.forbidReceive]:!0,[m.receiveType]:!0,[m.task]:!0,[m.largeAmount]:!0,[m.pendingCheck]:!0}})||i.value)return;i.value=!0;const u=((C=l.value)==null?void 0:C.giveType)===I.ManualDistribution&&D.value===o.PendingApply;te({params:{receiveId:(P=(x=r.value)==null?void 0:x.receiveId)==null?void 0:P.toString(),activeId:(A=l.value)==null?void 0:A.id},showSuccessModal:!1,onSuccess:()=>{Y.success({message:t(u?"lobby.event.invest.applySuccess":"lobby.event.invest.receiveSuccess")})},judgeResBefore:()=>{i.value=!1,d()},showAudio:!u,animateType:((M=r.value)==null?void 0:M.prize)>=10?_.TYPE_2:_.TYPE_1})};return()=>{let s;const{itemErr:y}=p,{nowBet:u=0,prize:c=0}=r.value||{};return n(q,{type:S.value,class:oe.eventRescue,onRetry:d},{default:()=>[n("div",{class:"rescurInfo"},[n("div",null,[n("span",{class:"topText"},[ae.value]),y?n(B,{onRetry:d},null):n("span",{class:"red"},[T(u)])]),n("div",null,[n("span",{class:"topText"},[ne.value]),y?n(B,{onRetry:d},null):n("span",{class:"yellow"},[T(c)])])]),n(ee,{class:"rescueList",columns:O.value,data:l.value.list,onRetry:d,uniqueKey:"rescue"},null),n(U,{eventData:l.value},null),n(J,{eventItemData:p.eventItemData},{default:()=>[n(F,{type:"success",disabled:!N(D.value),onClick:j,loading:i.value},le(s=se(D.value))?s:{default:()=>[s]})]})]})}}});export{we as default};
//# sourceMappingURL=RescueIndex.BdfNhGyW.js.map
