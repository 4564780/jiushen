import{a as y,az as I,bN as h,q as P,B as S,bq as C,cm as q,bG as v,v as z,w as _,al as G}from"./main.C8q1iJMV.js";import{u as H,c as M,d as O}from"./index.DxyeSsHe.js";import{u as U,s as V}from"../vendors/vendor-stable.LD58Pbb3.js";import{l as L,r as k,a as T,p as e,v as Y}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";var o=(t=>(t[t.Pendding=0]="Pendding",t[t.CanReceive=1]="CanReceive",t[t.AlreadyReceive=2]="AlreadyReceive",t))(o||{}),p=(t=>(t[t.Feedback=1]="Feedback",t[t.Reply=2]="Reply",t))(p||{});const j="_amount_1li96_36",J="_file_1li96_57",K="_reply_1li96_112",a={"feedback-detail":"_feedback-detail_1li96_17","detai-bonus":"_detai-bonus_1li96_22",amount:j,file:J,"content-group":"_content-group_1li96_68","wrapper-time":"_wrapper-time_1li96_68","wrapper-content-text":"_wrapper-content-text_1li96_80","content-text":"_content-text_1li96_85","wrapper-content-text-replay":"_wrapper-content-text-replay_1li96_109",reply:K},[Q]=P("feedback-detail"),oe=L({name:Q,props:{},setup(){const{t}=y(),w=U(),{feedbackItem:x}=V(H()),{isDemoMode:g}=I(),{updatePrize:A}=h(),c=k({}),r=k(!1),u=()=>{const{id:s}=w.query;O({feedback:Number(s)}).then(async l=>{c.value=l})},R=async s=>{if(g){_({type:"warn",message:t("lobby.feedback.demoModeNotReceived")});return}r.value||(r.value=!0,M({feedback:s}).then(()=>{c.value.receiveBonusStatus=o.AlreadyReceive,_({type:"success",message:y().t("lobby.notice.receivedSuccess")}),A(),G.Receive()}).catch(()=>{u()}).finally(()=>{r.value=!1}))};return T(()=>{u()}),()=>{const{bonus:s,feedbackId:l,feebackContent:F,receiveBonusStatus:b}=c.value,{chat:N,fileLink:n,status:B}=x.value;return e(z,null,{header:()=>e(S,null,{default:()=>e("p",null,[t("lobby.feedback.feedbackDetail")])}),default:()=>e("div",{class:a["feedback-detail"]},[B===1&&!!s&&e("div",{class:a["detai-bonus"]},[e("p",null,[t("lobby.notice.receviePrize"),e("span",{class:a.amount},[C(s)])]),!!parseFloat(s)&&e(q,{loading:r.value,type:"success",disabled:b==o.AlreadyReceive,onClick:()=>R(l)},{default:()=>[b==o.AlreadyReceive?t("lobby.modal.task.collected"):t("lobby.modal.task.collect")]})]),!!n&&e("div",{class:a.file},[n!=null&&n.includes("mp4")?e("video",{width:"400",controls:!0,src:n},null):e("img",{src:n},null)]),N.map(D=>{const{type:i,time:d,content:m}=D,f=d+""+i;if(i===p.Feedback)return e("div",{class:a["content-group"],key:f},[e("p",{class:a["wrapper-time"]},[e("span",null,[t("lobby.feedback.feedbackContent")]),e("span",{class:a["date-time"]},[v(d)])]),e("div",{class:a["wrapper-content-text"]},[e("p",{class:a["content-text"]},[m])])]);if(i===p.Reply&&F)return e("div",{class:[a["content-group"],a.reply],key:f},[e("p",{class:a["wrapper-time"]},[e("span",null,[t("lobby.feedback.replyContent")]),e("span",{class:a["date-time"]},[v(d)])]),e("div",{class:{[a["wrapper-content-text"]]:!0,[a["wrapper-content-text-replay"]]:!0}},[e("p",{class:a["content-text"]},[m,Y(" ")])])])})])})}}});export{oe as default};
//# sourceMappingURL=FeedbackDetailIndex.BJYcaMGE.js.map
