import{aU as U,a as V,fq as H,_ as I,hi as G,ft as K,fv as z,I as M,U as P,E as j,fH as Z,aa as J,b as W,hj as $,Z as E,hk as Y,hl as Q,Y as X,u as ee,cp as te,hm as ae,hn as R,bW as L,S as ne,O as oe,bg as se,fs as re,v as le,q as ie}from"./main.C8q1iJMV.js";import{d as ce,b as ue,I as de,u as me}from"../vendors/vendor-stable.LD58Pbb3.js";import{r as C,l as O,p as e,v as B,f as D,w as N,n as fe,C as _e}from"../vendors/vendor-@vue.DNlpgob2.js";import{c as F,g as be,a as we}from"./utils.9fBIObLK.js";import{T as pe,u as he}from"./TaskProgressIndex.4qW_VSh-.js";import{M as ge}from"./ModalContentIndex.Dj08dEyt.js";import{d as ye}from"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"./enum.CisFEKyB.js";import"./index.Dc16CbDK.js";import"./Progress.BhMcUY2s.js";import"./index.C870Y1OX.js";import"./index.nTWlx4yZ.js";const q=ce("withdraw-betting-task",()=>{const t=C();return{auditTaskConfig:t,setAuditTaskConfig:i=>{t.value=i}}}),Te={data:{type:Object,required:!0},loading:U},ke={item:{type:Object,required:!0,default:()=>({})},navigateToDetail:{type:Function,required:!0}},ve="_cell_18j3f_17",Re="_darken_18j3f_28",Se="_bold_18j3f_31",Ce="_finance_18j3f_35",Ae="_underline_18j3f_38",Be="_highlight_18j3f_42",Ie="_left_18j3f_45",je="_reward_18j3f_60",Ee="_multiple_18j3f_63",Ne="_source_18j3f_66",De="_sourceValue_18j3f_72",We="_beishu_18j3f_81",Oe="_right_18j3f_88",xe="_todo_18j3f_106",Me="_pending_18j3f_109",Le="_success_18j3f_112",Fe="_effectiveBet_18j3f_115",Ve="_rightIcon_18j3f_124",s={cell:ve,darken:Re,bold:Se,finance:Ce,underline:Ae,highlight:Be,left:Ie,reward:je,multiple:Ee,source:Ne,sourceValue:De,"task-origin":"_task-origin_18j3f_78",beishu:We,"progress-wrapper":"_progress-wrapper_18j3f_85",right:Oe,todo:xe,pending:Me,success:Le,effectiveBet:Fe,rightIcon:Ve,"line-through":"_line-through_18j3f_130","lost-all-money":"_lost-all-money_18j3f_133"},[Pe]=P("withdraw-recordItem"),$e=O({name:Pe,emits:["goSource"],props:ke,setup(t,{emit:p}){var n;const{t:i}=V(),{handleTransaction:f}=he(),T=W(),k=H(),c=I(t.item.amount,{toFixedType:"score"}).toString(),_=c&&parseFloat(t.item.amount)>0?"+".concat(c):"",m=I((n=t.item.auditRate)!=null?n:0,{toFixedType:"score"}).toString(),g=I(t.item.auditAmount,{toFixedType:"score"}).toString(),h=G(t.item.createTime),b={[s.reward]:!0,[s.bold]:!0,[s.finance]:t.item.sourceType===K.REWARD,[s.underline]:!0},A={[s.darken]:!0,[s.sourceValue]:!0,[s.highlight]:F(t.item.optType,t.item.dealType)},v=F(t.item.optType,t.item.dealType)?t.item.activeName||t.item.dealTypeName:t.item.dealTypeName||t.item.optTypeName,l=(o,u)=>{p("goSource",!0),T.push({name:j.REPORT,query:{reportCurrent:Z.ACCOUNT,orderNo:o,dealType:u}})},w=async()=>{const o=t.item.optType,u=t.item.dealType,d=t.item.orderNo;p("goSource",!0),f(o,u,d).then(y=>{y&&(p("goSource",!1),J.showDialog({title:i("lobby.reward.base.templateTitle"),message:()=>e(ge,{rewardData:y,rewardText:i("lobby.records.amount")},null),showConfirmButton:!1,showCloseButton:!0}))})},a=()=>{var o;return(o=t.item)!=null&&o.canBeCancel?e("p",{class:s["lost-all-money"]},[i("lobby.finance.withdraw.payAutoReleased")]):e("p",{class:[s.bold,s[we(t.item.status)]]},[t.item.statusName])};return()=>{var o,u;return e("div",{class:s.cell,onClick:t.navigateToDetail},[e("div",{class:s.left},[t.item.optType===z.BACK_OFFICE_AUDIT?t.item.optTypeName:e("p",null,[k.renderTaskOrigin((o=t.item)==null?void 0:o.sourceType)]),!!Number(t.item.auditRate)&&e("p",{class:s.beishu},[c&&e("span",{onClick:d=>{d.stopPropagation(),l(t.item.orderNo,String(t.item.dealType))},class:b},[_]),B("("),e("span",null,[B("x"),m]),i("lobby.finance.withdraw.multiple"),B(")")]),e(pe,{item:t.item},null),e("p",{class:s["task-origin"]},[e(M,{src:"/lobby_asset/common/web/withdraw/".concat(be(t.item.optType),".svg")},null),e("span",{class:s.source},[i("lobby.finance.withdraw.source"),B(":")]),e("span",{class:A,onClick:d=>{d.stopPropagation(),d.preventDefault(),ye(()=>{w()},300)()}},[v])])]),e("div",{class:s.right},[e("div",null,[e("p",{class:s.effectiveBet},[i("lobby.finance.withdraw.requireBet")]),e("p",{class:s.effectiveBet},[e("span",{class:((u=t.item)==null?void 0:u.canBeCancel)&&s["line-through"]},[B("Â "),g])]),a(),e("p",null,[!!t.item.createTime&&h])]),e("p",{class:s.rightIcon},[e(M,{src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])])])}}}),qe="_rewardInfo_rnkok_17",Ue="_retry_rnkok_25",He="_ml10_rnkok_28",Ge="_remainingValidBet_rnkok_31",Ke="_rewardWithdrawal_rnkok_38",ze="_left_rnkok_46",Ze="_right_rnkok_50",Je="_bold_rnkok_53",Ye="_finance_rnkok_57",Qe="_reward_rnkok_17",Xe="_rebetForWithdrawal_rnkok_67",et="_withdrawBtn_rnkok_71",tt="_pay_rnkok_82",r={rewardInfo:qe,retry:Ue,ml10:He,remainingValidBet:Ge,rewardWithdrawal:Ke,left:ze,right:Ze,bold:Je,finance:Ye,reward:Qe,rebetForWithdrawal:Xe,withdrawBtn:et,"lose-all-money":"_lose-all-money_rnkok_78",pay:tt,"color-primary":"_color-primary_rnkok_85"},[at]=P("withdraw-recordItem"),nt=O({name:at,props:Te,emits:["retry"],setup(t,{emit:p}){const{t:i}=ue(),f=$(),T=q(),k=D(()=>T.auditTaskConfig),c=C(!1),_=C(!1),m=W(),g=D(()=>{const l=k.value;if(!l)return null;const{undoneResetBonus:w,pendingCount:a,bonus:n,bonusRequireBet:o}=l,u=(d,y="")=>e("div",null,[e("p",null,[i(d),y])]);if(w)return u("lobby.finance.withdraw.hasUncompletedWithdrawalOrder");if(a===0&&n!=="0")return u("lobby.finance.withdraw.congratulations");if(a){const d=b(o);return e("div",null,[e("p",{class:r.rebetForWithdrawal},[e(de,{keypath:"lobby.finance.withdraw.rebetForWithdrawal",tag:"span",scope:"global"},{num:()=>e("span",{class:r.bold},[d])}),e(E,{class:[r.retry,r.ml10],loading:_.value,onRetry:()=>{_.value=!0,h()}},null),e("span",{class:r["color-primary"],onClick:v},[i("lobby.finance.withdraw.auditRecordDetails.goTask")])])])}return null}),h=()=>{p("retry"),f.getUserWithdrawInfo(),setTimeout(()=>{c.value=!1,_.value=!1},1200)},b=l=>I(l,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString(),A=()=>{f.transferOutReward(h)},v=()=>{m.push({name:j.HOME})};return()=>{const l=k.value;if(!l)return null;const{withdrawRequireBet:w,bonus:a,auditMode:n}=l,o=w!=="0"&&w!=="",u=(w==="0"||w==="")&&n===Y.MUST_COMPLETE_ALL_AUDITS&&a==="0",d=o||u;return f.isSHowAuditCancelStatus()?e("div",{class:r.rewardInfo},[e(Q,null,null)]):e("div",{class:r.rewardInfo},[d&&e("p",{class:r.remainingValidBet},[e("span",null,[i("lobby.finance.withdraw.remainingValidBet",{num:b(l.withdrawRequireBet)})]),e(E,{class:r.retry,loading:c.value,onRetry:()=>{c.value||(c.value=!0,h())}},null),e("span",{class:r["color-primary"],onClick:v},[i("lobby.finance.withdraw.auditRecordDetails.goTask")])]),!d&&e("div",{class:r.rewardWithdrawal},[e("div",{class:r.left},[e("p",null,[e("span",null,[i("lobby.finance.withdraw.currentReward")]),e("span",{class:{[r.bold]:!0,[r.finance]:l.pendingCount===0&&l.bonus!=="0",[r.reward]:!0}},[b(l.bonus||0)]),e(E,{class:r.retry,loading:c.value,onRetry:()=>{c.value||(c.value=!0,h())}},null)]),g.value]),e("div",{class:r.right},[l.bonusTransferIn&&l.pendingCount!==0&&e("p",null,[i("lobby.finance.withdraw.canWithdraw"),e("span",{class:[r.bold,r.finance]},[b(l.bonusAvailable||0)])," "]),e(X,{onClick:A,class:r.withdrawBtn,type:"success",disabled:!l.bonusTransferIn,text:i("lobby.finance.withdraw.withdraw")},null)])])])}}}),ot="_main_ifwk3_17",st="_status_ifwk3_34",rt="_betRules_ifwk3_43",lt="_recordMain_ifwk3_48",S={main:ot,"audit-cancel-status-box":"_audit-cancel-status-box_ifwk3_21","footer-text":"_footer-text_ifwk3_24",status:st,betRules:rt,recordMain:lt};function it(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!_e(t)}const[ct]=ie("pages-betting-task"),Bt=O({name:ct,setup(){const{t}=V(),{push:p}=W(),{open:i}=ee(),f=$(),T=q(),k=me(),c=C(),_=C(0),m=te(ae,{immediate:!1,transformFn:a=>{var n;return{...a,data:(n=a.list)!=null?n:[],total:a.totalCount}},defaultPageSize:20}),g=C(R.ALL),h=D(()=>[{label:t("lobby.center.components.dateRadio.all"),value:R.ALL},{label:t("lobby.center.components.dateRadio.undo"),value:R.TO_BE_PLACED},{label:t("lobby.center.components.dateRadio.pending"),value:R.IN_PROGRESS},{label:t("lobby.center.components.dateRadio.done"),value:R.COMPLETED},{label:t("lobby.center.components.dateRadio.abandoned"),value:R.ABANDONED}]),b=async()=>{const a=await m.loadData(!0);T.setAuditTaskConfig(a),f.auditCancelStatus=(a==null?void 0:a.auditCancelStatus)||0};N(()=>f.tabsActive,()=>{f.tabsActive===L.BETTING_TASK&&b()}),N(g,async a=>{m.payload.value={status:a},b()},{immediate:!0}),N(()=>k,a=>{f.tabsActive===L.BETTING_TASK&&a.name===j.WITHDRAW&&fe(()=>{c.value.scroller.value.scrollTop=_.value,_.value=0})},{deep:!0});const A=()=>{m.loadData()},v=()=>{m.reset()},l=a=>{var n,o,u;_.value=(u=(o=(n=c.value)==null?void 0:n.scroller.value)==null?void 0:o.scrollTop)!=null?u:0,p({name:j.BETTING_TASK_DETAILS,query:{id:a}})},w=()=>{i("betRules")};return()=>e(le,{class:S.main},{header:()=>{let a;return e("div",null,[e(nt,{loading:m.loading.value,onRetry:b},null),e("div",{class:S.status},[e(ne,{autoWidth:!0,minWidth:"auto",class:S.filterStatusSelect,fillMode:"neutral_2",size:"mini",modelValue:g.value,"onUpdate:modelValue":n=>g.value=n},it(a=h.value.map(n=>e(oe,{class:S.bankOption,value:n.value,key:n.value,label:n.label},{default:()=>[e("span",null,[n.label])]})))?a:{default:()=>[a]}),e("span",{class:S.betRules,onClick:w},[t("lobby.modal.betRules.title")])])])},default:()=>e(se,{ref:c,finished:m.finished.value,error:!!m.listError.value,loading:m.loading.value,class:S.recordMain,onLoad:A,onRetry:v},{default:()=>{var a,n;return[(n=(a=m.list)==null?void 0:a.value)==null?void 0:n.map(o=>e($e,{key:o.id,item:o,navigateToDetail:()=>l(o.id),onGoSource:u=>{var d,y,x;_.value=u&&(x=(y=(d=c.value)==null?void 0:d.scroller.value)==null?void 0:y.scrollTop)!=null?x:0}},null))]}}),footer:()=>{var a;return e(re,{cancelAmount:(a=T.auditTaskConfig)==null?void 0:a.cancelAmount,isFooter:!0},null)}})}});export{Bt as default};
//# sourceMappingURL=BettingTaskIndex.XlRjg-Sf.js.map
