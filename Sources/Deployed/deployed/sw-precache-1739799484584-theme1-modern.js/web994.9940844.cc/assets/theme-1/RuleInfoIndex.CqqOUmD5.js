import{a as C,bq as g,ac as q,bI as S,t as J,I as E,q as $,c3 as f,az as j,bS as D,aK as V,aG as T,cc as p,cd as Q,ce as X,aa as Z}from"./main.C8q1iJMV.js";import{l as P,t as G,f as v,p as o,r as h,w as ee,o as te,n as se}from"../vendors/vendor-@vue.DNlpgob2.js";import{a as A,t as z,E as ne}from"./const.kNgtypBJ.js";const x={"description-tips-popover":"_description-tips-popover_1r5eh_17","tip-box":"_tip-box_1r5eh_29","description-tips":"_description-tips_1r5eh_17","icon-box":"_icon-box_1r5eh_34"},[oe]=$("pages-task-desc-tips"),be=P({name:oe,props:{minAmount:{type:Number,default:0},maxAmount:{type:Number,default:0}},setup(s){const{t:n}=C(),{minAmount:t,maxAmount:e}=G(s),a=v(()=>!t.value||!e.value?"":t.value-e.value!==0?"".concat(g(t.value),"-").concat(g(e.value)):String(g(e.value)));return()=>o("div",{class:x["description-tips"]},[o("span",null,[n("lobby.modal.task.finishTreeDay")]),o(q,{overlayClass:x["description-tips-popover"],placement:"top",destroyOnClose:!0,show:S().isPoverShow,onClosed:()=>S().isPoverShow=!1,trigger:"manual"},{default:()=>[o(J,{class:x["tip-box"],html:n("lobby.modal.task.threeDaysTips",{x:a.value})},null)],reference:()=>o("span",{class:x["icon-box"],onClick:()=>S().isPoverShow=!0},[o(E,{src:"/lobby_asset/common/web/profile/icon_grzx_gywm.svg"},null),o("span",{class:x["icon-click-area"]},null)])})])}}),ie=(s,n)=>{let t=n,e=s;return e===f.taskWeekly&&(e=2,t===3&&(t=2)),typeof n>"u"||e===4?"":e+"_"+t},ae=(s,n)=>{var u,m;if(s!==f.newBenefits)return;const t=j(),e=ie(s,n);let a;const l="icon_".concat(e,"_").concat((m=(u=t.userInfos)==null?void 0:u.currency)==null?void 0:m.toLowerCase());return l in A?a=A[l]:a=A["icon_"+e],a},M=s=>{const n=[f.taskDaily,f.taskWeekly,f.taskMystery],t=S().curCategory;let e="";return t!=null&&t.template&&n.includes(t==null?void 0:t.template)?e="task_czdm_"+s.icon:e="task_"+(t==null?void 0:t.template)+"_"+s.icon,e},xe=s=>!(M(s)===z.saveUrl&&s.status===D.Goto),he=s=>{var n,t,e,a,l,u,m;if(M(s)===z.downloadAndLogin&&s.status===D.Goto){let c=[];try{const i=JSON.parse(s.cfg);!(i!=null&&i.bindTypes)||((n=i==null?void 0:i.bindTypes)==null?void 0:n.length)===0?c=[1,2,3,4]:c=(i==null?void 0:i.bindTypes)||[]}catch(i){}const d=V();return((e=(t=T)==null?void 0:t.package)==null?void 0:e.isVest)&&c.includes(1)||((l=(a=T)==null?void 0:a.package)==null?void 0:l.isLite)&&c.includes(2)||d.isP2a&&d.isAndroid&&c.includes(3)||((m=(u=T)==null?void 0:u.package)==null?void 0:m.isWebClip)&&c.includes(4)}return!0},k=h(null),y=h(null),le=(s,n,t)=>{const{t:e}=C();k.value||(k.value={[p.Nothing]:()=>e("lobby.common.tips.title"),[p.Recharge]:()=>e("lobby.modal.task.onlyRecharge"),[p.BettingTotal]:()=>e("lobby.modal.task.onlyGame"),[p.ProfitTotal]:()=>e("lobby.modal.task.onlyGame"),[p.ProfitOne]:()=>e("lobby.modal.task.onlyGame"),[p.LossOne]:()=>e("lobby.modal.task.onlyGame"),[p.LossTotal]:()=>e("lobby.modal.task.onlyGame"),[p.BettingOne]:()=>e("lobby.modal.task.onlyGame")}),y.value||(y.value={["".concat(f.newBenefits,"_27")]:()=>e("lobby.modal.task.contact")});const a="".concat(s,"_").concat(t);return y!=null&&y[a]?y==null?void 0:y[a]:k.value[n]?k.value[n]:()=>e("lobby.common.tips.title")},we=s=>{if(!s||!(s!=null&&s.length))return!1;const{PendingReceive:n,Finish:t,Expired:e,HasSend:a,PendingApprove:l,ServerCancel:u,ServerReject:m}=D,c=[n,t,e,a,l,u,m];return s.slice(0,3).reduce((i,I)=>(c.includes(I.status)||(i=!1),i),!0)},re="_yellow_15wm8_42",ce="_green_15wm8_45",ue="_finished_15wm8_48",b={"one-item":"_one-item_15wm8_17","one-item-box":"_one-item-box_15wm8_23","prefix-text":"_prefix-text_15wm8_27","icon-text":"_icon-text_15wm8_30","suffix-num":"_suffix-num_15wm8_36",yellow:re,green:ce,finished:ue},[me]=$("pages-task-one-item"),F=P({name:me,props:{type:{type:String,default:"amount"},isActive:{type:Boolean,default:!1},isShowName:{type:Boolean,default:!0},isShowIcon:{type:Boolean,default:!0},text:{type:[Number,String],default:""},btnKey:{type:Number,default:0}},setup(s){const n=j(),{type:t,isActive:e,isShowIcon:a,text:l}=G(s),u=v(()=>e.value?"textLighten":t.value==="amount"?"yellow":"green"),m=v(()=>{var d,i;return(i=Q[((d=n.userInfos)==null?void 0:d.currency)||"CNY"])==null?void 0:i.PAY_JB}),c=v(()=>t.value==="amount"?m.value:"/lobby_asset/common/web/common/comm_icon_shy.svg");return()=>o("div",{class:{[b["one-item"]]:!0}},[o("div",{class:{[b["one-item-box"]]:!0,[b[u.value]]:!0,[b.finished]:s.btnKey===ne.Finish}},[a.value&&o(E,{class:[b["icon-text"]],src:c.value},null),o("span",{class:b["suffix-num"]},[l.value])])])}}),de="_description_fxodk_41",fe="_text_fxodk_63",r={"instruction-info":"_instruction-info_fxodk_17","is-newBenefits":"_is-newBenefits_fxodk_23","instruction-base-info":"_instruction-base-info_fxodk_23","instruction-icon":"_instruction-icon_fxodk_26",description:de,"description-primary":"_description-primary_fxodk_44","more-limit":"_more-limit_fxodk_56",text:fe,"text-inner":"_text-inner_fxodk_66","btn-more":"_btn-more_fxodk_71","is-hide-btn-more":"_is-hide-btn-more_fxodk_77","bottom-slot":"_bottom-slot_fxodk_82","is-shallow-text":"_is-shallow-text_fxodk_91"},[pe]=$("pages-task-rule-info"),ke=P({name:pe,props:{template:{type:Number,default:f.newBenefits},ruleId:{type:Number,default:0},ruleIcon:{type:Number,default:0},isShallowText:{type:Boolean,default:!1},isHideBottom:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},amount:{type:Number,default:0},activity:{type:Number,default:0},nameExt:{type:String,default:""},btnKey:{type:Number,default:0}},setup(s,{slots:n}){const{t}=C(),e=h(null),a=h(null),l=h(!1),{width:u,height:m}=X(),{ruleId:c,ruleIcon:d,template:i,isShallowText:I,isHideBottom:U,isActive:K,nameExt:B,amount:O,activity:H}=G(s);ee([u,m],()=>{R()}),te(()=>{se(()=>{R()})});const R=()=>{if(!e.value||!a.value)return;const _=e.value.clientWidth+3<a.value.scrollWidth,w=e.value.clientHeight+5<a.value.scrollHeight;_||w?l.value=!0:l.value=!1},W=v(()=>ae(i.value,d.value)),N=v(()=>le(i.value,d.value,c.value)),L=v(()=>"".concat(t("lobby.modal.task.only")).concat(B.value)),Y=()=>{var _,w;Z.showDialog({title:(w=(_=N.value)==null?void 0:_.call(N))!=null?w:t("lobby.common.tips.title"),type:"info",message:B.value,closeOnClickOverlay:!1,showCloseButton:!0,showConfirmButton:!1})};return()=>{var _;return o("div",{class:{[r["instruction-info"]]:!0,[r["is-shallow-text"]]:I.value,[r["is-newBenefits"]]:i.value===f.newBenefits}},[o("div",{class:{[r["instruction-base-info"]]:!0,"instruction-base-info-mystery":i.value===f.taskMystery}},[W.value&&o(E,{class:r["instruction-icon"],src:W.value},null),o("div",{class:r.description},[o("div",{class:r["description-primary"]},[(_=n.desc)==null?void 0:_.call(n)]),B.value&&o("div",{class:r["more-limit"]},[o("p",{ref:e,class:r.text},[o("span",{ref:a,class:r["text-inner"]},[L.value])]),o("p",{class:{[r["btn-more"]]:!0,[r["is-hide-btn-more"]]:!l.value},onClick:Y},[t("lobby.system.more")])])])]),!U.value&&o("div",{class:r["bottom-slot"]},[O.value>0&&o(F,{type:"amount",isActive:K.value,text:g(O.value),btnKey:s.btnKey},null),H.value>0&&o(F,{type:"active",isActive:K.value,text:H.value,btnKey:s.btnKey},null)])])}}});export{be as D,ke as R,he as a,M as g,we as j,xe as s};
//# sourceMappingURL=RuleInfoIndex.CqqOUmD5.js.map
