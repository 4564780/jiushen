import{a as R,ff as P,fd as ae,D as V,aC as se,az as B,fi as y,cl as h,E as v,bY as N,fg as ie,s as ce,b as le,fj as ue}from"./main.C8q1iJMV.js";import{s as T,u as me}from"../vendors/vendor-stable.LD58Pbb3.js";import{d as pe}from"../vendors/vendor-default.CjiYZF7Q.js";import{c as be}from"../vendors/vendor-lodash.BYdGDldS.js";import{r as E,f as _}from"../vendors/vendor-@vue.DNlpgob2.js";const he="/lobby_asset/common/web/common/input_icon_twitter.svg",ge="/lobby_asset/common/web/common/input_icon_wechat.svg",fe="/lobby_asset/common/web/common/input_icon_whatsapp.svg",we="/lobby_asset/common/web/common/input_icon_zalo.svg",de="/lobby_asset/common/app/common/comm_icon_verified.png",ye="/lobby_asset/common/web/common/input_icon_telegram.svg",ve="/lobby_asset/common/web/common/input_icon_fb.svg",_e="/lobby_asset/common/web/common/input_icon_line.svg",g={twitter_icon:he,wechat_icon:ge,whatsapp_icon:fe,zalo_icon:we,icon_verified:de,telegram_icon:ye,facebook_icon:ve,line_icon:_e},{t:m}=R(),Se={wechat:(t,o)=>t===o||/^[a-zA-Z_][a-zA-Z\d_-]{5,19}$/.test(t)?!0:m("lobby.center.setting.error2"),whatsapp:(t,o)=>t===o||/^\d{6,40}$/.test(t)?!0:m("lobby.center.setting.error3"),facebook:(t,o)=>t===o?!0:t&&(t.length>50||t.length<3)?m("lobby.center.setting.error11"):new RegExp("^[\\w@.\\-\\\\]{3,50}$").test(t)?!0:m("lobby.center.setting.error9"),telegram:(t,o)=>t===o||/^\w{5,40}$/.test(t)?!0:m("lobby.center.setting.error6"),zalo:(t,o)=>t===o||/^[A-Za-z0-9]{4,40}$/.test(t)?!0:m("lobby.center.setting.error7"),line:(t,o)=>t===o||/^[A-Za-z0-9]{4,40}$/.test(t)?!0:m("lobby.center.setting.error7"),twitter:(t,o)=>t===o||/^@?(\w){4,40}$/.test(t)?!0:m("lobby.center.setting.error8")},De=()=>{const t=E({account:"",nick:"",phone:"",email:"",wechat:"",whatsapp:"",facebook:"",telegram:"",realName:"",birthday:"",zalo:"",line:"",twitter:"",registerTime:"",mineDisplayOptions:P.USERNAME}),o=E({account:"",nick:"",phone:"",email:"",wechat:"",whatsapp:"",facebook:"",telegram:"",realName:"",birthday:"",zalo:"",line:"",twitter:"",registerTime:"",mineDisplayOptions:P.USERNAME}),S=E({wechat:!1,whatsapp:!1,facebook:!1,telegram:!1,zalo:!1,line:!1,twitter:!1}),{getShowName:x}=ae(),w=le(),I=V(),H=se(),M=B(),{systemInfos:d}=T(I),{vipInfos:f}=T(H),{userInfos:$}=T(M),F=me(),{t:s}=R(),{encryptEmail:L}=ue(),U=_(()=>{var e;return((e=d.value)==null?void 0:e.userPhoneSwitch)===y.OPEN}),Z=_(()=>{var e;return((e=d.value)==null?void 0:e.userRegisterTimeSwitch)===y.OPEN}),Y=_(()=>{var e;return((e=d.value)==null?void 0:e.userEmailSwitch)===y.OPEN}),j={wechat:"user_wechat_switch",telegram:"user_telegram_switch",facebook:"user_facebook_switch",whatsapp:"user_whatsapp_switch",twitter:"userTwitterSwitch",zalo:"userZaloSwitch",line:"userLineSwitch"},p=e=>{var n;const r=j[e];return((n=d.value)==null?void 0:n[r])===y.CLOSE},C=_(()=>{var e;return((e=f.value)==null?void 0:e.birthday)!=="0"}),q=()=>{w.push({name:v.SECURITY,query:{active:N.PHONE.toString()}})},W=()=>{w.push({name:v.SECURITY,query:{active:N.EMAIL.toString()}})},G=e=>{t.value[e]=o.value[e],S.value[e]=!0},J=e=>{o.value[e]=t.value[e]},Q=e=>{t.value[e]="",o.value[e]=""},X=e=>{var r,n;return(n=(r=S.value)==null?void 0:r[e])!=null?n:!1},z=(e="")=>{var n,a;const r={whatsapp:3,line:3,facebook:3,twitter:3,zalo:3,telegram:3,wechat:3};if(e){S.value[e]=!1;const i=(a=(n=t.value)==null?void 0:n[e])!=null?a:"";if(k(e)){o.value[e]=i;const c=r[e],u=i.substring(0,c).replace(/./g,"*")+i.substring(c);t.value[e]=u}}else Object.entries(r).forEach(([i,c])=>{var A,O;const l=(O=(A=f.value)==null?void 0:A[i])!=null?O:"";o.value[i]=l;const ne=l.substring(0,c).replace(/./g,"*")+l.substring(c);t.value[i]=ne})},k=e=>{var n,a;const r=(a=(n=f.value)==null?void 0:n[e])!=null?a:"";return r&&o.value[e]===r},K=()=>{var c,l,b,u;const{nickname:e="",registerTime:r=""}=(c=f.value)!=null?c:{},{mobile_phone:n="",email:a="",mineDisplayOptions:i}=(l=$.value)!=null?l:{};t.value.phone=n,t.value.email=L(a),t.value.nick=e,t.value.birthday=C.value?(b=f.value)==null?void 0:b.birthday:"",t.value.account=(u=x.value())!=null?u:"",t.value.mineDisplayOptions=i,t.value.registerTime=r?pe(Number(r)*1e3).format(s("lobby.center.setting.timeFormat")):"",o.value=be(t.value),z()},ee=[{name:"wechat",formValue:t.value.wechat,rewardType:h.BindWechat,placeholder:s("lobby.center.setting.wechatPlaceholder",{c:s("lobby.center.setting.wechat")}),prefix:g.wechat_icon,isHidden:p("wechat")},{name:"whatsapp",formValue:t.value.whatsapp,rewardType:h.BindWhatsApp,placeholder:s("lobby.center.setting.whatsAppPlaceholder",{c:s("lobby.center.setting.whatsapp")}),prefix:g.whatsapp_icon,isHidden:p("whatsapp")},{name:"facebook",formValue:t.value.facebook,rewardType:h.BindWhatsApp,placeholder:s("lobby.center.setting.facebookPlaceholder",{c:s("lobby.center.setting.facebook")}),prefix:g.facebook_icon,isHidden:p("facebook")},{name:"telegram",formValue:t.value.telegram,rewardType:h.BindTelegram,placeholder:s("lobby.center.setting.telegramPlaceholder",{c:s("lobby.center.setting.telegram")}),prefix:g.telegram_icon,isHidden:p("telegram")},{name:"zalo",formValue:t.value.zalo,rewardType:h.BindZalo,placeholder:s("lobby.center.setting.zaloPlaceholder",{c:s("lobby.center.setting.zalo")}),prefix:g.zalo_icon,isHidden:p("zalo")},{name:"line",formValue:t.value.line,rewardType:h.BindLine,placeholder:s("lobby.center.setting.linePlaceholder",{c:s("lobby.center.setting.line")}),prefix:g.line_icon,isHidden:p("line")},{name:"twitter",formValue:t.value.twitter,rewardType:h.BindTwitter,placeholder:s("lobby.center.setting.twitterPlaceholder",{c:s("lobby.center.setting.twitter")}),prefix:g.twitter_icon,isHidden:p("twitter")}],te=e=>{var u;const{homeLayoutInfos:r}=V(),n=((u=r==null?void 0:r.commonConfig)==null?void 0:u.ageLimit)||"18",{userInfos:a}=B(),i=(a==null?void 0:a.birthday)!=="0";if(n===ie.AgeNone||i)return!0;const c=new Date,l=new Date(e);let b=c.getFullYear()-l.getFullYear();return(c.getMonth()<l.getMonth()||c.getMonth()===l.getMonth()&&c.getDate()<l.getDate())&&(b-=1),b>=Number(n)?!0:(ce({type:"error",title:s("lobby.center.setting.ageTip"),message:s("lobby.center.setting.notAge",{age:n}),showCancelButton:!1}),!1)},re=(e,r)=>{var a;if(r===((a=f.value)==null?void 0:a[e]))return!0;const n=Se[e];return n?n(D(e)):!0},oe=()=>{var e;F.query&&F.query.jumpFrom===v.TASK?(e=history.state)!=null&&e.back?w.back():w.push({name:v.TASK}):w.back()},D=e=>{const r=t.value[e];return/^\*\*\*/.test(r)?o.value[e]:r};return{form:t,sourceForm:o,isOpePhone:U,isOpenRegisterTime:Z,isOpenEmail:Y,isSetBirthday:C,fields:ee,checkBirthday:te,handleGoToPhone:q,handleGoToEmail:W,changeForm:J,clearChangeForm:Q,cipFormText:z,updateForm:K,isShowCompelte:k,focusForm:G,isShowClear:X,inputValidator:re,back:oe,getDirtyFormValues:(e,r)=>r.reduce((n,a)=>{const i=D(a);return e[a]!==i&&(n[a]=i),n},{})}};export{De as u};
//# sourceMappingURL=useSettingForm.C_htFHpH.js.map
