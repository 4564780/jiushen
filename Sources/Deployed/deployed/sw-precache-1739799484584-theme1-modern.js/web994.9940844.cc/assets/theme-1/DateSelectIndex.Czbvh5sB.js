import{l as j,r as i,f as r,p as n,F as z,v as P,y as U,z as q,C as A}from"../vendors/vendor-@vue.DNlpgob2.js";import{aS as M,fT as F,R as Z,S as H,O as W,fU as g,q as B,fV as k}from"./main.C8q1iJMV.js";import{d as c}from"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{D as w}from"./index.CnQRgKzx.js";import{P as G}from"./index.DpvTgJML.js";const R={limitSearchDays:{type:Number,default:90},limitDays:{type:Number,default:180},defaultOption:{type:Number,require:!0},options:{type:Array,require:!0},selectSize:M("mini"),fillMode:M("neutral_2")},I="_start_1ter8_41",J="_line_1ter8_45",K="_end_1ter8_48",L="_option_1ter8_68",l={"date-select":"_date-select_1ter8_17","date-block":"_date-block_1ter8_28",start:I,line:J,end:K,"date-picker":"_date-picker_1ter8_52","date-select-dropdown":"_date-select-dropdown_1ter8_65",option:L};function Q(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!A(a)}const[X]=B("date-select"),re=j({name:X,props:R,emits:["typeChange","cancel"],setup(a,{emit:d}){const s=i(a.defaultOption),y=i(a.defaultOption),C=F(),u=c().utc().add(C,"hour"),S=[u.format("YYYY"),u.format("MM"),u.format("DD")],m=i(S),p=i(S),f=r(()=>m.value.join("-")),b=r(()=>p.value.join("-")),Y=e=>{var t;s.value=e,(t=_.value)!=null&&t.isCustom?v.value=!0:(d("typeChange",{timeEnum:e}),y.value=e)},T=()=>{v.value=!1;const e=k(f.value),t=k(b.value,!0);d("typeChange",{timeEnum:s.value,startTime:e,endTime:t})},N=()=>{s.value=y.value,d("typeChange",{timeEnum:y.value}),d("cancel")};Z({selectTyppe:s,onTypeChange:Y,initDate:()=>{const e=c().utc().add(C,"hour"),t=[e.format("YYYY"),e.format("MM"),e.format("DD")];m.value=t,p.value=t}});const O=r(()=>u.subtract(a.limitDays-1,"day").toDate()),V=r(()=>c(u.format("YYYY-MM-DD")).toDate()),x=r(()=>c(f.value).toDate()),E=r(()=>{const e=c(f.value).add(a.limitSearchDays-1,"day"),t=c(u.format("YYYY-MM-DD"));return(e.isBefore(t)?e:t).toDate()}),v=i(!0),_=r(()=>{var e;return(e=a.options)==null?void 0:e.find(t=>t.value==s.value)});return()=>{var e,t;return n("div",{class:l["date-select"]},[!((e=_.value)!=null&&e.isCustom)&&n(H,{autoWidth:!0,minWidth:"auto",size:a.selectSize,modelValue:s.value,"onUpdate:modelValue":o=>s.value=o,fillMode:a==null?void 0:a.fillMode,wrapperClass:l["date-select-wrapper"],dropdownClassName:l["date-select-dropdown"],onChange:o=>Y(o.value)},{default:()=>{var o;return[(o=a.options)==null?void 0:o.map(D=>{let h;return n(W,{class:l.option,value:D.value,key:D.value,label:D.label()},Q(h=D.label())?h:{default:()=>[h]})})]}}),((t=_.value)==null?void 0:t.isCustom)&&n(z,null,[n("div",{class:l["date-block"],onClick:()=>v.value=!0},[n("span",{class:l.start},[g(f.value,{fmt:"ymd"})]),n("span",{class:l.line},[P("-")]),n("span",{class:l.end},[g(b.value,{fmt:"ymd"})])]),U(n(G,{class:l["date-picker"],onConfirm:T,onCancel:N},{default:()=>[n(w,{optionHeight:"0.64rem",visibleOptionNum:5,modelValue:m.value,"onUpdate:modelValue":o=>m.value=o,showToolbar:!1,minDate:O.value,maxDate:V.value},null),n(w,{optionHeight:"0.64rem",visibleOptionNum:5,modelValue:p.value,"onUpdate:modelValue":o=>p.value=o,showToolbar:!1,minDate:x.value,maxDate:E.value},null)]}),[[q,v.value]])])])}}});export{re as c};
//# sourceMappingURL=DateSelectIndex.Czbvh5sB.js.map
