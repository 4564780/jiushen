import{a as W,co as L,aE as U,cp as ce,p as se,az as ue,ci as be,fE as xe,cE as fe,_ as q,q as M,I as ke,bG as de,m as Se,cs as X,S as V,bg as me,s as Ne,d9 as Ae,fF as oe,dM as Le,fG as z,fH as K,B as Ie,a8 as $e,a9 as Ee,v as Oe}from"./main.C8q1iJMV.js";import{u as Re}from"./useActiveTabReplaceRouter.DqWw3Td4.js";import{f as j,r as N,w as Q,h as Te,l as G,p as e,v as Y,F as De,y as D,M as P,C as re,t as we}from"../vendors/vendor-@vue.DNlpgob2.js";import{u as Pe,a as We}from"../vendors/vendor-stable.LD58Pbb3.js";import{v as pe,d as x}from"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const ne=j(()=>{const{t}=W();return[{label:t("lobby.center.components.dateRadio.today"),value:L.TODAY},{label:t("lobby.center.components.dateRadio.yesterday"),value:L.YESTERDAY},{label:t("lobby.center.components.dateRadio.thisWeek"),value:L.THIS_WEEK},{label:t("lobby.center.components.dateRadio.lastWeek"),value:L.LAST_WEEK},{label:t("lobby.center.components.dateRadio.thisMonth"),value:L.THIS_MONTH},{label:t("lobby.center.components.dateRadio.lastMonth"),value:L.LAST_MONTH},{label:t("lobby.center.components.dateRadio.all"),value:L.ALL}]}),ze=async t=>{const{data:a}=await U.request({url:"/api/bet-manager/recentreport/bet_report/personal/_query",data:t,method:"POST"});return a.data},Ve=async(t={gameCategoryId:null,platformId:null})=>{const{data:a}=await U.request({url:"/api/game/recentreport/platform-category-game-combo",data:t,method:"POST"});return a==null?void 0:a.data},he=async t=>{const{data:a}=await U.request({url:"/user/accountTotal",data:t,method:"POST"});return a==null?void 0:a.data},Be=async t=>{const{data:a}=await U.request({url:"/user/accountPageList",data:{...t,page:t.page+"",size:t.size+""},method:"POST"});return a==null?void 0:a.data},Fe=async()=>{const{data:t}=await U.request({url:"/home/walletType",method:"POST"});return t==null?void 0:t.data},Me=async()=>{const{data:t}=await U.request({url:"/home/opt_type_v2",method:"get"},{oss:{enable:!0},token:{type:"staticOnly"},omitKey:["platformType","currency"]});return t==null?void 0:t.data},Ge=async()=>{const{data:t}=await U.request({url:"/api/club/accountDetail/optType",method:"post"},{oss:{enable:!1},token:{type:"loginOnly"}});return t==null?void 0:t.data},qe=async t=>{const{data:a}=await U.request({url:"/home/dealType",data:t,method:"POST"});return a==null?void 0:a.data},je=async t=>{var l;const{data:a}=await U.request({url:"/api/bet-manager/recentreport/betrecords/_query",data:t,method:"POST"});return(l=a==null?void 0:a.data)!=null&&l.data?a==null?void 0:a.data:{data:[],total:0}},Ue=()=>{const{t}=W(),a=Pe(),l=We(),d=N(!1),T=Object.freeze({dealType:"0",orderNo:void 0,time:"0",type:"0",walletType:0,timeType:0}),o=N({...T}),{loading:m,finished:f,list:h,listError:A,loadData:n,reset:v}=ce(Be,{immediate:!1,defaultPageSize:50,transformFn:g=>!g||!Array.isArray(g.data)?{total:0,data:[]}:{total:g.total,data:g.data.map(c=>{var C;return c.uuid=(C=c==null?void 0:c.uuid)!=null?C:pe(),c})},alias:{page:"page",pageSize:"size"},payload:o}),$=j(()=>[{value:"0",label:t("lobby.center.components.categorySelect.newAllCategory")}]),I=j(()=>[{value:"0",label:t("lobby.center.components.categorySelect.allDealCategory")}]),w=N(),k=async()=>{var g,c,C,R;try{const{opt_type_list:O}=fe.enable?await Ge():await Me(),B=O.map(({id:F,name:H})=>({value:F+"",label:H}));B!=null&&B.length?w.value=B:w.value=$.value,o.value.type=(c=(g=w.value)==null?void 0:g[0])==null?void 0:c.value}catch(O){w.value=$.value,o.value.type=(R=(C=w.value)==null?void 0:C[0])==null?void 0:R.value}},s=N(!1),i=N(),y=async()=>{var g,c,C;s.value=!0;try{const{optTypeMap:R}=await qe({optTypes:[Number(o.value.type)]}),O=(c=(g=R==null?void 0:R[o.value.type])==null?void 0:g.dealTypeInfos)==null?void 0:c.map(({dealType:B,dealTypeCn:F})=>({value:B+"",label:F}));O!=null&&O.length?i.value=I.value.concat(O):i.value=I.value,o.value.dealType=(C=i.value)==null?void 0:C[0].value}finally{s.value=!1}};Q(()=>o.value.type,()=>{o.value.dealType=I.value[0].value,y(),S(!0)}),se(async()=>{const{orderNo:g,dealType:c}=a.query;if(g||c){d.value=!0,await te(),d.value=!1,o.value.orderNo=g==null?void 0:g.toString(),o.value.dealType=c==null?void 0:c.toString(),l.replace({query:{...a.query,orderNo:void 0,dealType:void 0}}),o.value.timeType=0,o.value.walletType=0,S(!0),o.value.orderNo=void 0,o.value.dealType="0";return}te()});const{userInfos:p}=ue(),b=Te({total_charge_amount:"0",total_withdraw_amount:"0",total_discount_amount:"0"}),S=async(g=!1)=>{var ae,le;if(d.value)return;await n(g);const c={time:"",timeType:o.value.timeType,type:o.value.type+"",dealType:(ae=o.value.dealType)==null?void 0:ae.toString(),walletType:o.value.walletType},C=await he(c),{total_charge_amount:R,total_withdraw_amount:O,total_discount_amount:B}=C,F=be((le=p==null?void 0:p.currency)!=null?le:"CNY"),H=(F==null?void 0:F.gameRate)===1,J=(ie,ye)=>q(ie!=null?ie:0,{showGroup:!0,sign:ye?"auto":!1,toFixedType:ye?"currency":"score"}).toString();b.total_charge_amount=J(R,H),b.total_withdraw_amount=J(O,H),b.total_discount_amount=J(B,H)},ee=j(()=>(p==null?void 0:p.auditMode)===xe.DIRECT_WITHDRAWAL||Number((p==null?void 0:p.bonus)||0)>0),Z=N(),te=async()=>{var g,c;if(await Promise.all([k(),y(),S(!0)]),ee.value)try{const C=await Fe();Z.value=C.map(({walletType:R,walletDesc:O})=>({value:R,label:O})),o.value.walletType=(c=(g=Z.value)==null?void 0:g[0])==null?void 0:c.value}catch(C){Z.value=[{value:0,label:t("lobby.center.components.categorySelect.walletTypeCategory")}]}};return{walletType:Z,typeList:w,dealTypeList:i,form:o,loading:m,finished:f,list:h,listError:A,isShowBonus:ee,loadData:S,totalData:b,getDealTypeList:y,loadingTypes:s,showAll:()=>{o.value.timeType=L.ALL,S(!0)},reset:v}},He="_loading_1625t_31",Ye="_form_1625t_35",Ze="_scroll_1625t_45",Ke="_data_1625t_50",Je="_betting_1625t_58",Qe="_dataList_1625t_64",Xe="_footer_1625t_70",et="_hb_1625t_113",tt="_win_1625t_117",at="_lose_1625t_121",lt="_recharge_1625t_125",ot="_reflect_1625t_129",nt="_finance_1625t_133",st="_mobileCell_1625t_137",rt="_f22_1625t_150",it="_f24_1625t_153",ct="_flexAround_1625t_156",ut="_flexBetween_1625t_160",dt="_leftTitle_1625t_164",mt="_alignRight_1625t_178",pt="_dealTypeName_1625t_181",_t="_game_1625t_216",vt="_red_1625t_224",yt="_yellow_1625t_227",gt="_darken_1625t_230",bt="_light_1625t_236",ft="_mr20_1625t_239",Tt="_green_1625t_242",wt="_copy_1625t_245",ht="_hasTooltip_1625t_251",Ct="_text_1625t_256",xt="_remark_1625t_259",kt="_dropdownClassName_1625t_264",St="_accountTipsContent_1625t_274",r={"account-main":"_account-main_1625t_17",loading:He,form:Ye,scroll:Ze,data:Ke,betting:Je,"club-data":"_club-data_1625t_61",dataList:Qe,footer:Xe,break:"_break_1625t_85",hb:et,win:tt,lose:at,recharge:lt,reflect:ot,finance:nt,mobileCell:st,f22:rt,f24:it,flexAround:ct,flexBetween:ut,leftTitle:dt,alignRight:mt,dealTypeName:pt,game:_t,red:vt,yellow:yt,darken:gt,light:bt,mr20:ft,green:Tt,copy:wt,hasTooltip:ht,text:Ct,remark:xt,dropdownClassName:kt,accountTipsContent:St},[Nt]=M("AccountFooter"),At=G({name:Nt,props:{totalData:{type:Object,default:()=>({total_charge_amount:"0",total_withdraw_amount:"0",total_discount_amount:"0"})}},setup(t){const{t:a}=W();return()=>{const{totalData:l}=t;return e("div",{class:r.footer},[e("span",{class:r.break},[e("span",null,[a("lobby.center.report.statistics.rechargeTotal")]),e("span",{class:[r.recharge,r.hb]},[l==null?void 0:l.total_charge_amount])]),e("span",{class:r.break},[e("span",null,[a("lobby.center.report.statistics.reflectTotal")]),e("span",{class:[r.reflect,r.hb]},[l.total_withdraw_amount])]),e("span",{class:r.break},[e("span",null,[a("lobby.center.report.statistics.discount")]),e("span",{class:r.finance},[l.total_discount_amount])])])}}}),[Lt]=M("AccountList"),It=G({name:Lt,props:{source:{type:Object,default:()=>({})}},emits:["openRemark"],setup(t,{emit:a}){return()=>{var d;const{source:l}=t;return e("div",{class:r.mobileCell},[e("div",{class:r.light},[e("p",{class:r.leftTitle},[e("span",{class:r.f22},[e("div",{class:r.hasTooltip},[e("span",{class:r.text},[l.opt_type_name])])]),e("span",null,[Y("("),l.deal_type_name,Y(")")]),!!l.remark&&e("span",{class:r.remark,onClick:()=>a("openRemark",l.remark)},[e(ke,{src:"/lobby_asset/common/web/profile/icon_grzx_gywm.svg"},null)])]),e("p",null,[e("span",null,[de(l.finish_game_time||+new Date)])])]),e("div",{class:[r.light,r.alignRight,r.alignRight]},[e("p",null,[e("span",{class:[r.darken,r.f24]},[q((d=l.item_count)!=null?d:0,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString()])]),e("p",null,[e("span",{class:[r.f22,r.dealTypeName]},[l.walletTypeName])])])])}}}),$t={value:{type:Number,required:!0,default:0}},Et="_showAll_hw3c2_17",Ot={showAll:Et},[Rt]=M("pages-report-empty-text"),_e=G({name:Rt,props:$t,emits:["clickAll"],setup(t,{emit:a}){const{t:l}=W(),T=Se().isCN?"":" ",o=j(()=>{var f,h;return(h=(f=ne.value)==null?void 0:f.find(A=>A.value===t.value))==null?void 0:h.label}),m=j(()=>t.value!==L.ALL);return()=>e(De,null,[m.value?e("span",null,[o.value+T+l("lobby.event.luckyWheel.tabs.noData"),Y("ï¼Œ"),l("lobby.center.components.dateRadio.can")+T,e("span",{onClick:()=>{a("clickAll")},class:Ot.showAll},[l("lobby.game.galaxyGold.seeMore")])]):e("span",null,[l("lobby.event.luckyWheel.tabs.noData")])])}}),Dt={behavior:"smooth",block:"nearest",inline:"nearest"},ve={created(t,a){const l=t;l.ck=()=>{l.scrollIntoView({...Dt,...a.value})},t.addEventListener("click",l.ck)},unmounted(t){const a=t;t.removeEventListener("click",a.ck)}};function Pt(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!re(t)}const[Wt]=M("pages-report-account"),zt=G({name:Wt,directives:{view:ve},setup(){const{walletType:t,typeList:a,dealTypeList:l,isShowBonus:d,loadingTypes:T,form:o,loading:m,finished:f,list:h,listError:A,totalData:n,loadData:v,showAll:$}=Ue(),{t:I}=W(),w=k=>{Ne({className:r.accountTipsContent,title:I("lobby.finance.withdraw.details.remark"),message:k,showConfirmButton:!1,showCancelButton:!1,showCloseButton:!0})};return()=>{let k;return e("div",{class:r["account-main"]},[e(X,{draggable:!0,direction:"x",class:r.scroll,scrollbarTrigger:"none"},{default:()=>[e("div",{class:r.form},[D(e("div",{class:r.formItem},[e(V,{modelValue:o.value.timeType,"onUpdate:modelValue":s=>o.value.timeType=s,onChange:v,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:ne.value,dropdownClassName:r.dropdownClassName},null)]),[[P("view")]]),d.value?D(e("div",{class:r.formItem},[e(V,{modelValue:o.value.walletType,"onUpdate:modelValue":s=>o.value.walletType=s,onChange:v,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:t.value,dropdownClassName:r.dropdownClassName},null)]),[[P("view")]]):null,D(e("div",{class:r.formItem},[e(V,{modelValue:o.value.type,"onUpdate:modelValue":s=>o.value.type=s,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",isDisabled:T.value,options:a.value,dropdownClassName:r.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:r.formItem},[e(V,{modelValue:o.value.dealType,"onUpdate:modelValue":s=>o.value.dealType=s,onChange:v,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",placement:"bottom-end",isDisabled:T.value,options:l.value,dropdownClassName:r.dropdownClassName},null)]),[[P("view")]])])]}),e(X,{class:[r.data,""]},{default:()=>[e(me,{finished:f.value,error:!!A.value,loading:m.value,onLoad:v,onRetry:v,class:r.dataList,emptyText:e(_e,{value:o.value.timeType,onClickAll:()=>{$()}},null)},Pt(k=h.value.map(s=>e(It,{source:s,onOpenRemark:w,key:s.uuid},null)))?k:{default:()=>[k]})]}),e(At,{totalData:n},null)])}}}),Ce=()=>{const{t}=W(),a=N(),l=N();Q(a,v=>{v?n(v):o()});const d=N(),T=N(),o=()=>{const v={value:0,label:t("lobby.center.components.categorySelect.allPlatformCategory")};T.value=[{...v}],d.value=v.value};Q(d,v=>{v?n(null,v):h()});const m=N(),f=N(),h=()=>{const v={value:0,label:t("lobby.center.components.categorySelect.alGameCategory")};f.value=[{...v}],m.value=v.value},A=N(!1),n=async(v=null,$=null)=>{A.value=!0;try{const I={gameCategoryId:v,platformId:$};!v&&a.value&&(I.gameCategoryId=a.value);const{category:w,platform:k,gameList:s}=await Ve(I),i=fe.enable?w:w==null?void 0:w.filter(y=>y.categoryId!==Ae.ClubRoom);!v&&!$&&(l.value=i?[{categoryId:0,categoryName:t("lobby.center.components.categorySelect.allCategory")},...i].map(y=>({value:y.categoryId,label:y.categoryName})):[{value:0,label:t("lobby.center.components.categorySelect.allCategory")}],a.value=l.value[0].value,o(),h()),v&&(T.value=k?[{platformId:0,platformName:t("lobby.center.components.categorySelect.allPlatformCategory")},...k].map(y=>({value:y.platformId,label:y.platformName})):[{value:0,label:t("lobby.center.components.categorySelect.allPlatformCategory")}],d.value=T.value[0].value),$&&(f.value=s?[{gameId:0,gameName:t("lobby.center.components.categorySelect.alGameCategory")},...s].map(y=>({value:y.gameId,label:y.gameName})):[{value:0,label:t("lobby.center.components.categorySelect.alGameCategory")}],m.value=f.value[0].value)}finally{A.value=!1}};return se(()=>{a.value=null,d.value=null,m.value=null,n()}),{categoryList:l,platformList:T,gamesList:f,categoryId:a,platformId:d,gamesId:m,getIds:n,idLoading:A}},Vt=()=>{const{t}=W(),{userInfos:a}=we(ue()),l=j(()=>[{label:t("lobby.center.report.bettingRecord.all")||"Full state",value:oe.ALL},{label:t("lobby.center.report.bettingRecord.unsettled"),value:oe.UNSETTLEMENT},{label:t("lobby.center.report.bettingRecord.settled"),value:oe.SETTLED},{label:t("lobby.center.report.bettingRecord.canneled"),value:oe.REVOKE}]),{categoryList:d,platformList:T,gamesList:o,idLoading:m,categoryId:f,platformId:h}=Ce(),A=Object.freeze({account:0,settleStatus:0,gameCategoryId:0,platformId:0,gameIds:0,settleTimeStart:x().startOf("day").unix(),settleTimeEnd:x().unix(),timeType:0}),n=N({...A});Q(()=>n.value.gameCategoryId,p=>{f.value=p,n.value.platformId=0,n.value.gameIds=0},{deep:!0}),Q(()=>n.value.platformId,p=>{h.value=p,n.value.gameIds=0},{deep:!0}),Q(()=>n.value.timeType,p=>{let b=x().startOf("day").unix(),S=x().unix();p===L.TODAY&&(b=x().startOf("day").unix(),S=x().unix()),p===L.YESTERDAY&&(b=x().subtract(1,"day").startOf("day").unix(),S=x().subtract(1,"day").endOf("day").unix()),p===L.THIS_WEEK&&(b=x().startOf("week").unix(),S=x().unix()),p===L.LAST_WEEK&&(b=x().subtract(1,"week").startOf("week").unix(),S=x().subtract(1,"week").endOf("week").unix()),p===L.THIS_MONTH&&(b=x().startOf("month").unix(),S=x().unix()),p===L.LAST_MONTH&&(b=x().subtract(1,"month").startOf("month").unix(),S=x().subtract(1,"month").endOf("month").unix()),p===L.ALL&&(b=x().subtract(30,"day").startOf("day").unix(),S=x().unix()),n.value.settleTimeStart=b,n.value.settleTimeEnd=S});const{loading:v,finished:$,list:I,listError:w,loadData:k,reset:s}=ce(je,{immediate:!1,defaultPageSize:50,transformFn:p=>!p||!Array.isArray(p.data)?{total:0,data:[]}:{total:p.total,data:p.data.map(b=>{var S;return b.uuid=(S=b==null?void 0:b.uuid)!=null?S:pe(),b})},alias:{page:"current",pageSize:"size"},payload:n}),i=async(p=!1)=>{await k(p)},y=()=>{n.value.timeType=L.ALL,k(!0)};return se(()=>{var p;n.value.gameCategoryId=0,n.value.account=(p=a==null?void 0:a.value)==null?void 0:p.username,i(!0)}),{statusOptions:l,categoryList:d,platformList:T,gamesList:o,idLoading:m,queryData:i,loading:v,finished:$,list:I,listError:w,form:n,reset:s,showAll:y}},Bt="_loading_1wkmn_31",Ft="_form_1wkmn_35",Mt="_scroll_1wkmn_45",Gt="_data_1wkmn_50",qt="_betting_1wkmn_17",jt="_dataList_1wkmn_61",Ut="_red_1wkmn_67",Ht="_yellow_1wkmn_70",Yt="_darken_1wkmn_73",Zt="_hb_1wkmn_76",Kt="_light_1wkmn_79",Jt="_mr20_1wkmn_82",Qt="_green_1wkmn_85",Xt="_copy_1wkmn_88",ea="_hasTooltip_1wkmn_94",ta="_text_1wkmn_99",aa="_remark_1wkmn_102",la="_betterRecordMobileCell_1wkmn_106",oa="_combine_1wkmn_126",na="_game_1wkmn_131",sa="_validBet_1wkmn_141",ra="_flexCenter_1wkmn_163",ia="_createTime_1wkmn_169",ca="_noTitle_1wkmn_174",ua="_idText_1wkmn_182",da="_CommonCopy_1wkmn_187",ma="_autoEllipsis_1wkmn_199",pa="_dropdownClassName_1wkmn_209",_={"betting-main":"_betting-main_1wkmn_17",loading:Bt,form:Ft,scroll:Mt,data:Gt,betting:qt,dataList:jt,red:Ut,yellow:Ht,darken:Yt,hb:Zt,light:Kt,mr20:Jt,green:Qt,copy:Xt,hasTooltip:ea,text:ta,remark:aa,betterRecordMobileCell:la,combine:oa,game:na,validBet:sa,flexCenter:ra,createTime:ia,noTitle:ca,idText:ua,CommonCopy:da,autoEllipsis:ma,dropdownClassName:pa},[_a]=M("AccountList"),va=G({name:_a,props:{source:{type:Object,default:()=>({})},renderValidBet:{type:Function,default:()=>{}},renderNetProfit:{type:Function,default:()=>{}},renderTime:{type:Function,default:()=>{}}},setup(t){const{t:a}=W();return()=>{const{source:l,renderValidBet:d,renderNetProfit:T,renderTime:o}=t;return e("div",{class:[_.betterRecordMobileCell,_.light]},[e("p",{class:_.combine},[e("span",{class:_.game},[l.platformName,l.gameCategoryName,e("span",{class:_.darken},[Y("/"),l.gameName])]),e("span",{class:_.validBet},[e("span",{class:_.autoEllipsis},[e("span",null,[a("lobby.center.report.table.betting")]),e("span",{class:_.darken},[Y("Â "),d(l.validBet)])]),e("span",{class:_.autoEllipsis},[e("span",null,[a("lobby.center.report.table.win")]),e("span",null,[Y("Â "),T(l.netProfit)])])])]),e("p",{class:_.flexCenter},[e("span",{class:_.createTime},[o(l.settleStatus,l.settleTime)]),e("span",{class:_.noTitle},[a("lobby.center.report.table.no")]),e("span",{class:_.idText},[l.recordId]),e(Le,{class:_.CommonCopy,text:l.recordId},null)])])}}});function ya(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!re(t)}const[ga]=M("pages-report-betting"),ba=G({name:ga,directives:{view:ve},setup(){const{t}=W(),{statusOptions:a,categoryList:l,platformList:d,gamesList:T,idLoading:o,queryData:m,loading:f,finished:h,listError:A,form:n,list:v,showAll:$}=Vt(),I=s=>e("span",{class:_.darken},[q(s!=null?s:0,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString()]),w=(s,i)=>s===oe.UNSETTLEMENT?e("span",null,[t("lobby.center.report.bettingRecord.unsettled")]):e("span",null,[de(i,"ymdhms")]),k=s=>{const i=s>=0,y=q(s!=null?s:0,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString();return e("span",{class:[i?_.red:_.green]},[y])};return()=>{let s;return e("div",{class:_["betting-main"]},[e(X,{draggable:!0,direction:"x",class:_.scroll,scrollbarTrigger:"none"},{default:()=>[e("div",{class:_.form},[D(e("div",{class:_.formItem},[e(V,{onChange:m,modelValue:n.value.timeType,"onUpdate:modelValue":i=>n.value.timeType=i,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:ne.value,dropdownClassName:_.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:_.formItem},[e(V,{onChange:m,modelValue:n.value.settleStatus,"onUpdate:modelValue":i=>n.value.settleStatus=i,isDisabled:o.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:a.value,dropdownClassName:_.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:_.formItem},[e(V,{onChange:m,modelValue:n.value.gameCategoryId,"onUpdate:modelValue":i=>n.value.gameCategoryId=i,isDisabled:o.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:l.value,dropdownClassName:_.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:_.formItem},[e(V,{onChange:m,modelValue:n.value.platformId,"onUpdate:modelValue":i=>n.value.platformId=i,isDisabled:o.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:d.value,dropdownClassName:_.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:_.formItem},[e(V,{onChange:m,modelValue:n.value.gameIds,"onUpdate:modelValue":i=>n.value.gameIds=i,isDisabled:o.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",placement:"bottom-end",options:T.value,dropdownClassName:_.dropdownClassName},null)]),[[P("view")]])])]}),e(X,{class:[_.data,_.betting]},{default:()=>[e(me,{finished:h.value,error:!!A.value,loading:f.value,onLoad:m,onRetry:m,class:_.dataList,emptyText:e(_e,{value:n.value.timeType,onClickAll:()=>{$()}},null)},ya(s=v.value.map(i=>e(va,{key:i.uuid,source:i,renderTime:w,renderValidBet:I,renderNetProfit:k},null)))?s:{default:()=>[s]})]})])}}}),fa=()=>{var Z,te;const{categoryList:t,platformList:a,categoryId:l,platformId:d,idLoading:T}=Ce(),{userInfos:o}=we(ue()),m=N((te=(Z=ne.value)==null?void 0:Z[0])==null?void 0:te.value),f=N([]),h=N([]),A=N(!1),n=j(()=>{var E;return{gameCategoryId:l.value,platformId:d.value,account:"".concat((E=o==null?void 0:o.value)==null?void 0:E.username),timeType:m.value,startDate:x().startOf("day").unix(),endDate:x().unix()}}),{loading:v,finished:$,list:I,listError:w,loadData:k,reset:s}=ce(ze,{defaultPageSize:9999,immediate:!1,transformFn:E=>{var g;return!E||!Array.isArray(E)?{total:0,data:[]}:{total:(g=E.length)!=null?g:0,data:E.map(c=>{var C;return c.uuid=(C=c==null?void 0:c.uuid)!=null?C:pe(),c})}},payload:n}),i=Te({total_valid_bet:"",total_item_count:"",betitemNum:""}),y=async(E=!1)=>{var O,B,F,H,J,ae,le;E&&(f.value=[],h.value=[],b.value=z.DEF),await k(E),f.value=(O=I.value)!=null?O:[],h.value=(B=I.value)!=null?B:[];const g={time:"",timeType:(F=m.value)!=null?F:null,cate_id:l.value?l.value+"":"",platform_id:d.value?d.value+"":""},c=await he(g);A.value=c.total_item_count>=0,i.betitemNum=c.betitemNum+"";const C=be((J=(H=o==null?void 0:o.value)==null?void 0:H.currency)!=null?J:"CNY"),R=(C==null?void 0:C.gameRate)===1;i.total_valid_bet=q((ae=c.total_valid_bet)!=null?ae:0,{showGroup:!0,sign:R?"auto":!1}).toFixed({decimalPlaces:2,tailZero:!0}).toString(),i.total_item_count=q((le=c.total_item_count)!=null?le:0,{showGroup:!0,sign:R?"auto":!1}).toFixed({decimalPlaces:2,tailZero:!0}).toString(),ee()},p=()=>{m.value=L.ALL,y(!0)};se(()=>{y(!0)});const b=N(z.DEF),S=()=>{switch(b.value){case z.DEF:b.value=z.ASC;break;case z.ASC:b.value=z.DESC;break;case z.DESC:b.value=z.DEF;break}ee()},ee=()=>{const E=[...h.value];switch(b.value){case z.ASC:f.value=E.sort((g,c)=>c.netProfit-g.netProfit);break;case z.DESC:f.value=E.sort((g,c)=>g.netProfit-c.netProfit);break;default:f.value=E;break}};return{finished:$,listError:w,queryData:y,timeType:m,platformId:d,platformList:a,categoryList:t,categoryId:l,idLoading:T,sortState:b,loading:v,dataList:f,dataTotal:i,isWin:A,handleSort:S,showAll:p,reset:s}},Ta="_loading_p1xn9_31",wa="_formlayout_p1xn9_35",ha="_scroll_p1xn9_40",Ca="_form_p1xn9_35",xa="_data_p1xn9_56",ka="_betting_p1xn9_64",Sa="_dataList_p1xn9_67",Na="_footer_p1xn9_73",Aa="_hb_p1xn9_117",La="_win_p1xn9_121",Ia="_lose_p1xn9_125",$a="_recharge_p1xn9_129",Ea="_reflect_p1xn9_133",Oa="_finance_p1xn9_137",Ra="_mobileCell_p1xn9_141",Da="_f22_p1xn9_154",Pa="_f24_p1xn9_157",Wa="_flexAround_p1xn9_160",za="_flexBetween_p1xn9_164",Va="_leftTitle_p1xn9_168",Ba="_alignRight_p1xn9_182",Fa="_dealTypeName_p1xn9_185",Ma="_game_p1xn9_220",Ga="_red_p1xn9_228",qa="_yellow_p1xn9_231",ja="_darken_p1xn9_234",Ua="_light_p1xn9_240",Ha="_mr20_p1xn9_243",Ya="_green_p1xn9_246",Za="_copy_p1xn9_249",Ka="_hasTooltip_p1xn9_255",Ja="_text_p1xn9_260",Qa="_remark_p1xn9_263",Xa="_personalSortArea_p1xn9_267",el="_menuSortingText_p1xn9_280",tl="_longText_p1xn9_299",al="_triangle_p1xn9_302",ll="_bottomTriangle_p1xn9_309",ol="_bottomTriangleActive_p1xn9_315",nl="_topTriangle_p1xn9_318",sl="_topTriangleActive_p1xn9_325",rl="_dropdownClassName_p1xn9_328",u={"personal-main":"_personal-main_p1xn9_17",loading:Ta,formlayout:wa,scroll:ha,form:Ca,data:xa,betting:ka,dataList:Sa,footer:Na,break:"_break_p1xn9_89",hb:Aa,win:La,lose:Ia,recharge:$a,reflect:Ea,finance:Oa,mobileCell:Ra,f22:Da,f24:Pa,flexAround:Wa,flexBetween:za,leftTitle:Va,alignRight:Ba,dealTypeName:Fa,game:Ma,red:Ga,yellow:qa,darken:ja,light:Ua,mr20:Ha,green:Ya,copy:Za,hasTooltip:Ka,text:Ja,remark:Qa,personalSortArea:Xa,menuSortingText:el,longText:tl,triangle:al,bottomTriangle:ll,bottomTriangleActive:ol,topTriangle:nl,topTriangleActive:sl,dropdownClassName:rl},[il]=M("PersonalFooter"),cl=G({name:il,props:{isWin:{type:Boolean,default:!1},dataTotal:{type:Object,default:()=>({total_valid_bet:"",total_item_count:"",betitemNum:""})}},setup(t){const{t:a}=W();return()=>{const{dataTotal:l,isWin:d}=t;return e("div",{class:u.footer},[e("span",{class:u.break},[e("span",null,[a("lobby.center.report.statistics.betSlip")]),e("span",{class:u.hb},[l.betitemNum])]),e("span",{class:u.break},[e("span",null,[a("lobby.center.report.statistics.validBetTotal")]),e("span",{class:u.hb},[l.total_valid_bet])]),e("span",{class:u.break},[e("span",null,[a("lobby.center.report.statistics.profitTotal")]),e("span",{class:{[u.win]:d,[u.lose]:!d}},[l.total_item_count])])])}}}),[ul]=M("PersonalList"),dl=G({name:ul,props:{source:{type:Object,default:()=>({})}},setup(t){const{t:a}=W();return()=>{const{source:l}=t;return e("div",{class:u.mobileCell},[e("ul",{class:u.light},[e("li",null,[e("p",{class:u.game},[e("span",null,[l.platformName,Y("Â "),l.gameCategoryName,Y("/")]),e("span",{class:u.darken},[l.gameName])]),e("p",null,[e("label",null,[a("lobby.center.report.table.betSlip")]),e("span",{class:u.darken},[l.betitemNum])]),e("p",null,[e("label",null,[a("lobby.center.report.table.historyBetting")]),e("span",{class:u.darken},[q(l.validBet,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString()])])]),e("li",null,[e("p",null,[de(l.dateTimestamp/1e3,"ymd")]),e("p",null,[e("label",null,[a("lobby.promote.directBetting.totoalProfit")]),e("span",{class:u.darken},[l.netProfit>=0?e("span",{class:u.red},[q(l.netProfit,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString()]):e("span",{class:u.green},[q(l.netProfit,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString()])])])])])])}}});function ml(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!re(t)}const[pl]=M("pages-report-personal"),_l=G({name:pl,directives:{view:ve},setup(){const{t}=W(),{queryData:a,timeType:l,platformId:d,platformList:T,categoryList:o,categoryId:m,idLoading:f,sortState:h,loading:A,finished:n,listError:v,dataList:$,dataTotal:I,isWin:w,handleSort:k,showAll:s}=fa();return()=>{let i;return e("div",{class:u["personal-main"]},[e("div",{class:u.formlayout},[e(X,{draggable:!0,direction:"x",class:u.scroll,scrollbarTrigger:"none"},{default:()=>[e("div",{class:u.form},[D(e("div",{class:u.formItem},[e(V,{onChange:a,modelValue:l.value,"onUpdate:modelValue":y=>l.value=y,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:ne.value,dropdownClassName:u.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:u.formItem},[e(V,{onChange:a,modelValue:m.value,"onUpdate:modelValue":y=>m.value=y,isDisabled:f.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:o.value,dropdownClassName:u.dropdownClassName},null)]),[[P("view")]]),D(e("div",{class:u.formItem},[e(V,{onChange:a,modelValue:d.value,"onUpdate:modelValue":y=>d.value=y,isDisabled:f.value,size:"mini",zIndex:10,round:!0,autoWidth:!0,minWidth:"auto",fillMode:"neutral_2",options:T.value,dropdownClassName:u.dropdownClassName},null)]),[[P("view")]])])]}),D(e("div",{class:u.personalSortArea,onClick:k},[e("p",{class:u.menuSortingText},[t("lobby.selfoperatedGames.sports.sortPlaceholder")]),e("span",{class:u.triangle},[e("span",{class:{[u.topTriangle]:!0,[u.topTriangleActive]:h.value===z.DESC}},null),e("span",{class:{[u.bottomTriangle]:!0,[u.bottomTriangleActive]:h.value===z.ASC}},null)])]),[[P("view")]])]),e(X,{class:u.data},{default:()=>[e(me,{finished:n.value,error:!!v.value,loading:A.value,onLoad:a,onRetry:a,class:u.dataList,emptyText:e(_e,{value:l.value,onClickAll:()=>{s()}},null)},ml(i=$.value.map(y=>e(dl,{source:y,key:y.uuid},null)))?i:{default:()=>[i]})]}),e(cl,{dataTotal:I,isWin:w.value},null)])}}}),vl="_tabs_1y66z_17",yl={tabs:vl};function ge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!re(t)}const[gl]=M("pages-report"),Ll=G({name:gl,setup(){const{t}=W(),a=j(()=>[{label:t("lobby.center.report.tabs.accountDetails"),value:K.ACCOUNT},{label:t("lobby.center.report.tabs.bettingRecord"),value:K.BETTING},{label:t("lobby.center.report.tabs.personalStatement"),value:K.PERSONAL}]),l={[K.ACCOUNT]:e(zt,null,null),[K.BETTING]:e(ba,null,null),[K.PERSONAL]:e(_l,null,null)},{activeTab:d,replaceRouterToActiveTab:T}=Re({queryKey:"reportCurrent",defautActiveTab:K.ACCOUNT});return()=>e(Oe,null,{header:()=>{let o;return e(Ie,null,ge(o=t("lobby.center.report.title"))?o:{default:()=>[o]})},default:()=>{let o;return e($e,{active:d.value,"onUpdate:active":m=>d.value=m,tabVShowMode:!1,lazyRender:!1,shrink:!0,animated:!0,class:yl.tabs,onChange:T},ge(o=a.value.map(m=>e(Ee,{name:m.value,title:()=>m.label},{default:()=>l[m.value]})))?o:{default:()=>[o]})}})}});export{Ll as default};
//# sourceMappingURL=ReportIndex.BFK2F3-M.js.map
