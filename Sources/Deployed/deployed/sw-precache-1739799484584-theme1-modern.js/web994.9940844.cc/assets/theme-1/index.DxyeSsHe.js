import{aE as c,az as R}from"./main.C8q1iJMV.js";import{d as A}from"../vendors/vendor-stable.LD58Pbb3.js";import{e as U}from"../vendors/vendor-default.CjiYZF7Q.js";import{h as q,r as o,f as I,w as P}from"../vendors/vendor-@vue.DNlpgob2.js";const K=async e=>c.request({url:"customer/receiveAward",method:"POST",data:e}),N=e=>c.upload({url:"/customer/uploadFile",data:e},{crypto:{enable:!1}}).then(t=>t.data.data),z=e=>c.request({url:"/customer/feedback",method:"POST",data:e}).then(t=>t.data.data),x=e=>c.request({url:"/customer/getUserFeedback",method:"POST",data:e}).then(t=>t.data.data),G=e=>c.request({url:"/customer/getAwardInfo",method:"POST",data:e}).then(t=>t.data.data),B=A("feedback",()=>{const e=q({hasCreateNewFeedback:!1,availableRewards:0,unRead:0,getUserFeedbackAxiosError:null,activeKey:"0"}),t=o({}),k=a=>{e.hasCreateNewFeedback=a},h=a=>{e.unRead=a},F=a=>{e.activeKey=a},g=a=>{t.value=a},{hasLogined:d}=R(),i=10,s=o(1),n=o({}),u=o(0),v=o(!1),w=async()=>{var m,p;l(!0);const[a,r]=await U(x({page:s.value,pageSize:i}));if(l(!1),a){e.getUserFeedbackAxiosError=a;return}const f=r.result||[];return e.availableRewards=(m=r.availableRewards)!=null?m:0,e.unRead=(p=r==null?void 0:r.unRead)!=null?p:0,n.value={...n.value,[s.value]:f},u.value=r.count,e.getUserFeedbackAxiosError=null,f},b=async a=>{if(a!==void 0&&(s.value=a),!!d)return w()},l=a=>{v.value=a},S=()=>{s.value=1,n.value={},u.value=0},y=I(()=>{var a;return(a=n.value[s.value])!=null?a:[]});return P(()=>d,async()=>{d&&b(0)}),{state:e,feedbackItem:t,setHasCreateNewFeedback:k,setUnRead:h,setActiveKey:F,setFeedbackItem:g,data:y,total:u,pageSize:i,isFetching:v,currentPage:s,getFeedBackData:b,setFetching:l,reset:S}},{persist:{paths:["feedbackItem"],storage:localStorage}});export{z as a,N as b,K as c,G as d,B as u};
//# sourceMappingURL=index.DxyeSsHe.js.map
