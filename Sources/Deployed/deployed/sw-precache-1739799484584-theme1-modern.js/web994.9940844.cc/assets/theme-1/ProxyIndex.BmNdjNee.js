import{a as F,E as U}from"./props.DdPRoj_x.js";import{s as T}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as _}from"./index.BB5bZn2v.js";import{a as L,Z as M,bq as g,U as O,ly as h,cm as Y,bQ as d,eI as N,iX as G,bL as K,ca as f,w as Q,aE as V,lC as W,bu as X,lB as $,a6 as Z,q as z}from"./main.C8q1iJMV.js";import{a as b,E as H}from"./proxy.CBmEh2tc.js";import{T as J}from"./index.SS2HDjZq.js";import{l as E,E as q,f as i,p as n,r as ee,A as te}from"../vendors/vendor-@vue.DNlpgob2.js";import{P as ne}from"./PublicIntroductionIndex.bUl03y0X.js";import{B as re}from"./BottomReceiveIndex.D3vCadgd.js";import{a as ae}from"./activeReceiveOne.CY32GsDi.js";import{d as oe}from"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"./Table.CBQduS50.js";const se="_list_pr6i8_17",le="_value_pr6i8_20",ue="_yellow_pr6i8_40",ce="_err_pr6i8_43",ie="_netRetry_pr6i8_49",ye="_currency_pr6i8_52",ve="_table_pr6i8_55",pe="_text_pr6i8_68",p={list:se,value:le,yellow:ue,err:ce,netRetry:ie,currency:ye,table:ve,text:pe},[me]=O("event-item-modes-proxy-components-list"),de=E({name:me,setup(){const s=q("refreshData"),{t}=L(),m=_(),{itemErr:a,eventItemData:y}=T(m),e=i(()=>y.value.activeData),l=i(()=>{var c,o;const r=(o=(c=e==null?void 0:e.value)==null?void 0:c.ruleText)==null?void 0:o.staticType,v={[h.Daily]:{0:r===b.Recharge?t("lobby.event.proxy.dayPay.0"):t("lobby.event.proxy.day.0"),1:r===b.Recharge?t("lobby.event.proxy.dayPay.1"):t("lobby.event.proxy.day.1"),2:t("lobby.event.proxy.day.2")},[h.Weekly]:{0:r===b.Recharge?t("lobby.event.proxy.weekPay.0"):t("lobby.event.proxy.week.0"),1:r===b.Recharge?t("lobby.event.proxy.weekPay.1"):t("lobby.event.proxy.week.1"),2:t("lobby.event.proxy.week.2")},[h.Monthly]:{0:r===b.Recharge?t("lobby.event.proxy.monthPay.0"):t("lobby.event.proxy.month.0"),1:r===b.Recharge?t("lobby.event.proxy.monthPay.1"):t("lobby.event.proxy.month.1"),2:t("lobby.event.proxy.month.2")}};return a.value?[t("lobby.event.proxy.day.0"),t("lobby.event.proxy.day.1"),t("lobby.event.proxy.day.2")]:v[y.value.cycleType]||""}),x=i(()=>{var v,c;const r=((c=(v=e==null?void 0:e.value)==null?void 0:v.ruleText)==null?void 0:c.reward_type)===H.RATE;return[{title:l.value[1],dataIndex:"amount",key:"amount",customRender:o=>n("span",{class:p.text},["â‰¥".concat(g(o,0))])},{title:t("lobby.event.proxy.otherReward")+"".concat(r?"(%)":""),dataIndex:r?"reward_rate":"reward",key:r?"reward_rate":"reward",customRender:o=>n("span",{class:p.yellow},[r?o:g(o),r?"%":""])}]});return()=>{var c,o;const{commissionAmount:r,currentProfit:v}=(e==null?void 0:e.value)||{};return n("div",{class:p.list},[n("section",{class:[p.value]},[n("div",null,[n("span",null,[l.value[0]]),a.value?n(M,{onRetry:s},null):n("span",{class:[p.err,p.currency]},[g(r)])]),n("div",null,[n("span",null,[l.value[2]]),a.value?n(M,{onRetry:s},null):n("span",{class:[p.yellow,p.currency]},[g(v)])])]),n(J,{class:p.table,columns:x.value,uniqueKey:"proxy-list",data:(o=(c=e==null?void 0:e.value)==null?void 0:c.ruleText)==null?void 0:o.rule_list},null)])}}}),D={},[be]=O("event-item-modes-proxy-components-receive-button"),xe=E({name:be,setup(){const{t:s}=L(),t=_(),m=q("refreshData"),{eventItemData:a}=T(t),y=ee(!1),e=i(()=>a.value.activeData),l=i(()=>{var u;return(u=e.value)==null?void 0:u.receiveStatus}),x=i(()=>[d.PendingCheck,d.PendingApply].some(u=>u===l.value)),r=i(()=>(a==null?void 0:a.value.giveType)===N.ManualDistribution&&x.value),v=i(()=>r.value?l.value===d.PendingApply:[d.CanReceive,d.PendingCheck].some(u=>u===l.value)),c=i(()=>{var u;return r.value?v.value?s("lobby.modal.task.applyAward"):s("lobby.modal.task.applied"):l.value===d.Processing?s("lobby.modal.task.collect"):G((u=e==null?void 0:e.value)==null?void 0:u.receiveStatus)}),o=oe(async()=>{var w,P,I,k,C,S,A,B;const u={receiveDeviceType:(w=a.value)==null?void 0:w.receiveDeviceType,receiveStatus:(P=e.value)==null?void 0:P.receiveStatus,receiveCategory:(I=e.value)==null?void 0:I.logCategory,amount:(k=e.value)==null?void 0:k.currentProfit,taskCondition:(C=a.value)==null?void 0:C.taskCondition};if(await K.check({eventData:u,checkOptions:{[f.forbidReceive]:!0,[f.receiveType]:!0,[f.task]:!0,[f.largeAmount]:!0,[f.pendingCheck]:!0}})||y.value)return;y.value=!0;const j=String(e.value.receiveId),R=((S=a.value)==null?void 0:S.giveType)===N.ManualDistribution&&(e==null?void 0:e.value.receiveStatus)===d.PendingApply;ae({params:{receiveId:j,activeId:Number(a.value.id)},showSuccessModal:!1,onSuccess:async()=>{Q.success({message:s(R?"lobby.event.invest.applySuccess":"lobby.event.invest.receiveSuccess")}),await V.setCacheExpired(W),X().getEventCategoriesAndEvents()},judgeResBefore:()=>{y.value=!1,m==null||m()},animateType:((B=(A=e==null?void 0:e.value)==null?void 0:A.commissionAmount)!=null?B:0)>=10?$.TYPE_2:$.TYPE_1,showAudio:!R})},300);return()=>n(re,{eventItemData:a.value,class:D.bottomReceive},{default:()=>[n(Y,{class:D.btns,type:"success",onClick:o,disabled:!v.value,loading:!!y.value},{default:()=>[c.value]})]})}}),fe="_main_1frgc_17",ge={main:fe},[he]=z("event-item-modes-proxy"),qe=E({name:he,props:{...F,eventId:Number},emits:["marginTypeChange"],setup(s,{emit:t}){const m=_(),{eventItemData:a,isItemLoading:y,itemErr:e}=T(m),l=async()=>{s.eventId&&m.refreshEventItemDetail(s.eventId)},x=i(()=>y.value?"nested-loading":e.value?"retry":null);return te("refreshData",l),t("marginTypeChange",U.BOTTOM_BTN),()=>n(Z,{type:x.value,class:ge.main,onRetry:l},{default:()=>[n(de,null,null),n(ne,{eventData:a.value},null),n(xe,null,null)]})}});export{qe as default};
//# sourceMappingURL=ProxyIndex.BmNdjNee.js.map
