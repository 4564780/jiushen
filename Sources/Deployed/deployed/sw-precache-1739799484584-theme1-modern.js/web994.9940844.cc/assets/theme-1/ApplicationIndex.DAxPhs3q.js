import{u as U}from"./index.LCSohmSD.js";import{fw as Ge,aP as B,a as R,bG as me,a1 as Ye,eD as Se,aa as X,q as T,_ as Ne,w as Q,aS as K,aU as je,I as M,a4 as O,az as pe,a0 as Ie,gH as ze,fT as ue,R as Fe,gI as ge,fV as ve,dM as Le,gw as Ue,Y as le,E as $e,b as Je,gJ as Ze,fn as Ke,m as Xe,bt as Qe,a3 as ea,fS as aa,by as ta,gK as Te,dN as oa,B as la,v as na}from"./main.C8q1iJMV.js";import{b as h,d as W,i as P,E as ra}from"./enum.CcXhH6KG.js";import{r as Pe,d as L,e as we}from"../vendors/vendor-default.CjiYZF7Q.js";import{u as sa}from"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{h as ca,f as v,l as w,E as k,p as e,v as j,r as g,w as be,y as ia,bM as ma,C as Me,A as se,n as Re,o as ua}from"../vendors/vendor-@vue.DNlpgob2.js";import{c as _e,d as da,o as ce}from"../vendors/vendor-lodash.BYdGDldS.js";import{D as Ce}from"./index.CnQRgKzx.js";import{P as pa}from"./index.DpvTgJML.js";import{c as ba,a as _a,u as ya}from"./useFileUpload.njlonVJS.js";import{U as ha}from"./UploadIndex.CYQY2hWp.js";import{R as fa}from"./RuleRichText.Cs829s5P.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const ga=()=>{const n=U(),l={claimType:void 0,claimTypeName:"",startTime:0,endTime:0,dataRangeText:"",claimAmount:"",withdrawAccount:void 0,withdrawAccountId:void 0,bankName:"",notifyEmail:"",abnormalRecords:void 0,reason:"",password:"",fileList:[],submit:!1,originalAbnormalRecords:[]},a=ca({...l}),o=v(()=>Object.keys(l).every(c=>JSON.stringify(a[c])===JSON.stringify(l[c]))),r=c=>{a.claimType=c.value,a.claimTypeName=c.label,a.startTime=0,a.endTime=0,a.dataRangeText="",n.abnormalRecordList=null},s=c=>{a.startTime=c.startTime,a.endTime=c.endTime,a.dataRangeText="".concat(c.displayedStartDate," - ").concat(c.displayedEndDate),t()},m=c=>{a.withdrawAccount=c.account,a.withdrawAccountId=c.id,a.bankName=c.withdrawTypeName||c.bankName},t=()=>{const c={size:999,timeType:Ge.LAST_THIRTY_DAY,claimType:a.claimType,startTime:a.startTime,endTime:a.endTime};n.getAbnormalRecord(c)};return{defaultFormData:l,formData:a,isFormUnchanged:o,changeClaimType:r,changeDate:s,changeWithdrawAccount:m,changeAbnormalRecords:()=>{a.abnormalRecords=n.orderList},changeUpload:c=>{a.fileList=c}}},va={show:B,claimType:{type:Number,required:!0}},Ta="_abnormalRecordsModal_v0kr2_17",wa="_listBox_v0kr2_27",Ra="_ml20_v0kr2_67",Ca="_listBoxTitle_v0kr2_71",Aa="_textLeft_v0kr2_85",Da="_listItem_v0kr2_88",xa="_amount_v0kr2_114",Ea="_rightChecked_v0kr2_120",ka="_checked_v0kr2_135",N={abnormalRecordsModal:Ta,listBox:wa,ml20:Ra,listBoxTitle:Ca,textLeft:Aa,listItem:Da,"create-time":"_create-time_v0kr2_101","order-money":"_order-money_v0kr2_108",amount:xa,rightChecked:Ea,checked:ka},[Sa]=T("pages-rules-modal"),Na=w({name:Sa,props:va,emits:["update:show","change"],setup(n,{emit:l}){const{t:a}=R(),o=U(),r=k("formData"),s=d=>l("update:show",d),m=()=>{s(!1)},t=v(()=>r.claimType===h.MANUAL_DEDUCTION?a("lobby.center.claim.claimForm.abnormalDeductionRecords"):a("lobby.center.claim.claimForm.abnormalRecordsText")),i=v(()=>o.abnormalRecordListActive),p=d=>Ne(d,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString(),c=(d,b)=>{const y=i.value.filter(u=>u.isChecked);d&&y.length>20&&(Q.error({message:()=>a("lobby.center.claim.claimForm.maxChoose",{x:20})}),b.isChecked=!1)};return()=>{var d,b,y;return e(X,{class:N.abnormalRecordsModal,title:t.value,show:n.show,"onUpdate:show":u=>n.show=u,onClose:m,showCancelButton:!!((d=i.value)!=null&&d.length),showConfirmButton:!!((b=i.value)!=null&&b.length),showCloseButton:!((y=i.value)!=null&&y.length),onConfirm:()=>{o.abnormalRecordList=_e(o.abnormalRecordListActive),l("change"),m()},onCancel:()=>{m()}},{default:()=>{var u,_,f,x;return[e("div",{class:[N.selectBox,[((_=(u=i.value)==null?void 0:u.length)!=null?_:0)<8?N.ml20:""]]},[e("div",null,[e("ul",{class:N.listBoxTitle},[e("li",null,[a("lobby.center.report.table.time")]),e("li",{class:N.textLeft},[a("lobby.center.report.table.orderAndAmount")])]),(f=i.value)!=null&&f.length?e("div",{class:N.listBox},[(x=i.value)!=null&&x.length?i.value.map(D=>e("div",{key:D.orderNo,class:N.listItem},[e("p",{class:N["create-time"]},[me(D.createTime)]),e("p",{class:N.rightChecked},[e("p",{class:N["order-money"]},[e("span",null,[!!D.orderNo&&"*".concat(D.orderNo.slice(-4))]),e("span",{class:N.amount},[j("("),p(D.money),j(")")])]),e(Ye,{class:N.checked,modelValue:D.isChecked,"onUpdate:modelValue":V=>D.isChecked=V,onChange:V=>{c(V,D)}},null)])])):""]):e(Se,{text:a("lobby.event.luckyWheel.tabs.noData")},null)])])]}})}}}),Ia={icon:K(""),placeholder:K(""),value:{type:[String,Object]},isRequire:B,isBold:je},Fa="_selectTriggerElement_822q3_17",La="_icon_822q3_29",Ua="_require_822q3_33",$a="_placeholder_822q3_41",Pa="_value_822q3_44",Ma="_bankP_822q3_47",Oa="_bankName_822q3_52",qa="_bold_822q3_58",Ba="_rightIcon_822q3_61",Va="_showList_822q3_71",Ha="_order_822q3_83",$={selectTriggerElement:Fa,icon:La,require:Ua,placeholder:$a,value:Pa,bankP:Ma,bankName:Oa,bold:qa,rightIcon:Ba,showList:Va,order:Ha},[Wa]=T("select-trigger-element"),ne=w({name:Wa,props:Ia,emits:["handleClick"],setup(n,{emit:l}){const a=()=>l("handleClick");return()=>e("div",{class:$.selectTriggerElement,onClick:a},[e(M,{class:$.icon,src:n.icon},null),e("span",{class:$.require},[n.isRequire&&"*"]),n.value?e("span",{class:{[$.value]:!0,[$.bold]:n.isBold}},[n.value]):e("span",{class:$.placeholder},[n.placeholder]),e("div",{class:[$.rightIcon,"rightIcon"]},[e(M,{class:$.icon,src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])])}}),Ga="_abnormalRecords_1qw3w_17",Ya="_orderBox_1qw3w_17",ja="_order_1qw3w_17",za="_icon_1qw3w_35",ee={abnormalRecords:Ga,orderBox:Ya,order:ja,icon:za},[Ja]=T("form-abnormal-records"),Za=w({name:Ja,emits:["changeAbnormalRecords"],setup(n,{emit:l}){const{t:a}=R(),o=U(),r=k("formData"),s=g(),m=g(!1),t=()=>o.orderList.length?!0:i.value,i=v(()=>(r==null?void 0:r.claimType)===h.MANUAL_DEDUCTION?a("lobby.center.claim.claimForm.abnormalDeductionRecordsPlaceholder"):a("lobby.center.claim.claimForm.abnormalRecordsPlaceholder")),p=y=>{var u;l("changeAbnormalRecords",y),(u=s.value)==null||u.validate()},c=(y,u)=>{u.stopPropagation();const _=o.abnormalRecordList.find(f=>f.orderNo===y);_&&(_.isChecked=!1)},d=y=>Ne(y,{showGroup:!0}).toFixed({decimalPlaces:2,tailZero:!0}).toString(),b=()=>{var y,u;return e("div",{class:ee.orderBox},[(u=(y=o.abnormalRecordList)==null?void 0:y.filter(_=>_.isChecked).map(_=>e("span",{key:_.orderNo,class:ee.order},["*"+_.orderNo.slice(-4),e("b",{onClick:f=>{c(_.orderNo,f)}},["(".concat(d(_.money),")"),e(M,{class:ee.icon,src:"/lobby_asset/common/web/common/comm_icon_qc.svg"},null)])])))!=null?u:""])};return()=>e("div",null,[e(O,{class:ee.abnormalRecords,name:"abnormalRecords",rules:t,validateTrigger:"onBlur",required:!0,ref:s},{default:()=>[e(ne,{icon:"/lobby_asset/common/web/common/input_icon_bzbh.svg",placeholder:i.value,value:o.orderList.length?b():"",onHandleClick:()=>{if(!r.endTime){Q({type:"error",message:()=>a("lobby.center.claim.claimForm.timePlaceholder")},"flush");return}o.abnormalRecordListActive=_e(o.abnormalRecordList),m.value=!0}},null)]}),e(Na,{show:m.value,"onUpdate:show":y=>m.value=y,onChange:p},null)])}}),Ka={formData:{type:Object,required:!0}},Xa="_applyCriteria_1doz9_17",Qa="_title_1doz9_22",et="_importantReminder_1doz9_29",at="_bold_1doz9_40",z={applyCriteria:Xa,title:Qa,importantReminder:et,bold:at},[tt]=T("form-apply-criteria"),ot=w({name:tt,props:Ka,emits:["changeClaimType"],setup(n){const{t:l}=R(),a=v(()=>({[h.VIOLATION_NO_REFUND]:{criteria:[l("lobby.center.claim.applyCriteria.criteria1"),l("lobby.center.claim.applyCriteria.criteria2")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder1")},[h.FALSE_MANUAL_WITHDRAWAL]:{criteria:[l("lobby.center.claim.applyCriteria.criteria3")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder2")},[h.MANUAL_DEDUCTION]:{criteria:[l("lobby.center.claim.applyCriteria.criteria9"),l("lobby.center.claim.applyCriteria.criteria10")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder3")},[h.LARGE_WITHDRAWAL_REJECTED]:{criteria:[l("lobby.center.claim.applyCriteria.criteria4"),l("lobby.center.claim.applyCriteria.criteria14"),l("lobby.center.claim.applyCriteria.criteria8")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder2")},[h.HIGH_PROFIT_REJECTED]:{criteria:[l("lobby.center.claim.applyCriteria.criteria6"),l("lobby.center.claim.applyCriteria.criteria13"),l("lobby.center.claim.applyCriteria.criteria8")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder2")},[h.ACCOUNT_FUNDS_STOLEN]:{criteria:[l("lobby.center.claim.applyCriteria.criteria11"),l("lobby.center.claim.applyCriteria.criteria12")],importantReminder:l("lobby.center.claim.applyCriteria.importantReminder4")}})),o=v(()=>{var m;const r=(m=n.formData)==null?void 0:m.claimType;if(!r)return null;const s=a.value[r];if(s){const{criteria:t,importantReminder:i}=s;return e("div",{class:z.applyCriteria},[e("span",{class:z.title},[l("lobby.center.claim.applyCriteria.applyCriteria")]),t.map(p=>e("p",{key:p},[p])),e("div",{class:z.importantReminder},[e(M,{class:z.icon,src:"/lobby_asset/common/web/common/comm_icon_zyts.svg"},null),e("span",{class:z.bold},[l("lobby.center.claim.applyCriteria.importantReminder")]),e("span",null,[i])])])}return null});return()=>o.value}}),lt={modelValue:K("")},nt="_icon_f7ix2_26",rt="_require_f7ix2_29",ae={"claim-amount":"_claim-amount_f7ix2_17","mask-input":"_mask-input_f7ix2_20",icon:nt,require:rt},de=n=>{const l=v(()=>{const o=n.claimType,r=[h.FALSE_MANUAL_WITHDRAWAL,h.LARGE_WITHDRAWAL_REJECTED,h.MANUAL_DEDUCTION,h.HIGH_PROFIT_REJECTED,h.ACCOUNT_FUNDS_STOLEN];return o&&r.includes(o)}),a=v(()=>{const o=n.claimType,r=[h.VIOLATION_NO_REFUND,h.FALSE_MANUAL_WITHDRAWAL,h.LARGE_WITHDRAWAL_REJECTED,h.HIGH_PROFIT_REJECTED];return o&&r.includes(o)});return{isShowAbnormalRecordsSelect:l,isWithdrawalFormAccount:a}},[st]=T("pages-claim-amount"),ct=w({name:st,props:lt,emits:["update:modelValue"],setup(n,{emit:l}){const{userInfos:a}=pe(),{t:o}=R(),r=U(),s=k("formData"),{isShowAbnormalRecordsSelect:m}=de(s),t=v(()=>{var x;const u=s.claimType,_=(x=a==null?void 0:a.game_gold)!=null?x:0;let f=0;if(u===h.VIOLATION_NO_REFUND&&r.claimInfo){const{last30DaysDeposit:D=0}=r.claimInfo;f=+D<_?D:_}return f}),i=v(()=>{var _;let u=0;return(_=r.abnormalRecordList)==null||_.forEach(f=>{f.isChecked&&f.money&&(u+=Math.abs(f.money))}),u}),p=()=>{const u=s.claimAmount;return u?+t.value&&+u>+t.value?"".concat(o("lobby.center.claim.applyCriteria.amountSubmitTips")).concat(t.value):i.value&&+u>i.value?"".concat(o("lobby.center.claim.applyCriteria.amountSubmitTips")).concat(i.value):+u==0?o("lobby.center.claim.applyCriteria.claimAmountValid"):!0:o("lobby.center.claim.claimForm.claimAmountPlaceholder")},c=u=>{u=u.replace(/[^0-9]/g,""),u=ze(u),l("update:modelValue",u)},d=u=>{var f;const _=x=>{u.target.blur(),s.claimAmount="",Q({type:"error",message:x},"flush")};if(!s.claimType){_(o("lobby.center.claim.claimForm.claimTypePlaceholder"));return}if(!s.endTime){_(o("lobby.center.claim.claimForm.timePlaceholder"));return}if(m.value&&!((f=r.orderList)!=null&&f.length)){const x=(s==null?void 0:s.claimType)===h.MANUAL_DEDUCTION?o("lobby.center.claim.claimForm.abnormalDeductionRecordsPlaceholder"):o("lobby.center.claim.claimForm.abnormalRecordsPlaceholder");_(x)}},b=v(()=>{var u;return!s.claimType||!s.endTime||m.value&&!((u=r.orderList)!=null&&u.length)}),y=v(()=>{var u;return!s.claimType||!s.endTime||de(s).isShowAbnormalRecordsSelect.value&&!((u=r.orderList)!=null&&u.length)});return()=>e(O,{class:ae["claim-amount"],name:"claimAmount",validateTrigger:"onBlur",rules:p},{default:()=>[y.value&&e("div",{onClick:d,class:ae["mask-input"]},null),e(Ie,{value:s.claimAmount,"onUpdate:value":u=>s.claimAmount=u,clearable:!0,disabled:b.value,placeholder:o("lobby.center.claim.claimForm.claimAmountPlaceholder"),onChange:c},{prefix:()=>e("div",null,[e(M,{class:ae.icon,src:"/lobby_asset/common/web/common/input_icon_hb.svg"},null),e("span",{class:ae.require},[j("*")])])})]})}}),it={show:B,claimType:{type:Number,required:!0}},mt="_claimRulesModal_1l2c4_17",ut="_selectBox_1l2c4_24",dt="_row_1l2c4_29",pt="_cicle_1l2c4_41",bt="_selected_1l2c4_52",G={claimRulesModal:mt,selectBox:ut,row:dt,cicle:pt,selected:bt},[_t]=T("pages-rules-modal"),yt=w({name:_t,props:it,emits:["update:show","change"],setup(n,{emit:l}){const{t:a}=R(),o=U(),r=t=>l("update:show",t),s=()=>{r(!1)},m=v(()=>{if(!o.guaranteeRule)return[];const{t}=R(),{guaranteeType:i}=o.guaranteeRule;return[{label:t("lobby.center.claim.claimType1"),value:h.VIOLATION_NO_REFUND,isShow:!0},{label:t("lobby.center.claim.claimType2"),value:h.FALSE_MANUAL_WITHDRAWAL,isShow:!0},{label:t("lobby.center.claim.claimType3"),value:h.MANUAL_DEDUCTION,isShow:i===W.ADVANCED_WARRANTY||i===W.COMPREHENSIVE_WARRANTY},{label:t("lobby.center.claim.claimType4"),value:h.LARGE_WITHDRAWAL_REJECTED,isShow:i===W.ADVANCED_WARRANTY||i===W.COMPREHENSIVE_WARRANTY},{label:t("lobby.center.claim.claimType5"),value:h.HIGH_PROFIT_REJECTED,isShow:i===W.COMPREHENSIVE_WARRANTY},{label:t("lobby.center.claim.claimType6"),value:h.ACCOUNT_FUNDS_STOLEN,isShow:i===W.COMPREHENSIVE_WARRANTY}].filter(c=>c.isShow)});return()=>e(X,{class:G.claimRulesModal,title:a("lobby.center.claim.claimType"),show:n.show,"onUpdate:show":t=>n.show=t,onClose:s},{default:()=>[e("div",{class:G.selectBox},[m.value.map(t=>e("div",{class:G.row,key:t.value,onClick:()=>{l("change",t),s()}},[e("span",null,[t.label]),e("div",{class:{[G.cicle]:!0,[G.selected]:t.value===n.claimType}},[e(M,{class:G.icon,src:"/lobby_asset/common/web/common/comm_icon_gou.svg"},null)])]))])]})}}),[ht]=T("form-claim-type"),ft=w({name:ht,emits:["changeClaimType"],setup(n,{emit:l}){const{t:a}=R(),o=k("formData"),r=g(),s=g(!1),m=()=>Pe(o.claimType)?!0:a("lobby.center.claim.claimForm.claimTypePlaceholder"),t=v(()=>o.claimType===h.MANUAL_DEDUCTION?"/lobby_asset/common/web/common/input_icon_shangjia.svg":"/lobby_asset/common/web/common/input_icon_bank.svg"),i=p=>{var c;l("changeClaimType",p),(c=r.value)==null||c.validate()};return()=>e("div",null,[e(O,{ref:r,name:"claimType",rules:m,required:!0},{default:()=>[e(ne,{isBold:!0,icon:t.value,placeholder:a("lobby.center.claim.claimForm.claimTypePlaceholder"),value:o.claimTypeName,onHandleClick:()=>{s.value=!0}},null)]}),e(yt,{show:s.value,"onUpdate:show":p=>s.value=p,claimType:o.claimType,onChange:i},null)])}}),gt={formData:{type:Object,required:!0}},vt={startTimestamp:{type:Number,default:()=>L().utc().add(ue(),"hour").unix()},endTimestamp:{type:Number,default:()=>L().utc().add(ue(),"hour").unix()},limitSearchDays:{type:Number,default:90},limitDays:{type:Number,default:180},showDefaultDate:B},Tt="_start_qhdxi_37",wt="_line_qhdxi_41",Rt="_end_qhdxi_44",Y={"date-range":"_date-range_qhdxi_17","date-block":"_date-block_qhdxi_24",start:Tt,line:wt,end:Rt,"date-picker":"_date-picker_qhdxi_48"},[Ct]=T("date-select"),At=w({name:Ct,props:vt,emits:["change","cancel"],setup(n,{emit:l}){const{t:a}=R(),o=g(!1),r=ue(),s=L().utc().add(r,"hour"),m=[s.format("YYYY"),s.format("MM"),s.format("DD")],t=g(m),i=g(m),p=g(),c=g(),d=v(()=>t.value.join("-")),b=v(()=>i.value.join("-")),y=()=>{o.value=!1;const S=ve(d.value),q=ve(b.value,!0);p.value=t.value,c.value=i.value,l("change",{startTime:S,endTime:q,displayedStartDate:me(S,"ymd"),displayedEndDate:me(q,"ymd")})},u=()=>{p.value&&c.value&&(t.value=p.value,i.value=c.value),l("cancel"),o.value=!1},_=v(()=>s.subtract(n.limitDays,"day").toDate()),f=v(()=>L(s.format("YYYY-MM-DD")).toDate()),x=v(()=>L.utc(d.value).add(r,"hour").toDate()),D=g(),H=da(()=>{const S=L.utc(d.value).add(r,"hour").add(n.limitSearchDays,"day"),q=L(s.format("YYYY-MM-DD"));D.value=S.isBefore(q)?S.toDate():q.toDate()},300);return be([d,()=>n.limitSearchDays],H,{immediate:!0}),Fe({pickerShow:o,startDate:t,endDate:i}),()=>e("div",{class:Y["date-range"]},[e("div",{class:[Y["date-block"],"date-block"],onClick:()=>o.value=!0},[e("span",{class:Y.start},[ge(L.utc(d.value).add(r,"hour").unix(),{fmt:"ymd"})||a("lobby.promote.startTime")]),e("span",{class:Y.line},[j("-")]),e("span",{class:Y.end},[ge(L.utc(b.value).add(r,"hour").unix(),{fmt:"ymd"})||a("lobby.promote.endTime")])]),o.value&&e(pa,{class:Y["date-picker"],onConfirm:y,onCancel:u},{default:()=>[e(Ce,{optionHeight:"0.64rem",visibleOptionNum:5,modelValue:t.value,"onUpdate:modelValue":S=>t.value=S,showToolbar:!1,minDate:_.value,maxDate:f.value},null),e(Ce,{optionHeight:"0.64rem",visibleOptionNum:5,modelValue:i.value,"onUpdate:modelValue":S=>i.value=S,showToolbar:!1,minDate:x.value,maxDate:D.value},null)]})])}}),Dt="_dateRangeFormItem_6kb3y_17",xt="_dateRange_6kb3y_17",Et="_isExpand_6kb3y_29",ie={dateRangeFormItem:Dt,dateRange:xt,isExpand:Et},[kt]=T("form-date-range"),St=w({name:kt,props:gt,emits:["changeDate"],setup(n,{emit:l}){const{t:a}=R(),o=U(),r=k("formData"),s=g(),m=g(),t=()=>r.endTime?!0:a("lobby.center.claim.claimForm.timePlaceholder"),i=c=>{var d;l("changeDate",c),(d=s.value)==null||d.validate()},p=v(()=>{var u,_;const c=(_=(u=o.guaranteeRule)==null?void 0:u.createTime)!=null?_:0,d=new Date(c*1e3);d.setHours(0,0,0,0);const b=new Date;b.setHours(0,0,0,0);const y=(b.getTime()-d.getTime())/(1e3*60*60*24);return Math.min(29,Math.floor(y))||1});return()=>e(O,{ref:s,class:ie.dateRangeFormItem,name:"endTime",rules:t,required:!0},{default:()=>{var c,d,b;return[e(ne,{class:(d=(c=m.value)==null?void 0:c.pickerShow)!=null&&d.value?ie.isExpand:"",icon:"/lobby_asset/common/web/profile/icon_wd_zcrq.svg",placeholder:"".concat(a("lobby.center.claim.claimForm.startTime")," â€” ").concat(a("lobby.center.claim.claimForm.endTime")),value:(b=n.formData)==null?void 0:b.dataRangeText,onHandleClick:()=>{r.claimType||Q({type:"error",message:a("lobby.center.claim.claimForm.claimTypePlaceholder")},"flush")}},null),r.claimType&&e(At,{ref:m,class:ie.dateRange,startTimestamp:r.endTime?r.startTime:void 0,endTimestamp:r.endTime?r.endTime:void 0,limitSearchDays:p.value,limitDays:p.value,onChange:i},null)]}})}}),Nt="_emailTips_yids7_17",It="_copyButton_yids7_23",Ae={emailTips:Nt,copyButton:It},[Ft]=T("pages-edit-email-tips"),Lt=w({name:Ft,setup(){const{t:n}=R();return()=>e("p",{class:Ae.emailTips},[n("lobby.center.claim.claimForm.emailTips"),e("b",null,[n("lobby.center.claim.claimForm.emailTips1")]),e("b",null,[e(Le,{class:Ae.copyButton,text:"gc@no.com"},null)]),e("b",null,[n("lobby.center.claim.claimForm.emailTips2")]),n("lobby.center.claim.claimForm.emailTips3")])}}),Ut={modelValue:K("")},$t="_notifyEmailIcon_1ghdv_17",De={notifyEmailIcon:$t},[Pt]=T("pages-notify-email"),Mt=w({name:Pt,props:Ut,emits:["update:modelValue"],setup(n,{emit:l}){const{t:a}=R(),o=k("formData"),r=()=>!o.notifyEmail||/^(?=\w+([-+.'][-.\w+]*)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$).{0,100}$/.test(o.notifyEmail)?!0:a("lobby.common.components.auth.email.requiredemail"),s=m=>{console.log(m,"valvalval"),l("update:modelValue",m)};return()=>e(O,{name:"notifyEmail",validateTrigger:"onChange",rules:r},{default:()=>[e(Ie,{class:De.input,value:o.notifyEmail,"onUpdate:value":m=>o.notifyEmail=m,clearable:!0,placeholder:a("lobby.center.claim.claimForm.notifyEmailPlaceholder"),onChange:s},{prefix:()=>e(M,{class:De.notifyEmailIcon,src:"/lobby_asset/common/common/login/login_icon_yx02.png"},null),suffix:o.notifyEmail?null:()=>e(Ue,{onPaste:m=>{m&&l("update:modelValue",m.trim())}},null)})]})}}),Ot={modelValue:K("")},qt="_textareaBox_w3hn2_17",Bt="_paddingLeft_w3hn2_74",Vt="_require_w3hn2_77",Ht="_paste_w3hn2_84",te={textareaBox:qt,paddingLeft:Bt,require:Vt,paste:Ht},[Wt]=T("pages-notify-email"),Gt=w({name:Wt,props:Ot,emits:["update:modelValue"],setup(n,{emit:l}){const{t:a}=R(),o=k("formData"),r=g(),s=()=>o.reason?!0:a("lobby.center.claim.claimForm.reasonPlaceholder2"),m=t=>{var p;const i=t.target;l("update:modelValue",i.value),(p=r.value)==null||p.validate()};return()=>e(O,{ref:r,name:"reason",validateTrigger:"onChange",rules:s},{default:()=>[e("div",{class:te.textareaBox},[ia(e("textarea",{class:o.reason?"":te.paddingLeft,"onUpdate:modelValue":t=>o.reason=t,maxlength:1e3,rows:5,placeholder:a("lobby.center.claim.claimForm.reasonPlaceholder"),onInput:m,onBlur:t=>{const i=t.target;l("update:modelValue",i.value.trim())}},null),[[ma,o.reason]]),e("span",{class:te.require},[j("*")]),!o.reason&&e(Ue,{class:te.paste,onPaste:t=>{t&&l("update:modelValue",t)}},null)])]})}}),Yt="_uploadFormItem_gmkhv_17",jt="_title_gmkhv_17",zt="_require_gmkhv_22",Jt="_label_gmkhv_26",Zt="_uploadSizeLimitText_gmkhv_32",J={uploadFormItem:Yt,title:jt,require:zt,label:Jt,uploadSizeLimitText:Zt},[Kt]=T("form-upload"),Xt=w({name:Kt,emits:["changeUpload"],setup(n,{emit:l}){const{t:a}=R(),o=k("formData"),r=k("uploadStatus"),s=g(),m=g(),t=()=>{var c;return(c=o.fileList)!=null&&c.length?!0:a("lobby.center.claim.claimForm.fileListRequired")},i=c=>{const d=Array.from(c).map(ba);Promise.all(d).then(b=>{var y;l("changeUpload",b),(y=m.value)==null||y.validate()})},p=()=>{var c,d;s.value.handleDefaultFileList((d=(c=o.fileList)==null?void 0:c.map(b=>_a(b.file)))!=null?d:[])};return be(()=>r.value,()=>{r.value===P.SUCCESS&&s.value.clear()}),Fe({handleDefaultFileList:p}),()=>e(O,{ref:m,name:"fileList",rules:t,required:!0},{default:()=>{var c,d;return[e("div",{class:J.uploadFormItem},[e("div",{class:J.title},[e("span",{class:J.require},[j("*")]),e("span",{class:J.label},[a("lobby.common.uploadFiles.label")]),e("span",null,[a("lobby.common.uploadFiles.sizeText",{num:(d=(c=o.fileList)==null?void 0:c.length)!=null?d:0,limit:15})])]),e(ha,{ref:s,limit:15,maxImageSize:2,onChange:i},null),e("p",{class:J.uploadSizeLimitText},[a("lobby.common.uploadFiles.uploadSizeLimitText")])])]}})}}),Qt={show:B},eo="_uploadBox_1mxre_17",ao="_statusText_1mxre_17",to="_failureText_1mxre_23",oo="_progressBar_1mxre_26",lo="_progress_1mxre_26",no="_uploaded_1mxre_39",ro="_btnGroup_1mxre_47",so="_cancel_1mxre_58",I={uploadBox:eo,statusText:ao,failureText:to,progressBar:oo,progress:lo,uploaded:no,btnGroup:ro,cancel:so};function xe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Me(n)}const[co]=T("pages-rules-modal"),io=w({name:co,props:Qt,emits:["update:show","cancelUpload","continueUpload"],setup(n,{emit:l}){const{t:a}=R(),o=Je(),r=k("uploadStatus"),s=k("uploadProgress"),m=c=>l("update:show",c),t=()=>{o.replace({name:$e.CLAIM,query:{active:"".concat(ra.CLAIM_ORDER)}}),m(!1)},i={[P.UPLOADING]:a("lobby.center.claim.claimForm.uploadDataPrompt1"),[P.SUCCESS]:a("lobby.center.claim.claimForm.uploadDataPrompt2"),[P.FAILURE]:a("lobby.center.claim.claimForm.uploadDataPrompt3")},p=v(()=>r.value===P.FAILURE);return()=>{let c,d;return e(X,{class:I.claimRulesModal,title:a("lobby.center.claim.kindTips"),show:n.show,"onUpdate:show":b=>n.show=b,onClose:t},{default:()=>[e("div",{class:I.uploadBox},[e("p",{class:{[I.statusText]:!0,[I.failureText]:p.value}},[i[r.value]]),e("div",{class:I.progressBar},[e("div",{class:I.progress,style:{width:"".concat(s.value<5?5:s.value,"%")}},null),e("span",{class:I.uploaded},[a("lobby.center.claim.claimForm.uploaded",{num:s.value<5?5:s.value})])]),p.value&&e("div",{class:I.btnGroup},[e(le,{class:I.cancel,plain:!0,"clear-background":!0,type:"primary",onClick:()=>{l("cancelUpload"),t()}},xe(c=a("lobby.center.claim.claimForm.cancel"))?c:{default:()=>[c]}),e(le,{onClick:()=>{l("continueUpload")}},xe(d=a("lobby.center.claim.claimForm.continueUpload"))?d:{default:()=>[d]})])])]})}}}),mo={show:B},uo="_abnormalRecordsModal_1g15y_17",po="_selectBox_1g15y_25",bo="_ml20_1g15y_66",_o="_row_1g15y_70",yo="_cicle_1g15y_82",ho="_selected_1g15y_93",fo="_bankP_1g15y_106",go="_bankName_1g15y_111",F={abnormalRecordsModal:uo,selectBox:po,ml20:bo,row:_o,cicle:yo,selected:ho,bankP:fo,bankName:go},[vo]=T("pages-withdraw-account-modal"),To=w({name:vo,props:mo,emits:["update:show","change"],setup(n,{emit:l}){const{t:a}=R(),o=U(),r=k("formData"),s=i=>l("update:show",i),m=()=>{s(!1)},t=v(()=>o.withdrawAccountList);return()=>e(X,{class:F.abnormalRecordsModal,title:a("lobby.center.claim.claimOrderDetails.receivingAccount"),show:n.show,"onUpdate:show":i=>n.show=i,onClose:m,showCancelButton:!1,showConfirmButton:!1,onConfirm:()=>{m()},onCancel:()=>{m()}},{default:()=>{var i,p,c,d;return[e("div",{class:[F.selectBox,[((p=(i=t.value)==null?void 0:i.length)!=null?p:0)<7?F.ml20:""]]},[(c=t.value)!=null&&c.length?(d=t.value)==null?void 0:d.map(b=>{const y=b.accountType===Ze.PIX||b.typeId===Ke.CRYPTO?b.withdrawTypeName:b.bankName||b.withdrawTypeName;return e("div",{class:F.row,key:b.id,onClick:()=>{l("change",b),m()}},[e("p",{class:F.bankP},[e("span",{class:F.bankName},[y]),"".concat(a("lobby.finance.withdraw.bankLessNo",{no:b.account.slice(-4)}))]),e("div",{class:{[F.cicle]:!0,[F.selected]:b.id===r.withdrawAccountId}},[e(M,{class:F.icon,src:"/lobby_asset/common/web/common/comm_icon_gou.svg"},null)])])}):e(Se,{text:a("lobby.event.luckyWheel.tabs.noData")},null)])]}})}}),[wo]=T("form-withdraw-account"),Ro=w({name:wo,emits:["changeWithdrawAccount"],setup(n,{emit:l}){const{t:a}=R(),o=k("formData"),r=g(),s=g(!1),m=()=>Pe(o.withdrawAccount)?!0:a("lobby.center.claim.claimForm.withdrawAccountPlaceholder"),t=i=>{var p;l("changeWithdrawAccount",i),(p=r.value)==null||p.validate()};return()=>e("div",null,[e(O,{ref:r,name:"withdrawAccount",rules:m,required:!0},{default:()=>{var i;return[e(ne,{icon:"/lobby_asset/common/web/common/input_icon_card.svg",placeholder:a("lobby.center.claim.claimForm.withdrawAccountPlaceholder"),value:o.bankName?"".concat(o.bankName).concat(a("lobby.finance.withdraw.bankLessNo",{no:(i=o.withdrawAccount)==null?void 0:i.slice(-4)})):"",onHandleClick:()=>{s.value=!0}},null)]}}),e(To,{show:s.value,"onUpdate:show":i=>s.value=i,onChange:t},null)])}}),Co="_applicationForm_yr6ed_17",Ao="_withdrawPassword_yr6ed_20",Do="_kindTips_yr6ed_24",xo="_btnGroup_yr6ed_29",Eo="_submit_yr6ed_40",Z={applicationForm:Co,withdrawPassword:Ao,kindTips:Do,btnGroup:xo,submit:Eo};function Ee(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Me(n)}const[ko]=T("claim-application-form"),So=w({name:ko,setup(){const{t:n}=R(),l=U(),a=pe(),{language:o}=Xe(),r=sa(),s=Qe({onlyParent:!1}),{defaultFormData:m,formData:t,isFormUnchanged:i,changeClaimType:p,changeDate:c,changeWithdrawAccount:d,changeAbnormalRecords:b,changeUpload:y}=ga(),u=g(!1),_=g(),f=g(!1),x=g(),{uploadFile:D,reUpload:V,uploadStatus:H,uploadProgress:S,uploadedFiles:q}=ya(),{isShowAbnormalRecordsSelect:ye,isWithdrawalFormAccount:Oe}=de(t);se("formData",t),se("uploadStatus",H),se("uploadProgress",S),be(()=>r.query,()=>{r.name===$e.APPLY_CLAIM&&Re(()=>{l.getWithdrawAccountList(),he(),qe()})},{immediate:!0});const qe=()=>{var E;const C=(E=l.applyClaimDraft[re()])!=null?E:m;Object.assign(t,{...ce(C,["password"])}),t.password="",t.claimType=C.claimType?C.claimType:void 0,l.abnormalRecordList=C.originalAbnormalRecords,x.value.handleDefaultFileList(),Re(()=>{var A;(A=_.value)==null||A.resetForm()})},re=()=>{var A,fe;return((fe=(A=a.userInfos)==null?void 0:A.username)!=null?fe:"").toString().trim()+o.toString().trim()},Be=()=>{l.setApplyClaimDraft(re(),{...t,originalAbnormalRecords:l.abnormalRecordList}),Q.success({message:()=>n("lobby.center.claim.claimForm.saveDraftTips")})},he=()=>{const C=[h.MANUAL_DEDUCTION,h.ACCOUNT_FUNDS_STOLEN];(!t.claimType||!t.startTime||!t.claimAmount||!t.withdrawAccount&&!C.includes(t.claimType)||ye.value&&!t.abnormalRecords)&&ta(s.value,{y:0})},Ve=async()=>{const C=ce(t,["claimTypeName","dataRangeText","originalAbnormalRecords","fileList"]);C.submit=!1;const[E]=await we(Te(C));return!E},He=async()=>{if(!await Ve()||(f.value=!0,await D(t.fileList),H.value===P.FAILURE))return;const E=ce(t,["claimTypeName","dataRangeText","originalAbnormalRecords"]);E.fileList=q.value,E.submit=!0;const[A]=await we(Te(E));if(A){H.value=P.FAILURE;return}We()},We=()=>{H.value=P.SUCCESS,S.value=100,Object.assign(t,m),l.setApplyClaimDraft(re(),_e(t)),setTimeout(()=>{var C;(C=_.value)==null||C.resetForm()})};return()=>{let C,E;return e("div",null,[e(ea,{ref:_,model:t,layout:"horizontal",onSubmit:He,class:Z.applicationForm},{default:()=>[e(ft,{onChangeClaimType:p},null),e(ot,{formData:t},null),e(St,{formData:t,onChangeDate:c},null),ye.value&&e(Za,{onChangeAbnormalRecords:b},null),e(ct,{modelValue:t.claimAmount,"onUpdate:modelValue":A=>t.claimAmount=A},null),Oe.value&&e(Ro,{onChangeWithdrawAccount:d},null),e(Mt,{modelValue:t.notifyEmail,"onUpdate:modelValue":A=>t.notifyEmail=A},null),e(Lt,null,null),e(Gt,{modelValue:t.reason,"onUpdate:modelValue":A=>t.reason=A},null),e(Xt,{ref:x,onChangeUpload:y},null),e("div",{class:Z.withdrawPassword},[e(aa,{modelValue:t.password,"onUpdate:modelValue":A=>t.password=A,name:"password",label:n("lobby.common.components.auth.withdrawal.label")},null)]),e("div",{class:Z.kindTips},[n("lobby.center.claim.claimForm.kindTips")]),e("div",{class:Z.btnGroup},[e(le,{disabled:i.value,plain:!0,"clear-background":!0,type:"primary",onClick:Be},Ee(C=n("lobby.center.claim.claimForm.saveDraft"))?C:{default:()=>[C]}),e(le,{class:Z.submit,loading:u.value,onClick:he,nativeType:"submit"},Ee(E=n("lobby.center.claim.claimForm.submit"))?E:{default:()=>[E]})])]}),e(io,{show:f.value,"onUpdate:show":A=>f.value=A,onContinueUpload:V},null)])}}}),No="_applicationHeader_9gp12_17",Io="_userInfo_9gp12_24",Fo="_name_9gp12_30",Lo="_copy_9gp12_34",oe={applicationHeader:No,userInfo:Io,name:Fo,copy:Lo},[Uo]=T("pages-application-header"),$o=w({name:Uo,setup(){return()=>{var a,o;const{t:n}=R(),l=pe();return e("div",{class:oe.applicationHeader},[e("div",{class:oe.userInfo},[e("span",null,[n("lobby.promote.createAccount.model.userAccount")]),e("span",{class:oe.name},[(a=l.userInfos)==null?void 0:a.platfromid]),e(Le,{class:oe.copy,text:(o=l.userInfos)==null?void 0:o.platfromid},null)]),e(oa,{showPopover:!1,onlyBalance:!0},null)])}}}),Po={show:B},ke={"claim-rules-modal":"_claim-rules-modal_fvvqq_17","rule-rich-text":"_rule-rich-text_fvvqq_59"},[Mo]=T("pages-rules-modal"),Oo=w({name:Mo,props:Po,emits:["update:show"],setup(n,{emit:l}){const a=r=>l("update:show",r),o=()=>{a(!1)};return()=>e(X,{class:ke["claim-rules-modal"],title:"",show:n.show,"onUpdate:show":r=>n.show=r,onClose:o},{default:()=>[e(fa,{class:ke["rule-rich-text"]},null)]})}}),qo="_claimRules_1q0dj_17",Bo={claimRules:qo},[Vo]=T("pages-application"),rl=w({name:Vo,setup(){const{t:n}=R(),l=U(),a=g(!1);ua(()=>{l.getGuaranteeRule()});const o=({onClick:r})=>e("span",{class:Bo.claimRules,onClick:r},[n("lobby.center.claim.claimRules2")]);return()=>e(na,null,{header:()=>e(la,{class:"noticeBaseHeader"},{default:()=>n("lobby.center.claim.claimSubmission"),right:()=>e(o,{onClick:()=>a.value=!0},null)}),default:()=>e("div",null,[e($o,null,null),e(So,null,null),e(Oo,{show:a.value,"onUpdate:show":r=>a.value=r},null)])})}});export{rl as default};
//# sourceMappingURL=ApplicationIndex.DAxPhs3q.js.map
