import{a as G,bL as se,ca as L,bQ as v,w as de,cp as ve,az as Z,S as pe,a0 as _e,I as O,cs as be,bg as ge,bG as oe,q as Y,aa as ie,cd as he,c2 as fe,iX as ye,R as Re,t as we,bq as E,Y as Se,bV as xe,cm as Ce,U as Pe,m as ke,cH as j,cf as Be,a6 as Ae,eH as Ie}from"./main.C8q1iJMV.js";import{a as De,E as ne}from"./props.DdPRoj_x.js";import{d as Te,s as N,u as Ne}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as J}from"./index.BB5bZn2v.js";import{f as x,r as U,l as M,w as ce,o as $e,p as t,v as ae,y as Le,z as Oe,C as Ee,E as le,A as He}from"../vendors/vendor-@vue.DNlpgob2.js";import{a as ue}from"./activeReceiveOne.CY32GsDi.js";import{E as z}from"./proxy.CBmEh2tc.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import{b as Me}from"./index.DffUij__.js";import{c as je}from"./ShareModule.E_rBOSqh.js";import{P as Ye}from"./PublicIntroductionIndex.bUl03y0X.js";import{B as We}from"./BottomReceiveIndex.D3vCadgd.js";import{L as me}from"./index.JiQV5KHQ.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"./index.BQg7GMmP.js";import"./LazyLoader.cfovhYZu.js";var V=(e=>(e[e.LOTTERYMETHOD=0]="LOTTERYMETHOD",e[e.RECEIVEAWARD=1]="RECEIVEAWARD",e[e.SHARE=2]="SHARE",e))(V||{}),q=(e=>(e[e.HIDE=0]="HIDE",e[e.SHOW=1]="SHOW",e))(q||{}),F=(e=>(e[e.all=-1]="all",e[e.noPass=0]="noPass",e[e.pass=1]="pass",e))(F||{}),T=(e=>(e[e.accountFirstDeposit=1]="accountFirstDeposit",e[e.cumulativeRecharge=2]="cumulativeRecharge",e[e.cumulativeCoding=3]="cumulativeCoding",e[e.cumulativeRechargeDays=4]="cumulativeRechargeDays",e[e.cumulativeRechargeTimes=5]="cumulativeRechargeTimes",e[e.registerIPRestrictions=6]="registerIPRestrictions",e[e.registerDeviceRestrictions=7]="registerDeviceRestrictions",e[e.downloadAppAndLogin=8]="downloadAppAndLogin",e))(T||{});const H=Te("eventPromote",()=>{const e=J(),{eventItemData:h}=N(e),r=x(()=>h.value),p=x(()=>{var l;return(l=r.value)==null?void 0:l.activeData});return{eventPromoteData:r,activeData:p}}),Fe=()=>{const{t:e}=G(),h=U(!1),r=J(),{eventItemData:p}=N(r);return{isLoading:h,handleReceiveOne:async o=>{var y;if(console.log("crowell handleReceiveOne",p.value,o),h.value||await se.check({eventData:{...p.value,amount:parseFloat(o==null?void 0:o.reward),receiveStatus:o==null?void 0:o.promoteStatus,receiveCategory:o.logCategory},checkOptions:{[L.forbidReceive]:!0,[L.receiveType]:!0,[L.task]:!0,[L.largeAmount]:!0,[L.pendingCheck]:!0}}))return;h.value=!0;const m=o.promoteStatus===v.PendingApply;ue({params:{receiveId:String(o.receiveId||o.id),activeId:(y=p.value)==null?void 0:y.id},showSuccessModal:!1,onSuccess:()=>{de.success(e(m?"lobby.event.invest.applySuccess":"lobby.event.invest.receiveSuccess"))},judgeResBefore:()=>{var g,f;h.value=!1,(g=p.value)!=null&&g.id&&r.refreshEventItemDetail((f=p.value)==null?void 0:f.id,{error:{action:"noMessage"}})}})}}},Ge="_recordSelect_1aarc_17",Ue="_recordList_1aarc_68",Ve="_listItem_1aarc_77",ze="_listItemLeft_1aarc_87",qe="_itemUserName_1aarc_92",Je="_isPassColorY_1aarc_96",Qe="_isPassColorN_1aarc_100",Ke="_itemTimeWrapper_1aarc_119",Xe="_itemTime_1aarc_119",Ze="_listItemRight_1aarc_136",et="_button_1aarc_139",tt="_icon_1aarc_144",ot="_conditionCol_1aarc_156",nt="_textGreen_1aarc_168",at="_textBlack_1aarc_171",rt="_textRed_1aarc_174",st="_promoteDetailsModal_1aarc_182",b={recordSelect:Ge,"dropdown-box":"_dropdown-box_1aarc_55",recordList:Ue,listItem:Ve,listItemLeft:ze,itemUserName:qe,isPassColorY:Je,isPassColorN:Qe,itemTimeWrapper:Ke,itemTime:Xe,listItemRight:Ze,button:et,icon:tt,conditionCol:ot,textGreen:nt,textBlack:at,textRed:rt,promoteDetailsModal:st},[it]=Y("event-item-modes-promote-components-my-promote"),ct=M({name:it,setup(){const{t:e}=G(),h=H(),{eventPromoteData:r,activeData:p}=N(h),l=U(F.all),o=ve(Me,{immediate:!1,transformFn:a=>{var i,_;return{data:(i=a.details)!=null?i:[],total:(_=a.total)!=null?_:0,taskCategory:a.taskCategory}},alias:{page:"page",pageSize:"size"},defaultPageSize:20}),m=U(""),y=x(()=>[{value:F.all,label:e("lobby.event.promote.isItEffective")},{value:F.pass,label:e("lobby.event.promote.efficient")},{value:F.noPass,label:e("lobby.event.promote.invalid")}]);ce(l,a=>{o.payload.value={...o.payload.value,isPass:a},g(!0)}),$e(async()=>{var a;o.payload.value={activeId:(a=r.value)==null?void 0:a.id,isPass:l.value},g()});const g=async(a=!1)=>{Z().hasLogined&&o.loadData(a)},f=a=>{let i=[];try{i=JSON.parse(a)}catch(_){}return(i==null?void 0:i.length)>0&&i.some(_=>_.require>0)},s=(a,i,_)=>{const R=[T.registerIPRestrictions,T.registerDeviceRestrictions].includes(_),k=i===F.pass,Q=i===F.noPass;return R?Q?b==null?void 0:b.textRed:b==null?void 0:b.textBlack:k?b==null?void 0:b.textGreen:b==null?void 0:b.textBlack},n=(a,i)=>({[T.accountFirstDeposit]:e("lobby.event.promote.accountFirstDeposit")+"".concat(i,"+"),[T.cumulativeRecharge]:e("lobby.event.promote.cumulativeRecharge")+"".concat(i,"+"),[T.cumulativeCoding]:e("lobby.event.promote.cumulativeCoding")+"".concat(i,"+"),[T.cumulativeRechargeDays]:e("lobby.event.promote.cumulativeRechargeTimes")+e("lobby.event.invest.columns.rewardDays.value",{days:i}),[T.cumulativeRechargeTimes]:e("lobby.event.promote.cumulativeRechargeDays")+"".concat(i)+e("lobby.event.luckyBet.times"),[T.registerIPRestrictions]:e("lobby.event.promote.registerIPRestrictions"),[T.registerDeviceRestrictions]:e("lobby.event.promote.registerDeviceRestrictions"),[T.downloadAppAndLogin]:e("lobby.event.promote.downloadAPPLogin")})[a]||"",c=a=>{let i=[];try{i=JSON.parse(a)}catch(R){}const _=i==null?void 0:i.filter(R=>!((R.id===T.registerIPRestrictions||R.id===T.registerDeviceRestrictions)&&R.isPass===F.pass||R.require<=0));ie.showDialog({title:()=>e("lobby.event.promote.promotionDetails"),className:b.promoteDetailsModal,message:()=>{var R;return t("div",null,[(R=_==null?void 0:_.map(k=>t("div",{key:k.id,class:b.conditionCol},[t("span",{class:s(k.val,k.isPass,k.id)},[n(k.id,k.require)])])))!=null?R:null])},dialogMode:"big",showCloseButton:!0,showConfirmButton:!1})},u=()=>{o.payload.value={...o.payload.value,userName:m.value},g(!0)};return()=>t("div",null,[t("div",{class:b.recordHeader},[t("div",{class:b.recordSelect},[t(pe,{dropdownClassName:b["dropdown-box"],size:"mini",modelValue:l.value,"onUpdate:modelValue":a=>l.value=a,options:y.value,autoWidth:!0,round:!0},null),t(_e,{value:m.value,"onUpdate:value":a=>m.value=a,maxlength:16,clearable:!0,placeholder:e("lobby.promote.commission.searchAccount")},{suffix:()=>t(O,{onClick:u,src:"/lobby_asset/common/web/common/comm_icon_ss.svg"},null)})])]),t(be,{class:b.recordList},{default:()=>[t(ge,{finished:o.finished.value,error:!!o.listError.value,loading:o.loading.value,onLoad:g,onRetry:g,emptyText:e("lobby.modal.noData")},{default:()=>{var a,i;return[(i=(a=o.list)==null?void 0:a.value)==null?void 0:i.map(_=>{var R;return t("div",{class:b.listItem},[t("div",{class:b.listItemLeft},[t("div",{class:b.itemUserName},[t("div",null,[_.userName]),t("div",null,[t("span",{class:b.lightenColor},[e("lobby.event.promote.isItEffective")]),_.isPass===1?t("span",{class:b.isPassColorY},[e("lobby.event.promote.yes")]):t("span",{class:b.isPassColorN},[e("lobby.event.promote.no")])])]),t("div",{class:b.itemTimeWrapper},[t("div",{class:b.itemTime},[t("span",{class:b.lightenColor},[e("lobby.event.promote.createTime"),ae("：")]),t("span",null,[oe(_.registerTime,"ymd")])]),((R=p.value)==null?void 0:R.reward_type)===z.DAYSETTLEMENT?t("div",{class:b.itemTime},[t("span",{class:b.lightenColor},[e("lobby.event.promote.updateTime"),ae("：")]),t("span",null,[oe(_.updateTime,"ymd")])]):t("div",{class:b.itemTime},null)])]),t("div",{class:b.listItemRight,onClick:()=>c(_.remark)},[t("div",{class:b.button},[f(_.remark)&&e("lobby.event.promote.details")]),t(O,{class:b.icon,src:"/lobby_asset/common/web/common/img_scroll_jt.svg"},null)])])})]}})]})])}}),lt="_promoteHeader_1v3x4_17",ut="_title_1v3x4_26",mt="_promoteBox_1v3x4_37",dt="_mySubordinate_1v3x4_51",vt="_mySubordinateRow_1v3x4_56",pt="_mySubordinateRowLeft_1v3x4_61",_t="_mySubordinateRowRight_1v3x4_71",bt="_mySubordinateRowPrice_1v3x4_79",gt="_text1_1v3x4_87",ht="_text2_1v3x4_91",ft="_mySubordinateRowButton_1v3x4_95",yt="_button_1v3x4_98",Rt="_receivebtn_1v3x4_112",wt="_mySubordinateBorder_1v3x4_120",St="_promoteModal_1v3x4_124",C={promoteHeader:lt,title:ut,promoteBox:mt,mySubordinate:dt,mySubordinateRow:vt,mySubordinateRowLeft:pt,mySubordinateRowRight:_t,mySubordinateRowPrice:bt,"icon-text":"_icon-text_1v3x4_83",text1:gt,text2:ht,mySubordinateRowButton:ft,button:yt,receivebtn:Rt,mySubordinateBorder:wt,promoteModal:St},[xt]=Y("event-item-modes-components-promote-header"),Ct=M({name:xt,setup(){return()=>{var i,_,R,k,Q;const{t:e}=G(),h=U(),r=J(),p=H(),{eventPromoteData:l,activeData:o}=N(p),m=U(!1),y=x(()=>{var d,w;return(w=he[((d=Z().userInfos)==null?void 0:d.currency)||"CNY"])==null?void 0:w.PAY_JB}),g=x(()=>{var A;const d=((A=o.value)==null?void 0:A.rule_list)||[];if((d==null?void 0:d.length)===0)return!1;const w=[v.CanReceive,v.PendingApply];return d==null?void 0:d.some(I=>w.includes(I==null?void 0:I.promoteStatus))}),f=x(()=>{var d,w,A;return((d=o.value)==null?void 0:d.reward_type)===z.DAYSETTLEMENT?e("lobby.event.promote.yesterdaysEffectivePromoter",{x:"<span>".concat(((w=o.value)==null?void 0:w.promoteCount)||0,"</span>")}):e("lobby.event.promote.effectiveSubordinate",{x:"<span>".concat(((A=o.value)==null?void 0:A.promoteCount)||0,"</span>")})}),s=x(()=>{const{rule_list:d=[],promoteCount:w}=o.value||{},A=[],I=[];for(const S of d)w>=(S==null?void 0:S.promote_num)&&(S==null?void 0:S.promoteStatus)===v.CanReceive?A.push(S):w>=(S==null?void 0:S.promote_num)&&(S==null?void 0:S.promoteStatus)===v.PendingApply&&I.push(S);return A.length?A:I.length?I:null}),n=x(()=>{var I,S;const d=((I=o.value)==null?void 0:I.rule_list)||[],w=(S=d==null?void 0:d.filter(D=>(D==null?void 0:D.promoteStatus)!==v.Processing))==null?void 0:S.map(D=>D.promoteStatus),A=w==null?void 0:w[0];return w.length===0||!A||w.includes(v.CanReceive)?fe(e("lobby.event.promote.receive")):w.includes(v.PendingApply)?e("lobby.modal.task.applyAward"):w.includes(v.PendingCheck)?e("lobby.records.underReview"):w.some(D=>D===v.Distributed||D===v.HasReceive)?e("lobby.modal.task.collected"):w.every(D=>D===v.Rejected)?e("lobby.records.rejected"):ye(A)}),c=async()=>{if(!Z().hasLogined){xe().openLoginRegister();return}ie.showDialog({title:()=>e("lobby.promote.myPromote"),className:C.promoteModal,showCloseButton:!0,showConfirmButton:!1,dialogMode:"big",message:()=>t(ct,null,null)})},u=async()=>{var I,S,D,te;if(!((I=s.value)!=null&&I.length)||m.value)return;const d=(S=s.value)==null?void 0:S[0],w={...l.value,amount:parseFloat(d==null?void 0:d.reward),receiveStatus:d==null?void 0:d.promoteStatus,receiveCategory:d.logCategory};if(await se.check({eventData:w,checkOptions:{[L.forbidReceive]:!0,[L.receiveType]:!0,[L.task]:!0,[L.largeAmount]:!0,[L.pendingCheck]:!0}})||(d==null?void 0:d.promoteStatus)!==v.CanReceive&&(d==null?void 0:d.promoteStatus)!==v.PendingApply)return;m.value=!0;const A=(D=s.value)==null?void 0:D.map(K=>K.receiveId).join(",");ue({params:{receiveId:A,activeId:(te=l.value)==null?void 0:te.id},judgeResBefore:()=>{var K;m.value=!1,r.refreshEventItemDetail((K=l.value)==null?void 0:K.id)}})};return Re({navigatorShare:()=>{var d,w;(w=(d=h.value)==null?void 0:d.navigatorShare)==null||w.call(d)}}),t("section",{class:C.promoteHeader},[t("div",{class:C.title},[t("span",null,[e("lobby.promote.promote.shareSite")])]),Le(t(je,{class:C.promoteBox,ref:h},null),[[Oe,(i=l.value)==null?void 0:i.id]]),t("div",{class:[C.mySubordinate,Z().hasLogined&&C.mySubordinateBorder]},[t("div",{class:C.mySubordinateRow},[t("div",{class:C.mySubordinateRowLeft},[t(we,{class:C.mySubordinateRowRight,onClick:c,html:f.value},null)]),t("div",{class:C.mySubordinateRowRight},[t("span",{onClick:c},[e("lobby.event.promote.details")])])]),t("div",{class:C.mySubordinateRow},[((_=o.value)==null?void 0:_.reward_type)===z.DAYSETTLEMENT&&t("div",{class:C.mySubordinateRowPrice},[t("span",{class:C.text1},[e("lobby.event.promote.cumulativeRewards")]),t(O,{class:[C["icon-text"]],src:y.value},null),t("span",{class:C.text2},[E((k=(R=o.value)==null?void 0:R.promoteAmount)!=null?k:0)])]),((Q=o.value)==null?void 0:Q.displayType)===V.SHARE&&t("div",{class:C.mySubordinateRowButton},[t(Se,{type:"success",disabled:!g.value,class:[C.button,C.receivebtn],onClick:u,loading:m.value},{default:()=>[t("span",null,[n.value])]})])])])])}}}),Pt="_promoteTips_uio0x_17",kt="_promotionHeader_uio0x_25",Bt="_promotionContent_uio0x_34",At="_promotionContentRow_uio0x_39",It="_keyPoint_uio0x_54",B={promoteTips:Pt,promotionHeader:kt,promotionContent:Bt,promotionContentRow:At,keyPoint:It},[Dt]=Y("event-item-modes-promote-components-promote-tips"),Tt=M({name:Dt,setup(){const{t:e}=G(),h=H(),{activeData:r}=N(h);return()=>{var p,l,o,m,y,g,f,s,n,c,u;return t("section",{class:B.promoteTips},[t("div",{class:B.promotionHeader},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberQuestion")])]),t("div",{class:B.promotionContent},[((p=r.value)==null?void 0:p.appLogin)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip0")," ",t("span",{class:B.keyPoint},[e("lobby.promote.yes")])])]):null,((l=r.value)==null?void 0:l.firstPay)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip1")," ",t("span",{class:B.keyPoint},["".concat((o=r.value)==null?void 0:o.firstPay," ").concat(e("lobby.event.promote.orAbove"))])])]):null,((m=r.value)==null?void 0:m.pay)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip2"),t("span",{class:B.keyPoint},["".concat((y=r.value)==null?void 0:y.pay," ").concat(e("lobby.event.promote.orAbove"))])])]):null,((g=r.value)==null?void 0:g.bet)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip3"),t("span",{class:B.keyPoint},["".concat((f=r.value)==null?void 0:f.bet," ").concat(e("lobby.event.promote.orAbove"))])])]):null,((s=r.value)==null?void 0:s.payTimes)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip4")," ",t("span",{class:B.keyPoint},["".concat((n=r.value)==null?void 0:n.payTimes," ").concat(e("lobby.event.promote.timesOrMore"))])])]):null,((c=r.value)==null?void 0:c.payDays)>0?t("div",{class:B.promotionContentRow},[t("span",null,[e("lobby.event.promote.effectivePromotionNumberTip5"),t("span",{class:B.keyPoint},["".concat((u=r.value)==null?void 0:u.payDays," ").concat(e("lobby.event.promote.dayOrMore"))])])]):null])])}}}),re={};function Nt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ee(e)}const[$t]=Pe("event-item-modes-promote-components-receive-button"),Lt=M({name:$t,emits:["share"],setup(e,{emit:h}){const{t:r}=G(),p=U(!1),l=J();return()=>{let o;return t(We,{eventItemData:l.eventItemData,class:re.bottomReceive},{default:()=>[t(Ce,{type:"primary",class:re.shareButton,loading:p.value,onClick:()=>h("share")},Nt(o=r("lobby.event.promote.shareNow"))?o:{default:()=>[o]})]})}}}),Ot="_effectivePromote_fkwgg_17",Et="_listHeader_fkwgg_17",Ht="_listItem_fkwgg_32",Mt="_financeColor_fkwgg_43",X={effectivePromote:Ot,listHeader:Et,listItem:Ht,financeColor:Mt},[jt]=Y("event-item-modes-promote-components-effective-promote"),Yt=M({name:jt,setup(){const{t:e}=G(),h=H(),{activeData:r}=N(h),p=l=>{var m;const o=(m=l==null?void 0:l.split(","))!=null?m:0;return o.length===1?E(o[0]):"".concat(E(o[0]),"-").concat(E(o[1]))};return()=>{var l,o;return t("section",{class:X.effectivePromote},[t("div",{class:X.listHeader},[t("span",null,[e("lobby.event.promote.effectivePromotionNumber")]),t("span",null,[e("lobby.event.promote.award")])]),(o=(l=r.value)==null?void 0:l.rule_list)==null?void 0:o.map(m=>{var y;return t("div",{class:X.listItem,key:m.id},[t("span",null,["≥".concat(m.promote_num)]),t("span",{class:X.financeColor},[p(m.reward),((y=r.value)==null?void 0:y.reward_type)===z.DAYSETTLEMENT&&"/".concat(e("lobby.event.promote.numberPeople"))])])})])}}}),Wt="_redpackListItem_1kjh2_17",Ft="_patternBox_1kjh2_22",Gt="_inner_1kjh2_25",Ut="_people_1kjh2_32",Vt="_peopleReceive_1kjh2_50",zt="_amount_1kjh2_53",qt="_itemReceiveBg_1kjh2_70",Jt="_itemBg_1kjh2_73",Qt="_itemOpenBg_1kjh2_77",Kt="_itemOpenBgGet_1kjh2_86",Xt="_rewardAmount_1kjh2_89",Zt="_rewardText_1kjh2_97",eo="_reduceText_1kjh2_103",to="_receivedRewardAmount_1kjh2_107",oo="_itemCollected_1kjh2_111",P={redpackListItem:Wt,patternBox:Ft,inner:Gt,people:Ut,peopleReceive:Vt,amount:zt,itemReceiveBg:qt,itemBg:Jt,itemOpenBg:Qt,itemOpenBgGet:Kt,rewardAmount:Xt,rewardText:Zt,reduceText:eo,receivedRewardAmount:to,itemCollected:oo},[no]=Y("event-item-modes-promote-components-redpack-item"),ao=M({name:no,props:{rewardItem:{type:Object,default:null}},setup(e){const{t:h}=G(),r=le("receiveOne",{}),p=H(),l=ke(),{activeData:o}=N(p),m=x(()=>{var n,c;return((n=e.rewardItem)==null?void 0:n.promoteStatus)===v.HasReceive||((c=e.rewardItem)==null?void 0:c.promoteStatus)===v.Distributed}),y=x(()=>{var n,c,u;return((n=e.rewardItem)==null?void 0:n.promoteStatus)===v.CanReceive||((c=e.rewardItem)==null?void 0:c.promoteStatus)===v.PendingApply||((u=e.rewardItem)==null?void 0:u.promoteStatus)===v.PendingCheck}),g=x(()=>{var u,a,i,_;if(m.value)return E((a=(u=e.rewardItem)==null?void 0:u.promoteAmount)!=null?a:0);const n=((_=(i=e.rewardItem)==null?void 0:i.reward)==null?void 0:_.split(","))||[];return n==null?void 0:n.reduce((R,k)=>R?"".concat(R,"-").concat(E(k)):E(k),"")}),f=n=>{var R;const{isCN:c}=l,u=(R=e.rewardItem)==null?void 0:R.promoteStatus;if(u===v.HasReceive||u===v.Distributed)return t(O,{src:"/lobby_asset/common/common/event/tghdhb2_s.png",width:j(132),height:j(88),class:P.itemReceiveBg,tag:"div"},null);let a="tghdhb3_s1",i="tghdhb3_s2",_="tghdhb3_s";return n&&(a="tghdhb1_s4",_="tghdhb4_s"),c||(a="tghdhb3_s1_en"),(u===v.CanReceive||u===v.PendingApply||u===v.PendingCheck)&&(a="tghdhb1_s1",_="tghdhb1_s",i="tghdhb1_s2",n&&(_="tghdhb2_s",a="tghdhb1_s3"),c||(a="tghdhb1_s1_en")),t(O,{src:"/lobby_asset/common/common/event/".concat(_,".png"),width:j(132),height:j(n?88:75),tag:"div",class:P.itemBg},{default:()=>[t(O,{src:"/lobby_asset/common/common/event/".concat(i,".png"),width:j(26),height:j(27),tag:"div",class:{[P.itemOpenBg]:!0,[P.itemOpenBgGet]:!!n}},{default:()=>[t(O,{src:"/lobby_asset/common/common/event/".concat(a,".png"),width:j(16)},null)]})]})},s=()=>{var n;y.value&&((n=r==null?void 0:r.handleReceiveOne)==null||n.call(r,e.rewardItem))};return()=>{const{displayReward:n=q,displayType:c}=o.value||{};return t(me,{class:{[P.redpackListItem]:!0,[P.itemCollected]:m.value},onClick:s},{default:()=>{var u,a,i;return[t("div",{class:P.patternBox},[f(c),t("div",{class:P.inner},[m.value&&t("div",{class:{[P.amount]:!0,[P.amountNotReceive]:!m.value&&!y.value}},[t("span",null,[g.value])]),t("div",{class:{[P.people]:!0,[P.peopleReceive]:m.value}},[t("span",null,[h("lobby.event.promote.people",{x:(a=(u=e.rewardItem)==null?void 0:u.promote_num)!=null?a:0})])])])]),t("div",{class:{[P.rewardAmount]:!0,[P.receivedRewardAmount]:y.value}},[t("div",{class:{[P.rewardText]:!0,[P.reduceText]:((i=g.value)==null?void 0:i.length)>10}},[!m.value&&n===q.SHOW?g.value:""])])]}})}}}),ro="_rewardBase_uoerl_17",so="_row_uoerl_20",io="_items_uoerl_23",co="_itemArrow_uoerl_26",lo="_rowArrow_uoerl_29",uo="_mb_uoerl_49",mo="_disabled_uoerl_60",W={rewardBase:ro,row:so,items:io,itemArrow:co,rowArrow:lo,mb:uo,disabled:mo},[vo]=Y("event-item-modes-promote-components-reward-base"),po=M({name:vo,setup(e,{slots:h}){const r=H(),{activeData:p}=N(r),l=x(()=>{var f;return(((f=p.value)==null?void 0:f.rule_list)||[]).reduce((s,n)=>{const c=[...s];if(!c.length)return[[n]];const u=c[c.length-1];return u.length<4?u.push(n):c.push([n]),c},[])}),o=(g,f,s)=>{var n;return[(n=h.default)==null?void 0:n.call(h,g,f,s),m(f,s)]},m=(g,f)=>{const s=f==null?void 0:f[g+1];if(!s)return;const n=s.promoteStatus===v.Processing;return t("div",{class:{[W.itemArrow]:!0,[W.disabled]:n}},[t(O,{src:"/lobby_asset/common/web/event/img_tghdjt.svg"},null)])},y=g=>{var n;const f=(n=l.value)==null?void 0:n[g+1];if(!f)return;const s=f[0].promoteStatus===v.Processing;return t("div",{class:{[W.rowArrow]:!0,[W.disabled]:s}},[t(O,{src:"/lobby_asset/common/web/event/img_tghdjt.svg"},null)])};return()=>{var g;return t("div",{class:W.placeholderWrapper},[t("div",{class:W.rewardBase},[(g=l.value)==null?void 0:g.map((f,s)=>{const n=f.map(c=>c.id).join(",");return t("div",{class:W.row,key:n},[t("div",{class:W.items},[f.map(o)]),y(s)])})])])}}}),_o="_treasureListItem_k9616_17",bo="_patternBox_k9616_20",go="_inner_k9616_23",ho="_people_k9616_30",fo="_amount_k9616_48",yo="_amountNotReceive_k9616_62",Ro="_itemBg_k9616_65",wo="_itemOpenBg_k9616_69",So="_itemOpenBgGet_k9616_78",xo="_rewardAmount_k9616_81",Co="_reduceText_k9616_95",Po="_receivedRewardAmount_k9616_98",$={treasureListItem:_o,patternBox:bo,inner:go,people:ho,amount:fo,amountNotReceive:yo,itemBg:Ro,itemOpenBg:wo,itemOpenBgGet:So,rewardAmount:xo,reduceText:Co,receivedRewardAmount:Po},[ko]=Y("event-item-modes-promote-components-treasure-item"),Bo=M({name:ko,props:{rewardItem:{type:Object,default:null}},setup(e){const{t:h}=G(),r=le("receiveOne",{}),p=H(),{activeData:l}=N(p),o=x(()=>{var s,n;return((s=e.rewardItem)==null?void 0:s.promoteStatus)===v.HasReceive||((n=e.rewardItem)==null?void 0:n.promoteStatus)===v.Distributed}),m=x(()=>{var s,n,c;return((s=e.rewardItem)==null?void 0:s.promoteStatus)===v.CanReceive||((n=e.rewardItem)==null?void 0:n.promoteStatus)===v.PendingApply||((c=e.rewardItem)==null?void 0:c.promoteStatus)===v.PendingCheck}),y=x(()=>{var c,u,a,i;if(o.value)return E((u=(c=e.rewardItem)==null?void 0:c.promoteAmount)!=null?u:0);const s=((i=(a=e.rewardItem)==null?void 0:a.reward)==null?void 0:i.split(","))||[];return s==null?void 0:s.reduce((_,R)=>_?"".concat(_,"-").concat(E(R)):E(R),"")}),g=()=>{var n;let s="/lobby_asset/common/common/event/tghd_img_bx3.png";switch((n=e.rewardItem)==null?void 0:n.promoteStatus){case v.Processing:break;case v.CanReceive:case v.PendingApply:case v.PendingCheck:s="/lobby_asset/common/common/event/tghd_img_bx1.png";break;case v.HasReceive:case v.Distributed:s="/lobby_asset/common/common/event/tghd_img_bx2.png";break}return t(O,{src:s,width:j(132),height:j(123),tag:"div",class:$.itemBg},null)},f=()=>{var s;m.value&&((s=r==null?void 0:r.handleReceiveOne)==null||s.call(r,e.rewardItem))};return()=>{const{displayReward:s=q}=l.value||{};return t(me,{class:{[$.treasureListItem]:!0},onClick:f},{default:()=>{var n,c,u,a;return[t("div",{class:$.patternBox},[g(),t("div",{class:$.inner},[o.value&&t("div",{class:{[$.amount]:!0,[$.amountNotReceive]:!o.value&&!m.value}},[t("span",null,[y.value])]),t("div",{class:{[$.people]:!0}},[t("span",null,[h("lobby.event.promote.people",{x:(c=(n=e.rewardItem)==null?void 0:n.promote_num)!=null?c:0})])])])]),t("div",{class:{[$.rewardAmount]:(u=y.value)==null?void 0:u.length,[$.receivedRewardAmount]:m.value}},[t("span",{class:{[$.reduceText]:((a=y.value)==null?void 0:a.length)>10}},[!o.value&&s===q.SHOW?y.value:""])])]}})}}}),Ao="_rewardContent_ftrpu_17",Io={rewardContent:Ao},[Do]=Y("event-item-modes-promote-components-reward-content"),To=M({name:Do,setup(){const e=H(),{activeData:h}=N(e),r=x(()=>{const{displayType:o}=h.value||{};return o===V.SHARE||!p.value&&!l.value}),p=x(()=>{const{displayType:o}=h.value||{};return o===V.RECEIVEAWARD}),l=x(()=>{const{displayType:o,reward_type:m}=h.value||{};return o===V.LOTTERYMETHOD&&m!==z.DAYSETTLEMENT});return()=>t("div",{class:Io.rewardContent},[r.value&&t(Yt,null,null),(p.value||l.value)&&t(po,null,{default:o=>p.value?t(Bo,{rewardItem:o},null):l.value?t(ao,{rewardItem:o},null):null})])}}),No="_promoteMain_k8egb_17",$o="_placeholderBox_k8egb_21",ee={promoteMain:No,placeholderBox:$o},[Lo]=Y("event-item-modes-promote"),nn=M({name:Lo,props:{...De,eventId:Number},emits:["marginTypeChange"],setup(e,{emit:h}){const{query:r}=Ne(),p=J(),l=H(),{eventPromoteData:o,activeData:m}=N(l),y=Fe(),g=U();He("receiveOne",y);const f=()=>{var u;(u=g.value)==null||u.navigatorShare()},s=x(()=>y.isLoading.value||p.isItemLoading?"nested-loading":p.itemErr?"retry":null),n=()=>{p.resetEventItemData(),p.refreshEventItemDetail(Number(r==null?void 0:r.eventId))},c=x(()=>{var u,a,i;return((u=o.value)==null?void 0:u.template)&&[Ie.Promote].includes((a=o.value)==null?void 0:a.template)&&((i=m.value)==null?void 0:i.displayType)===V.SHARE});return ce(c,u=>{const a=u?ne.BOTTOM_BTN:ne.NORMAL;h("marginTypeChange",a)},{immediate:!0}),()=>t(Ae,{class:{[ee.placeholderBox]:!0,[ee.receiveButton]:e.pageType===Be.Normal&&c.value},type:s.value,onRetry:n},{default:()=>[t("div",{class:ee.promoteMain},[t(Ct,{ref:g},null),t(Tt,null,null),t(To,null,null)]),t(Ye,{eventData:H().eventPromoteData},null),c.value&&t(Lt,{onShare:f},null)]})}});export{nn as default};
//# sourceMappingURL=PromoteIndex.DnOWzxkC.js.map
