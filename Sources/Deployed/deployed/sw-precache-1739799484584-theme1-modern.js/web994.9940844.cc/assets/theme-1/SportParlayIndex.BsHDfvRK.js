import{dS as O,ke as Z,q as P,a as R,u as ie,el as ce,k8 as K,Y as W,W as Q,E as ue,e8 as pe,b as me,e6 as de,dP as j,bN as be,gg as ye,as as V,w as C,kf as fe,kg as z,m as _e,a7 as ge,e0 as ve,ad as we,ae as Se,a6 as he,dQ as J,hC as Be,v as ke,B as xe,af as Te,em as Le,kd as Ce,kh as Pe,ki as Ie}from"./main.C8q1iJMV.js";import{l as I,r as h,A as Ee,w as X,y as ee,z as te,p as e,F as M,v as L,f as x,C as q,W as Ne,T as Ge,a5 as Ae}from"../vendors/vendor-@vue.DNlpgob2.js";import{B as Oe,a as Re,R as je,u as Me,O as qe,c as $e,E as He,b as Ue}from"./ResultMsgIndex.D8EMTOat.js";import{h as G,e as se,v as De}from"../vendors/vendor-default.CjiYZF7Q.js";import{A as ae}from"./ArrowPriceIndex.D_dprz8o.js";import{S as Fe}from"./SymbolPriceIndex.DnolemMB.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";const We="_type_2n5l6_32",Ve="_arrow_2n5l6_36",ze="_text_2n5l6_40",Ye="_bet_2n5l6_17",Ze="_center_2n5l6_55",Ke="_price_2n5l6_59",f={"bet-footer":"_bet-footer_2n5l6_17","footer-title":"_footer-title_2n5l6_25",type:We,arrow:Ve,text:ze,bet:Ye,"footer-main":"_footer-main_2n5l6_48","main-item":"_main-item_2n5l6_52",center:Ze,price:Ke,"footer-btns":"_footer-btns_2n5l6_63"},[Qe]=P("pages-dialogs-sport-parlay-result"),Je=I({name:Qe,props:{show:Boolean,index:Number,item:Object},setup(t){const m=O(),r=h();return Ee(Oe,r),X(()=>t.item,c=>{r.value={maxBet:c==null?void 0:c.maxBet,minBet:c==null?void 0:c.minBet}},{immediate:!0}),()=>{var c;return ee(e(Re,{modelValue:m.comboList[(c=t.index)!=null?c:0].amount,"onUpdate:modelValue":s=>{var a;return m.comboList[(a=t.index)!=null?a:0].amount=s},class:f["main-item"],key:t.index,mode:"parlay"},{default:()=>{var s,a,_,d,o,u;return[((s=t.item)==null?void 0:s.comboType)&&e(M,null,[Z((_=(a=t.item)==null?void 0:a.comboTypeName)!=null?_:"","comboName"),e(ae,{class:f.center,useSymbol:!0,price:(o=(d=t.item)==null?void 0:d.price)!=null?o:0,priceClass:f.price,arrowZoom:1.2,isChange:!0},null),(u=t.item)==null?void 0:u.betCount,L(" *")])]}}),[[te,t.show]])}}}),Xe="_record_ww6dq_29",et="_item_ww6dq_46",tt="_max_ww6dq_54",st="_text_ww6dq_57",at="_num_ww6dq_61",i={"bet-result":"_bet-result_ww6dq_17","result-title":"_result-title_ww6dq_22","result-text":"_result-text_ww6dq_26",record:Xe,"result-list":"_result-list_ww6dq_38","list-item":"_list-item_ww6dq_41",item:et,max:tt,text:st,num:at,"result-btns":"_result-btns_ww6dq_66"};function Y(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const[ot]=P("pages-dialogs-sport-parlay-result"),lt=I({name:ot,props:{show:{type:Boolean,default:!1},isBetSuccess:Boolean,betResultMsg:String,betList:{type:Array,default:()=>[]}},emits:["update:show"],setup(t,{emit:m}){const{t:r}=R(),c=ie(),s=me(),a=x({get:()=>t.show,set:o=>m("update:show",o)}),_=()=>{s.push({name:ue.SPORT_RECORD,query:{recordCurrent:pe.NOTSETTLED}})},d=()=>{a.value=!1,c.close("sportParlay")};return()=>{let o,u;return e(Q,{show:a.value,"onUpdate:show":l=>a.value=l,class:i["bet-result"],position:"bottom"},{default:()=>[e("div",{class:i["result-title"]},[e(je,{isSuccess:t.isBetSuccess,msg:t.betResultMsg,textClass:i["result-text"]},null),e("span",{class:i.record,onClick:_},[r("lobby.selfoperatedGames.sports.stakeRecord")])]),e("div",{class:i["result-list"]},[t.betList.map((l,y)=>e("div",{class:i["list-item"],key:y},[e("div",{class:[i.item,i.large]},[e("span",{class:i.text},[l.betCount,L("*"),Z(l.comboTypeName,"comboName")]),e(Fe,{class:i.num,price:l.price},null)]),t.isBetSuccess&&e(M,null,[e("div",{class:i.item},[e("span",{class:i.text},[r("lobby.selfoperatedGames.sports.betAmount")]),e("span",{class:i.num},[ce(Number(l.amount))])]),e("div",{class:[i.item,i.large]},[e("span",{class:i.text},[r("lobby.selfoperatedGames.sports.canGetMost")]),e("span",{class:i.num},[K([{amount:Number(l.amount),price:l.price,betCount:l.betCount}])])])])]))]),e("div",{class:i["result-btns"]},[e(W,{plain:!0,clearBackground:!0,type:"primary",block:!0,onClick:d},Y(o=r("lobby.selfoperatedGames.sports.backToHome"))?o:{default:()=>[o]}),e(W,{block:!0,onClick:()=>a.value=!1},Y(u=r("lobby.selfoperatedGames.sports.continueBetting"))?u:{default:()=>[u]})])]})}}});function rt(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const[nt]=P("pages-dialogs-sport-parlay-footer"),it=I({name:nt,props:{resError:Boolean},emits:["updateParlay"],setup(t,{emit:m}){const{t:r}=R(),c=de(),s=j(),a=O(),_=be(),d=ye(),o=h(!1),u=h(!1),l=h(!1),y=h(!0),p=h(),g=h([]),{showBetLimitError:B}=Me(),v=x(()=>o.value?a.comboList:a.comboList.slice(0,1)),T=x(()=>v.value.reduce((b,S)=>G(Number(S.amount)).times(S.betCount).plus(b).number,G(0).number).toString()),E=x(()=>K(v.value.map(b=>({amount:Number(b.amount),price:b.price,betCount:b.betCount})),"auto")),k=async()=>{var $,H,U;g.value=v.value.filter(n=>Number(n.amount)>0);const b=G(T.value);if(!b.isGreaterThan(0)){const n=($=g.value[0])!=null?$:v.value[0];B({minBet:n.minBet,maxBet:n.maxBet});return}if(b.isGreaterThan(d.value.game_gold)){C.error(r("lobby.selfoperatedGames.sports.insufficientBalance"));return}if(g.value.some(n=>{var F;const D=G((F=n.amount)!=null?F:0);if(D.isGreaterThan(n.maxBet)||D.isLessThan(n.minBet))return B({minBet:n.minBet,maxBet:n.maxBet}),!0}))return;l.value=!1,u.value=!0;const[S,N]=await se(fe({betInfo:{vendorTransId:De(),priceOption:c.oddsOption,tickets:a.parlayBetList.map(n=>({sporttype:n.sportType,marketid:n.market.marketId,price:n.selection.price,point:n.selection.point,key:n.selection.key})),combos:g.value.map(n=>({combotype:n.comboType,stake:Number(n.amount)})),language:(H=z[_e().language])!=null?H:z.en}}));if(u.value=!1,S){if(s.isAuthError)return;l.value=!0,y.value=!1,p.value=(U=S.message)!=null?U:r("lobby.selfoperatedGames.sports.betFalid");return}const{betStatus:re,parlayTicketStatus:ne}=N.data;if(re===He.Fail){m("updateParlay"),C.error(r(ne===null?"lobby.selfoperatedGames.sports.oddsChanged":"lobby.selfoperatedGames.sports.betFalid"));return}l.value=!0,y.value=!0,p.value="",_.updatePrize()},oe=()=>a.comboList.length===1?(o.value=!1,null):e("div",{class:f.type,onClick:()=>o.value=!o.value},[o.value?r("lobby.selfoperatedGames.sports.showLessBet"):r("lobby.selfoperatedGames.sports.showMoreBet"),e(ge,{class:f.arrow,direction:o.value?"up":"down"},null)]),le=x(()=>a.parlayBetList.length>1&&a.comboList.length);return()=>{let b;return e(Ge,{appear:!0,name:V.SlideUp},{default:()=>[ee(e("div",{class:f["bet-footer"]},[e("div",{class:f["footer-title"]},[oe(),e("div",{class:f.text},[r("lobby.selfoperatedGames.sports.totalBet"),e("span",{class:f.bet},[T.value])])]),e("div",{class:f["footer-main"]},[e(Ne,{name:V.SlideUp},rt(b=a.comboList.map((S,N)=>e(Je,{show:N===0||o.value,index:N,item:S},null)))?b:{default:()=>[b]})]),e("div",{class:f["footer-btns"]},[e(qe,null,null),e($e,{onBet:k,betLoading:u.value,unbetable:t.resError,winPriceWithSign:E.value},null)]),e(lt,{show:l.value,"onUpdate:show":S=>l.value=S,isBetSuccess:y.value,betResultMsg:p.value,betList:g.value},null)]),[[te,le.value]])]})}}}),ct="_title_kgwb0_35",ut="_text_kgwb0_51",pt="_point_kgwb0_64",mt="_price_kgwb0_74",w={"parlay-list":"_parlay-list_kgwb0_17","list-item":"_list-item_kgwb0_20","item-left":"_item-left_kgwb0_31",title:ct,text:ut,"item-right":"_item-right_kgwb0_56",point:pt,price:mt,"item-line":"_item-line_kgwb0_78","item-close":"_item-close_kgwb0_103"},[dt]=P("pages-dialogs-sport-parlay-list"),bt=I({name:dt,props:{loading:Boolean},emits:["updateParlay","clearAll"],setup(t,{emit:m}){const{t:r}=R(),c=j(),s=O(),a=o=>{if(s.parlayBetList.length===1){m("clearAll");return}s.parlayBetList.splice(o,1),C.success(r("lobby.selfoperatedGames.sports.clearBetType")),m("updateParlay")},_=x(()=>c.isAuthError||s.resError?"retry":t.loading?"nested-loading":s.parlayBetList.length?null:"empty"),d=()=>{s.resError=!1,J().sportAuthErrorHandler({onLogin:()=>(m("updateParlay"),Promise.resolve())})};return()=>e(he,{type:_.value,empty:{text:r("lobby.selfoperatedGames.sports.noEventsYet")},onRetry:d},{default:()=>[e("div",{class:w["parlay-list"]},[s.parlayBetList.map((o,u)=>{var v;const{market:l,selection:y,teamInfo:p,leagueName:g}=o,B=ve(y.point,l.betType);return e("div",{class:w["list-item"],key:u},[e("div",{class:w["item-left"]},[e("div",{class:w.title},[e("span",null,[y.keyName]),L(" "),B]),e("div",{class:w.text},[g,L(" "),e("br",null,null),p.homeName+o.liveHomeScore+" - "+o.liveAwayScore+p.awayName])]),e("i",{class:w["item-line"]},null),e("div",{class:w["item-right"]},[e("div",{class:w.point},[l.betTypeName,L(" "),B]),e(ae,{useSymbol:!0,price:(v=y.price)!=null?v:0,priceClass:w.price,arrowZoom:1.4,arrowPosition:"left",isChange:l.isChange},null)]),e(we,{class:w["item-close"],name:Se,onClick:()=>a(u)},null)])})])]})}}),yt="_balance_3wsjk_25",ft="_clear_3wsjk_35",A={"sport-parlay":"_sport-parlay_3wsjk_17","parlay-balance":"_parlay-balance_3wsjk_21",balance:yt,clear:ft};function _t(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const[gt]=P("pages-dialogs-sport-parlay"),Nt=I({name:gt,setup(){const{t}=R(),m=h(),r=Ae(m),c=j(),s=O(),{visible:a,onDialogClose:_}=Be("sportParlay"),d=h();_(()=>{s.openParlaySSEWatch=!1});const o=async()=>{d.value=!0,s.updateComboList([]),await s.fetchEventsAndMarkets(),await u(),d.value=!1,a.value&&(s.openParlaySSEWatch=!0)},u=async()=>{var v,T,E;const p=s.parlayBetList.length;if(p===0||p===1)return;const[g,B]=await se(Pe({parlayTickets:s.parlayBetList.map(k=>({sportType:k.sportType,marketId:k.market.marketId,point:k.selection.point,key:k.selection.key}))}));if(g){if(d.value=!1,s.updateComboList([]),c.isAuthError)return;s.openParlaySSEWatch=!1,C.error((v=g.message)!=null?v:t("lobby.selfoperatedGames.sports.marketParlayError"));return}s.updatePriceInfo((T=B.data.priceInfo)!=null?T:[]),s.updateComboList((E=B.data.combos)!=null?E:[])};X(()=>s.parlayPriceString,u);const l=()=>{s.parlayBetList.length&&Ie({title:t("lobby.common.tips.title"),message:t("lobby.selfoperatedGames.sports.confirmClearAll"),onConfirm:()=>{s.parlayBetList=[],C.success(t("lobby.selfoperatedGames.sports.clearAllBetType")),a.value=!1}})},y=async()=>{await J().guideLoginAll(),o()};return()=>e(Q,{show:a.value,"onUpdate:show":p=>a.value=p,position:"right",class:A["sport-parlay"],closeOnClickOverlay:!1,onOpened:y},{default:()=>[e(ke,null,{header:()=>{let p;return e(xe,{ref:m,onBack:()=>a.value=!1},{default:()=>[e(Te,{content:s.parlayBetList.length,position:"top-right",offset:["0.2rem",0]},_t(p=t("lobby.selfoperatedGames.sports.parlayBet"))?p:{default:()=>[p]})]})},default:()=>e(M,null,[e(Le,{offsetTop:r.height.value,zIndex:Ce()},{default:()=>[e("div",{class:A["parlay-balance"]},[e("div",{class:A.balance},[e(Ue,{size:"large"},null),e("div",{class:A.clear,onClick:l},[t("lobby.selfoperatedGames.sports.clearAll")])])])]}),e(bt,{loading:d.value,onUpdateParlay:o,onClearAll:l},null)]),footer:()=>e(it,{onUpdateParlay:o},null)})]})}});export{Nt as default};
//# sourceMappingURL=SportParlayIndex.BsHDfvRK.js.map
