import{a as B,cQ as ee,cR as ae,bq as R,I as N,q as G,E,cS as x,cT as te,b as F,cU as D,cV as P,cW as Q,bE as se,t as L,a6 as O,U as ne,c2 as ce,c4 as le,bB as oe,c5 as re,c6 as ue,c7 as ie,bz as be,az as $,a8 as de,a9 as ve,ct as me,Y as U,v as he,bV as ge,bL as pe,ca as _e,bN as ye,al as fe,aB as ke,w as Ie,bw as z}from"./main.C8q1iJMV.js";import{a as Ce}from"./index.C870Y1OX.js";import{u as J,s as X}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as V}from"./index.ruW6TaSz.js";import{L as Re}from"./LazyLoader.cfovhYZu.js";import{P as Te}from"./index.Dc16CbDK.js";import{m as Z,g as Se}from"../vendors/vendor-lodash.BYdGDldS.js";import{l as A,t as W,f as d,p as e,v as we,y as j,z as q,r as Ee,w as K,o as xe,a as Ae,C as De}from"../vendors/vendor-@vue.DNlpgob2.js";import{d as Le,e as Ne}from"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"./Progress.BhMcUY2s.js";const Be="_listItem_3yhn0_17",Ge="_progressWrapper_3yhn0_30",Me="_receiveAmt_3yhn0_33",ze="_center_3yhn0_52",Oe="_right_3yhn0_53",Ve="_left_3yhn0_56",We="_centerLeft_3yhn0_69",He="_icon_3yhn0_74",Pe="_item_3yhn0_79",$e="_lead_3yhn0_83",Ue="_centerRight_3yhn0_86",je="_upgradeVip_3yhn0_100",qe="_arrow_3yhn0_123",h={listItem:Be,progressWrapper:Ge,receiveAmt:Me,center:ze,right:Oe,left:Ve,centerLeft:We,icon:He,item:Pe,lead:$e,centerRight:Ue,upgradeVip:je,arrow:qe},[Ke]=G("pages-cashback-list-item"),Ye=A({name:Ke,props:{category:{type:Object,default:null},cashbackItem:{type:Object,default:null}},setup(r){const{t:_}=B(),u=F(),g=J(),{cashbackItem:s}=W(r),f=V(),{cashbackConfig:C}=X(f),c=()=>{var n,l;u.push({name:E.CASHBACK_RATES,query:Z({},g.query,{[x.CURRENT]:te.CASHBACKRATES,[x.GAMECATEGORYID]:(n=s.value)==null?void 0:n.gameCategoryId,[x.GAMESECONDCATEID]:(l=s.value)==null?void 0:l.gameSecondCateId})})},m=d(()=>{var n;return((n=C.value)==null?void 0:n.returnGoldType)===ee.vip}),v=d(()=>{var a,t,b,T,H;const{gameCategoryId:n,gameSecondCateId:l}=s.value,y=(b=(t=(a=ae().gameCategoriesInfoList)==null?void 0:a.find(M=>M.gameCategoryId===n))==null?void 0:t.list)!=null?b:[];return y&&(H=(T=y.find(M=>M.platformId===l))==null?void 0:T.platformLogo)!=null?H:""}),p=d(()=>{var n,l;return((n=s.value)==null?void 0:n.rateId)===((l=s.value)==null?void 0:l.nextRateId)}),k=d(()=>{var n,l;return p.value?"":_("lobby.cashback.table.betAgain",{b:R((n=s.value)==null?void 0:n.remainingBet),r:R((l=s.value)==null?void 0:l.nextRate)})}),o=d(()=>{const{validBet:n=0,nextBet:l=0}=s.value||{};return p.value?100:Math.floor(n/l*100)}),i=d(()=>{var n,l,y;return typeof((n=s.value)==null?void 0:n.returnGold)=="number"?R((l=s.value)==null?void 0:l.returnGold):(y=s.value)==null?void 0:y.returnGold});return()=>e(Re,null,{default:()=>{var n,l,y,a;return[e("div",{class:h.listItem,onClick:c},[e("div",{class:h.center},[e("div",null,[e("p",{class:h.centerLeft},[e(N,{class:h.icon,src:v.value},null),e("div",{class:h.item},[e("label",null,[_("lobby.cashback.subInfo.validBets")]),e("span",{class:h.lead},[R((n=s.value)==null?void 0:n.validBet)])])]),e("p",{class:h.centerRight},[e("div",{class:h.item},[e("label",null,[_("lobby.cashback.pageTitle.rates")]),e("span",{class:h.lead},[R((l=s.value)==null?void 0:l.rate),we("%")])])])]),e("div",{class:h.bottomRow},[m.value?e("span",{class:h.upgradeVip},[!p.value&&_("lobby.cashback.table.upgradeVip",{v:(y=s.value)==null?void 0:y.nextVip,r:(a=s.value)==null?void 0:a.nextRate})]):e("div",{class:h.progressWrapper},[e(Te,{text:k.value,percent:o.value},null)]),e("p",null,[e("label",null,[_("lobby.cashback.subInfo.canReceive")]),e("span",{class:h.receiveAmt},[i.value])])])]),e("div",{class:h.arrow},[e(N,{src:"/lobby_asset/common/web/common/comm_icon_fh.svg"},null)])])]}})}}),Fe="_subInfo_199gg_17",Qe="_h5WashableCode_199gg_25",Je="_washableCode_199gg_31",Xe="_settingText_199gg_44",Ze="_data_199gg_50",ea="_amount_199gg_65",aa="_value_199gg_69",ta="_icon_199gg_73",I={subInfo:Fe,h5WashableCode:Qe,washableCode:Je,settingText:Xe,data:Ze,amount:ea,value:aa,icon:ta},[sa]=ne("pages-cashback-sub-info"),na=A({name:sa,setup(){const{t:r}=B();return()=>{var v,p,k;const _=V(),{cashbackConfig:u,listErr:g}=W(_),s=d(()=>{var n;const{settlePeriod:o,receiveType:i}=((n=u.value)==null?void 0:n.goldSetting)||{};return o===D.NotMandatory||i===P.RealTime||i===P.NextDay}),f=d(()=>{var i;const{settleType:o}=((i=u.value)==null?void 0:i.goldSetting)||{};return o===Q.sysDispatch}),C=d(()=>se()),c=o=>Le().hour(o).minute(0).second(0).format("HH:mm:ss"),m=d(()=>{var a,t;if(!((a=u.value)!=null&&a.goldSetting))return"";const{settlePeriod:o,settleDay:i,settleWeek:n,settleHour:l}=((t=u.value)==null?void 0:t.goldSetting)||{};return{[D.Day]:r("lobby.cashback.subInfo.settingDay",{x:c(l)}),[D.Week]:"".concat(C.value[n]).concat(r("lobby.cashback.subInfo.settingWeek",{x:c(l)})),[D.Month]:r("lobby.cashback.subInfo.settingMonth",{d:i,x:c(l)})}[o]});return e("div",{class:[I.subInfo]},[f.value&&e("div",{class:I.h5WashableCode},[e(L,{class:I.washableCode,html:r("lobby.cashback.subInfo.washableCode",{x:R((p=(v=u.value)==null?void 0:v.autoSendReturnGold)!=null?p:0,2)})},null),e(L,{class:I.settingText,html:m.value},null)]),j(e("div",{class:I.data},[e(L,{html:r("lobby.cashback.subInfo.todayCollection")},null),e(O,{class:I.amount},{default:()=>{var o,i;return[e("span",{class:I.value},[R((i=(o=u.value)==null?void 0:o.curReturnGold)!=null?i:0,2)])]}})]),[[q,g.value||!f.value&&s.value]]),j(e("div",{class:I.data},[e(L,{html:r("lobby.cashback.subInfo.tomorrowCollection")},null),e(O,null,{default:()=>{var o,i;return[e("span",{class:I.value},[R((i=(o=u.value)==null?void 0:o.nextReturnGold)!=null?i:0,2)])]}})]),[[q,g.value||!f.value&&((k=u.value)==null?void 0:k.nextReturnGold)]])])}}}),S={"cashback-tab-wrapper":"_cashback-tab-wrapper_wwi7s_17","cashback-tab-item":"_cashback-tab-item_wwi7s_22","cashback-tab-image":"_cashback-tab-image_wwi7s_35","cashback-tab-name":"_cashback-tab-name_wwi7s_42","cashback-tab-item-active":"_cashback-tab-item-active_wwi7s_70"},[ca]=G("pages-cashback-tab-title"),la=A({name:ca,props:{curTab:{type:Number,default:null},tabItem:{type:Object,default:null}},setup(r){const{curTab:_,tabItem:u}=W(r),g=d(()=>{var c;return _.value===((c=u.value)==null?void 0:c.categoryId)}),s=c=>{c=c!=null?c:g.value;const m=re.useMenuBg("normal"),{chooseBg:v}=ue(),p=m.base||v.value,k=m.select||ie("common/btn_zc1_1.png","{layout}-{bg}-{skin}","web");return c?k:p},f=d(()=>s),C=d(()=>{var v,p;const{t:c}=B(),m=c("lobby.gameMenu.menu".concat((p=(v=u.value)==null?void 0:v.categoryId)!=null?p:0));return typeof m=="string"?ce(m):m});return()=>e("div",{class:S["cashback-tab-wrapper"]},[e(N,{tag:"div",class:{[S["cashback-tab-item"]]:!0,[S["cashback-tab-item-active"]]:g.value},src:f.value(g.value),replaceExtension:!1},{default:()=>{var c;return[g.value&&e(le,null,null),e(N,{tag:"div",class:S["cashback-tab-image"],src:oe[(c=u.value)==null?void 0:c.activeCateId].normal,replaceExtension:!1},null),e("div",{class:{[S["cashback-tab-name"]]:!0,[S["cashback-active-text-color"]]:g.value}},[C.value])]}})])}}),w={"cashback-container":"_cashback-container_13ozo_17","cashback-placeholder":"_cashback-placeholder_13ozo_21","cashback-tabs":"_cashback-tabs_13ozo_25","cashback-tabs-title":"_cashback-tabs-title_13ozo_28","list-placeholder":"_list-placeholder_13ozo_35","cashback-list":"_cashback-list_13ozo_39","cashback-extra-button":"_cashback-extra-button_13ozo_44"};function Y(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!De(r)}const[oa]=G("pages-cashback-tab-list"),ra=41040,ua=A({name:oa,setup(){const{t:r}=B(),_=F(),u=J(),g=V(),{curTab:s,isListLoading:f,listErr:C,categoryList:c,cashbackConfig:m}=X(g),v=Ee(!1),p=d(()=>{var t,b;const a=Se(C.value,"data.errorCode");return f.value&&!((t=k.value)!=null&&t.length)?"loading":C.value&&a!==ra?"retry":(b=c.value)!=null&&b.length?null:"empty"});K(()=>u.query[x.GAMECATEGORYID],a=>{u.name===E.CASHBACK&&(isNaN(Number(a))||(s.value=Number(a)))},{immediate:!0}),K(s,a=>{u.name===E.CASHBACK&&_.replace({name:E.CASHBACK,query:Z({...u.query,[x.GAMECATEGORYID]:a})})});const k=d(()=>{var t,b;const a=(t=c.value)==null?void 0:t.find(T=>T.categoryId===s.value);return(b=a==null?void 0:a.list)!=null?b:[]});xe(async()=>{o()});const o=async()=>{var a,t;await g.getCashbackSummary(),c.value.length&&be(s.value)&&(s.value=(t=(a=c.value)==null?void 0:a[0])==null?void 0:t.categoryId)},i=()=>{_.push({name:E.RECORDS})},n=d(()=>{var a,t;return $().hasLogined&&((t=(a=m.value)==null?void 0:a.goldSetting)==null?void 0:t.settleType)!==Q.sysDispatch}),l=d(()=>{var a,t,b;return((t=(a=m.value)==null?void 0:a.curReturnGold)!=null?t:0)<=0||((b=m.value)==null?void 0:b.receiveStatus)===1}),y=async()=>{if(v.value)return;if(!$().hasLogined){ge().openLoginRegister();return}if(v.value=!0,await pe.check({checkOptions:{[_e.forbidReceive]:!0},eventData:{}})){v.value=!1;return}const[t]=await Ne(Ce());v.value=!1,!t&&(ye().updatePrize(),fe.Receive(),ke().freshDiscountRedDot(),Ie.success({message:r("lobby.cashback.successTips")}),o())};return Ae(()=>{o()}),()=>e(he,{class:w["cashback-container"],useScroll:!1},{default:()=>[e(O,{class:[w["cashback-placeholder"]],type:p.value,empty:{text:r("lobby.event.luckyWheel.tabs.noData")},onRetry:o},{default:()=>[e(de,{active:s.value,"onUpdate:active":a=>s.value=a,navPosition:"left",class:w["cashback-tabs"],contentScrollable:!0,contentScrollProps:{bindRoute:!0},tabVShowMode:!1,titleNavClass:w["cashback-tabs-title"]},{default:()=>{var a;return[(a=c.value)==null?void 0:a.map(t=>e(ve,{key:t.categoryId,name:t.categoryId,title:()=>e(la,{tabItem:t,curTab:s.value},null),content:()=>s.value!==t.categoryId?null:e(me,{class:[w["cashback-list"]],finished:!0},{default:()=>{var b;return[(b=k.value)==null?void 0:b.map(T=>e(Ye,{category:t,cashbackItem:T},null))]}})},null))]},"nav-extra":()=>{var b;let a,t;return(b=c.value)!=null&&b.length?e("div",{class:w["cashback-extra-button"]},[n.value&&e(U,{type:"success",disabled:l.value,loading:v.value,size:"small",onClick:y},Y(a=r("lobby.reward.base.allReceive"))?a:{default:()=>[a]}),e(U,{size:"small",onClick:i},Y(t=r("lobby.game.nav.receiveRecord"))?t:{default:()=>[t]})]):null}})]})],header:()=>e(na,null,null)})}}),[ia]=G("pages-cashback"),Sa=A({name:ia,setup(){return z.doReport({rule:z.rules.CUSTOM_BURIED,eventName:z.buriedEvents.EnterCashback}),()=>e(ua,null,null)}});export{Sa as default};
//# sourceMappingURL=CashbackIndex.D_2Q0w0j.js.map
