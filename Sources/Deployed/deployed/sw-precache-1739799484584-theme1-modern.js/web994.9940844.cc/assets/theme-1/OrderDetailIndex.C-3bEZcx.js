import{gM as ve,gN as ge,a as L,cm as ae,gO as Ee,a0 as K,gw as ue,I as N,U as k,w as G,gP as Ce,Y as J,s as de,gQ as he,_ as Q,gg as we,cd as De,dM as I,a3 as me,a4 as Z,gR as Ae,gS as Se,gT as Oe,bG as V,W as Re,ai as Y,by as pe,bt as Te,R as Ie,a6 as _e,gU as xe,B as Pe,v as Ne,E as ke}from"./main.C8q1iJMV.js";import{d as Le,s as Me,b as Fe,u as be}from"../vendors/vendor-stable.LD58Pbb3.js";import{e as M}from"../vendors/vendor-default.CjiYZF7Q.js";import{s as se,r as y,l as T,h as X,p as e,v as j,C as q,f as R,F as ee,w as fe,n as $e}from"../vendors/vendor-@vue.DNlpgob2.js";import{f as _,b,k as Ue,g as ne,l as Be,i as Ge}from"./enum.CcXhH6KG.js";import{r as je,b as He,c as We,d as Ve,a as Je}from"./utils.IM8NOqLZ.js";import{R as ye}from"./Rating.DNfs8bTi.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{U as qe}from"./UploadIndex.CYQY2hWp.js";import{u as Ye}from"./useFileUpload.njlonVJS.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";const x=Le("claim-order-detail",()=>{const t=se(),l=y(),n=se(),a=y(!1),c=async u=>{if(!u){t.value=void 0;return}l.value="loading";const[m,p]=await M(ve(u));if(m)return l.value="retry",!1;l.value=void 0,t.value=p.data.data,r()},r=async()=>{if(!t.value){n.value=void 0;return}a.value=!0;const[u,m]=await M(ge({chatId:t.value.chatId,minMsgId:0,size:999}));a.value=!1,u||(n.value=m.data.data)};return{detail:t,apiStatus:l,messageData:n,messageLoading:a,getOrderDetail:c,getMessageList:r}}),ze="_evaluate_1k5ek_17",Qe="_popup_1k5ek_21",Ze="_rating_1k5ek_24",P={evaluate:ze,popup:Qe,rating:Ze,"rating-title":"_rating-title_1k5ek_31","rating-text":"_rating-text_1k5ek_35","textarea-wrap":"_textarea-wrap_1k5ek_39","evaluation-value":"_evaluation-value_1k5ek_61","word-counts":"_word-counts_1k5ek_64"};function oe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const[Ke]=k("pages-claim-order-detail-evaluate"),Xe=T({name:Ke,setup(){const{t}=L(),l=x(),n=y(!1),a=X({score:0,evaluation:""}),c=async()=>{var u;if(a.score<1){G({type:"error",message:t("lobby.center.claim.claimsEvaluation")});return}const[r]=await M(Ce({claimId:l.detail.claimId,...a}));l.getOrderDetail((u=l.detail)==null?void 0:u.claimId),!r&&(G({type:"success",message:t("lobby.center.claim.claimOrderDetails.submitSuccess")}),n.value=!0)};return()=>{let r,u;return!l.detail||![_.REJECTED,_.COMPLETED].includes(l.detail.claimStatus)?null:e("div",{class:P.evaluate},[e(ae,{plain:!0,block:!0,onClick:()=>n.value=!0,type:"primary",clearBackground:!0,disabled:!!l.detail.score},oe(r=t("lobby.center.claim.claimOrderDetails.feedback"))?r:{default:()=>[r]}),e(Ee,{onClose:()=>{n.value=!1},onExtraClick:()=>{n.value=!1},show:n.value,"onUpdate:show":m=>n.value=m,class:P.popup,title:t("lobby.center.claim.claimOrderDetails.serviceRating")},{default:()=>{var m;return[e("div",{class:P.rating},[e("p",{class:P["rating-title"]},[t("lobby.center.claim.claimOrderDetails.rateService")]),e(ye,{modelValue:a.score,"onUpdate:modelValue":p=>a.score=p},null),a.score>0&&e("p",{class:P["rating-text"]},[je(a.score)])]),e("div",{class:P["textarea-wrap"]},[e(K,{class:[a.evaluation?P["evaluation-value"]:""],autosize:!0,rows:5,type:"textarea",maxlength:200,value:a.evaluation,"onUpdate:value":p=>a.evaluation=p,placeholder:t("lobby.center.claim.claimOrderDetails.additionalComments")},null),!a.evaluation&&e(ue,{tag:"span",onPaste:p=>{p&&(a.evaluation=p)}},null)]),e("p",{class:P["word-counts"]},[(m=a.evaluation.length)!=null?m:0,j("/200"),t("lobby.center.claim.claimOrderDetails.word")]),e(ae,{onClick:c,block:!0},oe(u=t("lobby.center.claim.claimForm.submit"))?u:{default:()=>[u]})]},headerExtra:()=>e(N,{src:"/lobby_asset/common/web/common/comm_icon_x.svg"},null)})])}}}),et="_footer_1yipf_17",z={footer:et,"btn-submit":"_btn-submit_1yipf_21","btn-cancel":"_btn-cancel_1yipf_24"};function re(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const tt=T({emits:["submit"],setup(t,{emit:l}){const{t:n}=L(),a=x(),c=async()=>{var u;const[r]=await M(he(a.detail.claimId));r||(G({type:"warn",message:n("lobby.center.claim.claimOrderDetails.cancelOrderSuccess")}),a.getOrderDetail((u=a.detail)==null?void 0:u.claimId))};return()=>{var m,p,f;let r,u;return!((m=a.detail)!=null&&m.claimStatus)||![_.PENDING_ACCEPTANCE,_.PROCESSING,_.PENDING_PAYMENT].includes((p=a.detail)==null?void 0:p.claimStatus)?null:e("footer",{class:z.footer},[((f=a.detail)==null?void 0:f.claimStatus)===_.PENDING_ACCEPTANCE&&e(J,{block:!0,plain:!0,type:"primary",clearBackground:!0,class:z["btn-cancel"],onClick:()=>{de({type:"error",title:n("lobby.modal.title.error"),message:n("lobby.center.claim.claimOrderDetails.isCancelOrder"),onConfirm:c,showCancelButton:!0})}},re(r=n("lobby.center.claim.claimOrderDetails.cancelOrder"))?r:{default:()=>[r]}),e(J,{type:"primary",class:z["btn-submit"],block:!0,onClick:()=>l("submit")},re(u=n("lobby.center.claim.claimOrderDetails.replyMessage"))?u:{default:()=>[u]})])}}}),lt=()=>{const t=x(),{t:l}=L(),n=R(()=>{var i,o,d,C;return(i=t.detail)!=null&&i.withdrawAccount?"".concat(((o=t.detail)==null?void 0:o.withdrawTypeName)||((d=t.detail)==null?void 0:d.bankName)).concat(l("lobby.finance.withdraw.bankLessNo",{no:(C=t.detail)==null?void 0:C.withdrawAccount.slice(-4)})):"-"}),a=R(()=>{var i,o;return(i=t.detail)!=null&&i.claimAmount?Q((o=t.detail)==null?void 0:o.claimAmount).toFixed({decimalPlaces:2,tailZero:!0}).toString():"-"}),c=R(()=>{var i,o,d;return(i=t.detail)!=null&&i.realAmount?Q((o=t.detail)==null?void 0:o.realAmount,{code:(d=t.detail)==null?void 0:d.realCurrency,toFixedType:"currency"}).toString():"-"}),r=R(()=>{var d;const i=(d=t.detail)==null?void 0:d.claimType,o=[b.FALSE_MANUAL_WITHDRAWAL,b.LARGE_WITHDRAWAL_REJECTED,b.HIGH_PROFIT_REJECTED,b.ACCOUNT_FUNDS_STOLEN];return i&&o.includes(i)}),u=R(()=>{var w,D,A;const i=(w=t.detail)==null?void 0:w.claimType,o=(D=t.detail)==null?void 0:D.claimStatus,d=[b.VIOLATION_NO_REFUND,b.FALSE_MANUAL_WITHDRAWAL,b.LARGE_WITHDRAWAL_REJECTED,b.HIGH_PROFIT_REJECTED],C=[_.COMPLETED,_.PENDING_PAYMENT];return!!Number((A=t.detail)==null?void 0:A.realAmount)&&i&&d.includes(i)&&o&&C.includes(o)}),m=R(()=>{var d;const i=(d=t.detail)==null?void 0:d.claimType,o=[b.VIOLATION_NO_REFUND,b.FALSE_MANUAL_WITHDRAWAL,b.LARGE_WITHDRAWAL_REJECTED,b.HIGH_PROFIT_REJECTED];return i&&o.includes(i)}),p=R(()=>{var d;const i=(d=t.detail)==null?void 0:d.claimType,o=[b.MANUAL_DEDUCTION];return i&&o.includes(i)}),f=R(()=>{var D,A,S;const i=(D=t.detail)==null?void 0:D.claimType,o=(A=t.detail)==null?void 0:A.claimStatus,d=[b.VIOLATION_NO_REFUND,b.FALSE_MANUAL_WITHDRAWAL,b.LARGE_WITHDRAWAL_REJECTED,b.HIGH_PROFIT_REJECTED],C=[_.COMPLETED,_.PENDING_PAYMENT],w=o===_.COMPLETED?(S=t.detail)==null?void 0:S.withdrawOrder:!0;return i&&d.includes(i)&&o&&C.includes(o)&&w});return{withdrawAccount:n,claimAmount:a,realAmount:c,showRelatedOrders:r,showRealCompensation:u,showReceivingAccount:m,showAbnormalRecords:p,showPaymentRecord:f}},ie={"currency-box":"_currency-box_mydsv_17","icon-currency":"_icon-currency_mydsv_28"},[at]=k("pages-claim-order-detail-currency-icon"),st=T({name:at,props:{userCurrency:{type:String,default:""}},setup(t){const l=we(),a=(()=>{var r;const c=t.userCurrency?t.userCurrency:l.value.currency||"CNY";return(r=De[c])==null?void 0:r.NORMAL})();return()=>e(N,{tag:"div",useSkeleton:!0,class:ie["currency-box"],src:"/lobby_asset/common/common/_sprite/img_hb_frame.png",onClick:c=>c.stopPropagation()},{default:()=>[a&&e(N,{src:a,useSkeleton:!0,class:ie["icon-currency"]},null)]})}}),nt="_info_10496_17",ot="_lable_10496_22",rt="_value_10496_25",it="_tips_10496_55",ct="_footer_10496_75",v={info:nt,lable:ot,value:rt,"btn-copy":"_btn-copy_10496_33","btn-edit":"_btn-edit_10496_34","form-item":"_form-item_10496_43","input-prefix-icon":"_input-prefix-icon_10496_48","input-suffix":"_input-suffix_10496_51",tips:it,"email-wrapper":"_email-wrapper_10496_68",footer:ct,"btn-cancel":"_btn-cancel_10496_81","btn-submit":"_btn-submit_10496_84"};function ce(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const ut=T({setup(){const{t}=L(),l=x(),n=y(),a=y(null),c=y("readonly"),r=X({email:""}),u=async()=>{r.email=await Se()},m=()=>{var i,o;r.email=(o=(i=l.detail)==null?void 0:i.notifyEmail)!=null?o:"",c.value="edit"},p=()=>a.value&&a.value.focus(),f=async()=>{const[i]=await M(Oe({claimId:l.detail.claimId,email:r.email}));i||(G({type:"success",message:t("lobby.center.claim.claimOrderDetails.submitSuccess")}),l.detail={...l.detail,notifyEmail:r.email},c.value="readonly")};return()=>{let i,o;return l.detail?e(ee,null,[e("div",{class:v.info},[e("span",{class:v.lable},[t("lobby.center.claim.claimOrderDetails.notificationEmail")]),c.value==="readonly"?e("span",{class:v.value,onClick:p},[l.detail.notifyEmail||"",[_.PENDING_ACCEPTANCE,_.PROCESSING].includes(l.detail.claimStatus)?e(N,{class:v["btn-edit"],onClick:m,src:"/lobby_asset/common/web/profile/style_1_icon_list_yjfk.svg"},null):l.detail.notifyEmail?e(I,{class:v["btn-copy"],text:l.detail.notifyEmail},null):null]):e(me,{model:r,ref:n,onSubmit:f},{default:()=>[e(Z,{name:"email",class:v["form-item"],rules:d=>d&&!Ae(d)?t("lobby.common.components.auth.email.formatError"):!0},{default:()=>[e(K,{placeholder:t("lobby.center.claim.claimForm.notifyEmailPlaceholder"),ref:a,value:r.email,"onUpdate:value":d=>r.email=d,clearable:!0},{suffix:r.email?null:()=>e("span",{class:v["input-suffix"],onClick:u},[t("lobby.common.tips.paste")])})]})]})]),e("p",{class:v.tips},[t("lobby.center.claim.claimForm.emailTips"),e("span",{class:v["email-wrapper"]},[e("b",null,[j("gc@no.com")]),e(I,{class:v["btn-copy"],text:"gc@no.com"},null)]),e("b",null,[t("lobby.center.claim.claimForm.emailTips2")]),t("lobby.center.claim.claimForm.emailTips3")]),c.value==="edit"&&e("footer",{class:v.footer},[e(J,{plain:!0,clearBackground:!0,type:"primary",class:v["btn-cancel"],onClick:()=>{c.value="readonly"}},ce(i=t("lobby.saveShortcut.cancle"))?i:{default:()=>[i]}),e(J,{class:v["btn-submit"],onClick:()=>{var d;(d=n.value)==null||d.submit()}},ce(o=t("lobby.center.setting.save"))?o:{default:()=>[o]})])]):null}}}),dt="_infoArea_2d01f_17",mt="_lable_2d01f_32",pt="_success_2d01f_35",_t="_error_2d01f_38",bt="_value_2d01f_41",ft="_text_2d01f_50",yt="_colorD_2d01f_56",vt="_bold_2d01f_59",gt="_pf_2d01f_66",Et="_subP_2d01f_70",Ct="_neutral2_2d01f_79",ht="_showCurrentAccount_2d01f_84",wt="_commonCurrency_2d01f_89",Dt="_title_2d01f_103",At="_btnCopy_2d01f_110",s={infoArea:dt,lable:mt,success:pt,error:_t,value:bt,text:ft,colorD:yt,bold:vt,"abnormal-records":"_abnormal-records_2d01f_62",pf:gt,subP:Et,neutral2:Ct,showCurrentAccount:ht,commonCurrency:wt,"abnormal-records-box":"_abnormal-records-box_2d01f_98",title:Dt,btnCopy:At},[St]=k("pages-claim-order-info"),Ot=T({name:St,setup(){const{t}=L(),l=x(),{withdrawAccount:n,claimAmount:a,realAmount:c,showRelatedOrders:r,showRealCompensation:u,showReceivingAccount:m,showAbnormalRecords:p,showPaymentRecord:f}=lt();return()=>{var i,o,d,C,w,D,A;return l.detail?e("div",{class:s.infoArea},[e("ul",null,[e("li",{class:s.title},[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.decisionResult")]),((i=l.detail)==null?void 0:i.claimStatus)===_.COMPLETED&&(l.detail.winner===Ue.MEMBER?e("span",{class:s.success},[t("lobby.center.claim.claimOrderDetails.win")]):e("span",{class:s.error},[t("lobby.center.claim.claimOrderDetails.lost")]))]),e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.claimType")]),e("span",{class:[s.value]},[e("b",null,[He(l.detail.claimType)])])]),e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.applicationID")]),e("span",{class:s.value},[e("span",null,[l.detail.claimId]),l.detail.claimId&&e(I,{class:s.btnCopy,text:(o=l.detail.claimId)!=null?o:"-"},null)])]),e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.applicationTime")]),e("span",{class:s.value},[V(l.detail.createTime)])]),e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.dateRange")]),e("span",{class:s.value},["".concat(V(l.detail.startTime,"ymd")," ~ ").concat(V(l.detail.endTime,"ymd"))])]),e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.claimAmount")]),e("span",{class:[s.value,s.showCurrentAccount]},[e(st,null,null),e("b",null,[a.value]),e("span",{class:s.ml20},[l.detail.claimAmount&&e(I,{class:s.btnCopy,text:a.value},null)])])]),u.value&&e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.actualPayout")]),e("span",{class:[s.value,s.pf]},[e("p",{class:s.subP},[e("span",{class:s.text},[c.value,e("span",null,[j(" "),l.detail.realCurrency])]),l.detail.realAmount&&e(I,{class:s.btnCopy,text:c.value},null)]),!!Number(l.detail.withdrawRate)&&l.detail.withdrawRateStr&&e("p",{class:s.subP},[e("span",{class:[s.value,s.neutral2]},["".concat(t("lobby.finance.withdraw.rate")," ").concat(l.detail.withdrawRateStr.replace(l.detail.withdrawRate,Q(l.detail.withdrawRate,{code:l.detail.claimCurrency,sign:!1,toFixedType:"rate"}).toString()))])])])]),m.value&&e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.receivingAccount")]),e("span",{class:s.value},[e("span",null,[n.value]),e(I,{class:s.btnCopy,text:(d=l.detail)==null?void 0:d.withdrawAccount},null)])]),r.value&&e("li",{class:s["abnormal-records-box"]},[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.abnormalRecords")]),e("p",{class:[s.value,s["abnormal-records"],s.bold]},[e("span",null,[l.detail.abnormalRecords.join(" / ")]),e(I,{class:s.btnCopy,text:(C=l.detail.abnormalRecords.join("/").toString())!=null?C:"-"},null)])]),p.value&&e("li",{class:s["abnormal-records-box"]},[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.abnormalWithdrawal")]),e("p",{class:[s.value,s["abnormal-records"]]},[e("span",null,[l.detail.abnormalRecords.join(" / ").toString()]),e(I,{class:s.btnCopy,text:(w=l.detail.abnormalRecords.join("/").toString())!=null?w:"-"},null)])]),f.value&&e("li",null,[e("span",{class:s.lable},[t("lobby.center.claim.claimOrderDetails.payoutOrder")]),e("span",{class:s.value},[e("span",{class:[s.text,s.colorD]},[(D=l.detail.withdrawOrder)!=null?D:"-"]),l.detail.withdrawOrder&&e(I,{class:s.btnCopy,text:(A=l.detail.withdrawOrder)!=null?A:"-"},null)])])]),e(ut,null,null)]):null}}}),Rt={type:{type:String,validate:t=>["image","video"].includes(t)},url:{type:String,required:!0},fileClass:[String,Array,Object],videoPlayButtonVisible:{type:Boolean,default:!0},isShowCloseButton:{type:Boolean,default:!1}},[Tt,W]=k("media-preview"),It=T({name:Tt,props:Rt,setup(t){const l=y(!1),n=()=>{l.value=!l.value};return()=>e(ee,null,[t.type==="image"?e(N,{class:[W(),t.fileClass],onClick:n,src:t.url},null):e("div",{class:[W(),t.fileClass],onClick:n},[e("video",{src:t.url},null),t.videoPlayButtonVisible&&e("span",null,null)]),e(Re,{show:l.value,"onUpdate:show":a=>l.value=a,class:W("popup-preview")},{default:()=>[t.type==="image"?e("img",{src:t.url,onClick:n},null):e("video",{controls:!0,src:t.url},null),t.isShowCloseButton&&e("div",{class:W("btn-close")},[e(N,{onClick:a=>{n(),a.stopPropagation()},src:"/lobby_asset/common/web/common/img_close_s2.svg"},null)])]})])}}),xt="_title_1esfe_17",Pt="_subtitle_1esfe_26",Nt="_message_1esfe_74",kt="_me_1esfe_74",Lt="_content_1esfe_83",Mt="_file_1esfe_96",Ft="_header_1esfe_104",$t="_date_1esfe_110",g={title:xt,subtitle:Pt,"refresh-icon":"_refresh-icon_1esfe_29","box-message":"_box-message_1esfe_34",message:Nt,me:kt,content:Lt,"file-list":"_file-list_1esfe_96",file:Mt,header:Ft,"role-name":"_role-name_1esfe_107",date:$t},[Ut]=k("pages-claim-order-message"),Bt=T({name:Ut,setup(){const{t}=L(),l=y(),n=x(),a=Me(n),c=y([]);return fe(()=>a.messageData.value,r=>{c.value=(r==null?void 0:r.msgList)||[],$e(()=>{l.value.scrollHeight&&pe(l.value,{y:l.value.scrollHeight})})}),()=>{var r;return a.messageData.value?e(ee,null,[e("h6",{class:g.title},[e("p",null,[t("lobby.center.claim.claimOrderDetails.message"),e("span",{class:g.subtitle},[t("lobby.center.claim.claimOrderDetails.claimEvidence")])]),e(N,{onClick:n.getMessageList,class:[g["refresh-icon"],{[Y.Animated]:n.messageLoading},Y.Actions.Spin,Y.Repeat.Infinite],src:"/lobby_asset/common/web/common/comm_icon_retry.svg"},null)]),e("div",{class:g["box-message"],ref:l},[(r=c.value)==null?void 0:r.map(u=>{var m,p;return e("div",{class:[g.message,(u==null?void 0:u.formUserRole)===ne.MEMBER?g.me:""],key:u.msgID},[e("header",{class:g.header},[e("span",{class:g["role-name"]},[We(u.formUserRole)]),e("span",{class:g.date},[V((m=u.createTime)!=null?m:0)])]),e("div",{class:g.content},[e("p",null,[u.content]),e("div",{class:{[g["file-list"]]:!!u.fileList.length,[g.me]:(u==null?void 0:u.formUserRole)===ne.MEMBER}},[(p=u.fileList)==null?void 0:p.map(f=>!f.url||!f.type?null:e(It,{key:f.url,fileClass:g.file,url:f.url,type:f.type===Be.IMAGE?"image":"video",videoPlayButtonVisible:!0,isShowCloseButton:!1},null))])])])})])]):null}}}),Gt="_reply_1ofif_17",jt="_title_1ofif_21",Ht="_word_1ofif_31",Wt="_require_1ofif_38",Vt="_addPadding_1ofif_97",Jt="_upload_1ofif_100",qt="_tips_1ofif_103",Yt="_process_1ofif_108",zt="_bar_1ofif_119",E={reply:Gt,title:jt,word:Ht,"textarea-wrap":"_textarea-wrap_1ofif_34",require:Wt,addPadding:Vt,upload:Jt,tips:qt,process:Yt,bar:zt,"upload-err-msg":"_upload-err-msg_1ofif_128"},[Qt]=k("pages-claim-order-detail-reply"),Zt=T({name:Qt,setup(){const{t}=Fe(),l=y([]),n=x(),a=be(),c=Te({onlyParent:!1}),{uploadProgress:r,uploadStatus:u,uploadedFiles:m,uploadFile:p,reUpload:f}=Ye(),i=y(!1),o=X({content:""}),d=y(),C=y(),w=y(),D=async()=>{var F,$,U,h,O,te,le;if(i.value)return;if(i.value=!0,await p(l.value.map(H=>({file:H}))),u.value===Ge.FAILURE){A();return}const[S]=await M(xe({fileList:($=(F=m.value)==null?void 0:F.map(H=>({type:H.type,url:H.url})))!=null?$:[],chatId:(h=(U=n.detail)==null?void 0:U.chatId)!=null?h:"",content:o.content}));if(i.value=!1,S){n.getOrderDetail((O=a.query)==null?void 0:O.id);return}G({type:"success",message:t("lobby.center.claim.claimOrderDetails.submitSuccess")}),o.content="",(te=w.value)==null||te.clear(),await n.getMessageList(),(le=d.value)==null||le.resetForm(),pe(c.value,{y:c.value.scrollHeight})};Ie({submit(){var S;(S=d.value)==null||S.submit()}});const A=()=>{de({type:"warning",title:t("lobby.center.claim.kindTips"),confirmButtonText:t("lobby.center.claim.claimForm.continueUpload"),showCancelButton:!0,onConfirm:()=>{f()},onCancel:()=>{},message:()=>e("div",null,[e("p",{class:E["upload-err-msg"]},[t("lobby.center.claim.claimForm.uploadDataPrompt3")]),e("div",{class:E.process},[e("div",{class:E.bar,style:{width:r.value+"%"}},null),e("span",null,[t("lobby.center.claim.claimForm.uploaded",{num:r.value})])])])})};return()=>{var S,F;return!((S=n.detail)!=null&&S.claimStatus)||![_.PENDING_ACCEPTANCE,_.PROCESSING,_.PENDING_PAYMENT].includes((F=n.detail)==null?void 0:F.claimStatus)?null:e(_e,{type:i.value?"nested-loading":null},{default:()=>{var $,U;return[e("div",{class:E.reply},[e("p",{class:E.title},[e("label",null,[t("lobby.center.claim.claimOrderDetails.reply")]),e("span",{class:E.word},[(U=($=o.content)==null?void 0:$.length)!=null?U:0,j("/1000"),t("lobby.center.claim.claimOrderDetails.word")])]),e(me,{model:o,class:E.formBox,ref:d,onSubmit:D},{default:()=>[e(Z,{name:"content",validateTrigger:"onChange",rules:h=>h!=null&&h.length?!0:t("lobby.center.claim.claimForm.reasonDetailsPlaceholder2")},{default:()=>{var h;return[e("div",{class:[E["textarea-wrap"],((h=o.content)==null?void 0:h.length)&&E.addPadding]},[e(K,{autosize:!0,rows:5,maxlength:1e3,type:"textarea",value:o.content,"onUpdate:value":O=>o.content=O,placeholder:t("lobby.center.claim.claimForm.reasonDetailsPlaceholder"),onBlur:()=>{o.content=o.content.trim()}},null),e("span",{class:E.require},[j("*")]),!o.content&&e(ue,{tag:"span",onPaste:O=>{O&&(o.content=O,d.value.validate())}},null)])]}}),e(Z,{ref:C,name:"files"},{default:()=>[e("div",null,[e("p",{class:E.title},[t("lobby.common.uploadFiles.label"),e("span",null,[t("lobby.common.uploadFiles.sizeText",{num:l.value.length,limit:15})])]),e(qe,{limit:15,ref:w,multiple:!0,maxImageSize:2,containerClass:E.upload,onChange:h=>{var O;l.value=h,(O=C.value)==null||O.validate()}},null),e("p",{class:E.tips},[t("lobby.common.uploadFiles.uploadSizeLimitText")])])]})]})])]}})}}}),Kt="_status_1h7lv_17",Xt="_info_1h7lv_25",el="_icon_1h7lv_30",tl="_pending_1h7lv_55",ll="_processing_1h7lv_58",al="_rejected_1h7lv_61",sl="_success_1h7lv_64",nl="_error_1h7lv_67",B={status:Kt,info:Xt,icon:el,"icon-1":"_icon-1_1h7lv_35","icon-2":"_icon-2_1h7lv_38","icon-3":"_icon-3_1h7lv_39","icon-4":"_icon-4_1h7lv_42","icon-5":"_icon-5_1h7lv_45","icon-6":"_icon-6_1h7lv_48",pending:tl,processing:ll,rejected:al,success:sl,error:nl},[ol]=k("pages-claim-order-status"),rl=T({name:ol,setup(){const t=x(),l=R(()=>{var a;return(a=t.detail)!=null&&a.claimStatus?Je(t.detail.claimStatus):{style:"",text:""}}),n=R(()=>{const a=t.detail;return!!(a!=null&&a.score)&&[_.COMPLETED,_.REJECTED].includes(a.claimStatus)});return()=>t.detail?e("div",{class:B.status},[e("div",{class:B.info},[e(N,{class:[B.icon,B["icon-".concat(t.detail.claimStatus)]],src:Ve(t.detail.claimStatus)},null),e("b",{class:l.value.style},[l.value.text])]),n.value&&e(ye,{class:B.rating,modelValue:t.detail.score,"onUpdate:modelValue":a=>t.detail.score=a,readonly:!0},null)]):null}}),il="_box_y3xhh_17",cl={box:il};function ul(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const[dl]=k("pages-claim-order-detail"),Ol=T({name:dl,setup(){const{t}=L(),l=be(),n=x(),a=y();return fe(()=>l.query.id,()=>{var c;l.name===ke.CLAIM_ORDER_DETAIL&&n.getOrderDetail((c=l.query)==null?void 0:c.id)},{immediate:!0}),()=>e(Ne,null,{header:()=>{let c;return e(Pe,null,ul(c=t("lobby.center.claim.claimOrderDetails.claimDetails"))?c:{default:()=>[c]})},default:()=>e(_e,{type:n.apiStatus,onRetry:()=>{var c;return n.getOrderDetail((c=l.query)==null?void 0:c.id)}},{default:()=>[e(rl,null,null),e(Ot,null,null),e("div",{class:cl.box},[e(Bt,null,null),e(Zt,{ref:a},null)]),e(Xe,null,null),e(tt,{onSubmit:()=>{var c;(c=a.value)==null||c.submit()}},null)]})})}});export{Ol as default};
//# sourceMappingURL=OrderDetailIndex.C-3bEZcx.js.map
