import{a as ye}from"./props.DdPRoj_x.js";import{d as he,s as D}from"../vendors/vendor-stable.LD58Pbb3.js";import{u as K}from"./index.BB5bZn2v.js";import{c as fe,d as Te,e as we}from"./index.CDjb9nX1.js";import{aE as se,az as Q,bV as Z,b as ce,a as M,lD as F,bq as L,bG as me,E as V,q,eN as be,I as P,t as le,a0 as xe,Y as ve,c2 as de,aB as Be,bX as H,o as ke,bL as oe,ca as z,aa as J,bM as Ne,a8 as Re,a9 as Se,bg as Ee,a6 as ge}from"./main.C8q1iJMV.js";import{f as T,l as G,p as e,v as E,y as ie,z as re,t as ee,r as U,w as pe,D as Ce}from"../vendors/vendor-@vue.DNlpgob2.js";import{a as _e,b as X,c as Y,d as O}from"./guessingSports.Cp77aJEo.js";import{S as De}from"./SubscriptCompIndex.CMEe5GR0.js";import{e as Oe}from"../vendors/vendor-default.CjiYZF7Q.js";import{P as Ae}from"./PublicIntroductionIndex.bUl03y0X.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";const C=he("eventGuessingSports",()=>{const s=K(),{eventItemData:i,isItemLoading:o,itemErr:l}=D(s),g=ce(),n=T(()=>i.value),t=T(()=>{var u;return(u=n.value)==null?void 0:u.activeData});return{isItemLoading:o,itemErr:l,guessingSportsData:n,activeData:t,refreshCache:async()=>{await se.setCacheExpired(fe),await se.setCacheExpired(Te)},toChildPage:u=>{var m;if(!Q().hasLogined){Z().openLoginRegister();return}g.push({name:u,query:{eventId:String(((m=n.value)==null?void 0:m.id)||"")}})}}}),Le="_bonus_1qek0_17",Me="_inlineFlex_1qek0_26",qe="_totalAmount_1qek0_29",Ge="_totalIntegrals_1qek0_32",$e="_totalIntegral_1qek0_32",Pe="_contratulation_1qek0_41",Ve="_notAwarded_1qek0_42",Fe="_yourIntegral_1qek0_54",Ue="_contraText_1qek0_62",je="_awardText_1qek0_65",He="_awardNumber_1qek0_68",We="_endTime_1qek0_77",d={bonus:Le,inlineFlex:Me,totalAmount:qe,totalIntegrals:Ge,totalIntegral:$e,contratulation:Pe,notAwarded:Ve,yourIntegral:Fe,contraText:Ue,awardText:je,awardNumber:He,endTime:We},[Ye]=q("event-item-modes-guessing-sports-pk-list"),ze=G({name:Ye,setup(){const{t:s}=M(),i=C(),{guessingSportsData:o,activeData:l}=D(i),g=ce(),n=()=>{var t;g.push({name:V.RECORDS,query:{eventId:String(((t=o.value)==null?void 0:t.id)||"")}})};return()=>{var r,_;const{status:t,endTime:a}=(r=o.value)!=null?r:{},{rewardStatus:c,rewardAmount:u=0,totalShowIntegral:m=0,rewardTime:b,myIntegral:B=0,totalAmount:k=0}=(_=l.value)!=null?_:{};return t===F.PROCESSING||t===F.DRAFT?e("div",null,[e("div",{class:d.bonus},[s("lobby.event.bet.slimageBonusBonus"),e("span",{class:d.totalAmount},[L(k)])]),e("div",{class:d.endTime},[e("span",null,[me(b||a)+" "+s("lobby.event.bet.award")])])]):c===_e.NO?e("div",null,[e("div",{class:d.bonus},[s("lobby.event.bet.slimageBonusBonus"),e("span",{class:d.totalAmount},[L(k)])]),e("div",{class:d.endTime},[e("span",null,[s("lobby.event.bet.endToBeAwarded")])])]):e("div",null,[e("div",{class:d.bonus},[s("lobby.event.bet.slimageBonusBonus"),e("span",{class:d.totalAmount},[L(k)]),e("span",{class:d.totalIntegrals},[E("("),s("lobby.event.bet.totalIntegrals"),e("span",{class:d.totalIntegral},[m]),E(")")])]),Number(u)<.01?e("div",{class:d.notAwarded},[s("lobby.event.bet.notAwarded"),e("span",{class:d.totalIntegrals},[E("("),s("lobby.event.bet.item.yourIntegrals"),e("span",{class:d.yourIntegral,onClick:()=>i.toChildPage(V.INTEGRALS)},[B]),E(")")])]):e("div",{class:d.contratulation},[e("span",{class:d.contraText},[s("lobby.event.bet.congratulation")]),e("span",{class:d.awardText},[s("lobby.event.listedRewards.bonus")]),e("span",{class:d.awardNumber,onClick:n},[L(u)]),e("span",{class:d.totalIntegrals},[E("("),s("lobby.event.bet.item.yourIntegrals"),e("span",{class:d.yourIntegral,onClick:()=>i.toChildPage(V.INTEGRALS)},[B]),E(")")])])])}}}),Xe="_overview_1cy2d_17",Je="_overviewFooter_1cy2d_24",Ke="_labelValue_1cy2d_29",Qe="_right_1cy2d_33",Ze="_record_1cy2d_37",et="_trySmall_1cy2d_43",tt="_myIntegral_1cy2d_47",at="_winIntegral_1cy2d_56",nt="_tips_1cy2d_60",st="_tipItem_1cy2d_68",N={overview:Xe,overviewFooter:Je,labelValue:Ke,right:Qe,record:Ze,trySmall:et,myIntegral:tt,winIntegral:at,tips:nt,tipItem:st},[lt]=q("event-item-modes-guessing-sports-overview"),ot=G({name:lt,setup(){const{t:s}=M(),i=C(),{guessingSportsData:o,activeData:l}=D(i),g=T(()=>{var t,a,c;return((t=o.value)==null?void 0:t.status)!==F.PROCESSING&&((a=o.value)==null?void 0:a.status)!==F.DRAFT&&((c=l.value)==null?void 0:c.rewardStatus)===_e.YES}),n=T(()=>{var t,a,c;return{[X.DAY]:s("lobby.event.bet.day",{x:(t=l.value)==null?void 0:t.integralValue}),[X.CHARGE]:s("lobby.event.bet.charge",{x:(a=l.value)==null?void 0:a.rechargeAddRate}),[X.CODING]:s("lobby.event.bet.coding",{x:(c=l.value)==null?void 0:c.betAddRate})}});return()=>{var t,a,c,u,m;return e("div",{class:N.overview},[e(ze,null,null),ie(e("div",{class:N.overviewFooter},[e("div",{class:N.labelValue},[s("lobby.event.bet.item.yourIntegrals"),e("span",{class:N.myIntegral,onClick:()=>i.toChildPage(V.INTEGRALS)},[(a=(t=l.value)==null?void 0:t.myIntegral)!=null?a:0])]),e("div",{class:N.right},[e("div",{class:N.labelValue},[s("lobby.event.bet.winWin"),e("span",{class:N.winIntegral},[be((c=l.value)==null?void 0:c.winIntegral)])]),e("span",{class:N.record,onClick:()=>i.toChildPage(V.BETTING_RECORDS)},[s("lobby.event.bet.record")])])]),[[re,!g.value]]),ie(e("div",{class:N.tips},[(m=(u=l.value)==null?void 0:u.integralTypes)==null?void 0:m.map(b=>e("span",{class:N.tipItem,key:b},[e(P,{src:"/lobby_asset/common/web/profile/icon_grzx_gywm.svg"},null),e("span",null,[n.value[b]])]))]),[[re,!g.value]])])}}}),it=s=>{const{t:i}=M();return{[Y.UNCONDITIONAL]:i("lobby.event.unconditional"),[Y.CUMULATIVECODING]:i("lobby.event.cumulativeCoding"),[Y.CUMULATIVERECHARGE]:i("lobby.event.cumulativereCharge")}[s]},rt="_matchBetting_1w6al_17",ut="_pkTeams_1w6al_26",ct="_vs_1w6al_31",mt="_team_1w6al_38",bt="_betRateGroup_1w6al_62",vt="_rateItem_1w6al_66",dt="_betRate_1w6al_62",gt="_betRateCount_1w6al_88",pt="_rateActived_1w6al_91",_t="_winItem_1w6al_98",It="_betIntegral_1w6al_120",yt="_betIntegralText_1w6al_131",ht="_center_1w6al_143",x={matchBetting:rt,pkTeams:ut,vs:ct,team:mt,betRateGroup:bt,rateItem:vt,betRate:dt,betRateCount:gt,rateActived:pt,winItem:_t,betIntegral:It,betIntegralText:yt,center:ht},ue="/lobby_asset/common/web/event/comm_icon_jchd_gqdd.svg",[ft]=q("event-item-modes-guessing-sports-pk-list-item"),Ie=G({name:ft,props:{matchItem:{type:Object,default:null},betTeamId:{type:Number,default:null},isBetting:{type:Boolean,default:!1},isNotStarted:{type:Boolean,default:!1}},emits:["bet"],setup(s,{emit:i}){const{t:o}=M(),l=C(),{activeData:g}=D(l),{matchItem:n,betTeamId:t,isBetting:a,isNotStarted:c}=ee(s),u={name:o("lobby.event.bet.item.toBeDetermined"),icon:""},m=T(()=>{var v;return(v=g.value)==null?void 0:v.teamList.reduce((w,I)=>({...w,[I.id]:I}),{})}),b=T(()=>{var v,w;return((v=n.value)==null?void 0:v.teamId1)&&((w=n.value)==null?void 0:w.teamId2)&&!c.value}),B=T(()=>{var v;return b.value?m.value[(v=n.value)==null?void 0:v.teamId1]:u}),k=T(()=>{var v;return b.value?m.value[(v=n.value)==null?void 0:v.teamId2]:u}),r=T(()=>{const{betRate0:v,betRate1:w,betRate2:I,teamId1:p,teamId2:h,winTeamId:f}=n.value;return[1,-1,2].map(R=>{const S=(j,$)=>({teamId:j,win:j===f,betRate:L($||0)});switch(R){case 1:return S(p,w);case 2:return S(h,I);default:return S(-1,v)}})}),_=v=>{const w=r.value[v];a.value||n.value.matchStatus||i("bet",t.value===w.teamId?null:w.teamId)};return()=>{var v,w;return e("div",{class:{[x.matchBetting]:!0,[x.center]:b.value,matchBetting:!0}},[e("div",{class:x.pkTeams},[e("div",{class:x.team},[e("span",null,[B.value.name]),(v=n.value)!=null&&v.teamId1&&!c.value?e(P,{src:B.value.icon||ue,onClick:()=>_(0)},null):e(P,{src:"/lobby_asset/common/web/event/comm_icon_jchd_gqdd.svg"},null)]),e("span",{class:x.vs},[E("VS")]),e("div",{class:x.team},[(w=n.value)!=null&&w.teamId2&&!c.value?e(P,{src:k.value.icon||ue,onClick:()=>_(2)},null):e(P,{src:"/lobby_asset/common/web/event/comm_icon_jchd_gqdd.svg"},null),e("span",null,[k.value.name])])]),b.value&&e("div",{class:x.betRateGroup},[r.value.map((I,p)=>e("div",{class:x.rateItem,key:I.teamId},[e("div",{class:{[x.betRate]:!0,[x.rateActived]:t.value===I.teamId},onClick:()=>_(p)},[e("span",null,[e("span",null,[I.teamId!==-1?o("lobby.event.bet.item.odds"):o("lobby.event.bet.item.draw")," "]),e("span",{class:x.betRateCount},[I.betRate])]),I.win&&e("div",{class:x.winItem},[e("span",null,[o("lobby.event.bet.item.winOut")])]),t.value===I.teamId&&e(De,null,null)]),t.value===I.teamId&&(a.value?e(le,{class:x.betIntegralText,tag:"div",html:o("lobby.event.bet.item.youHaveBet",{x:n.value.betIntegral})},null):e(le,{class:x.betIntegral,html:I.teamId===-1?o("lobby.event.bet.item.betDraw"):o("lobby.event.bet.item.betTeam",{x:'<span class="betIntegralName">'.concat(m.value[I.teamId].name,"</span>")})},null))]))])])}}}),Tt="_bettingModal_19eiq_17",wt="_vs_19eiq_43",xt="_betRate_19eiq_46",Bt="_myIntegral_19eiq_49",kt="_all_19eiq_58",Nt="_toBetting_19eiq_63",Rt="_isbetted_19eiq_71",St="_endTime_19eiq_75",A={bettingModal:Tt,vs:wt,betRate:xt,myIntegral:Bt,all:kt,toBetting:Nt,isbetted:Rt,endTime:St},[Et]=q("event-item-modes-guessing-sports-betting-modal"),Ct=G({name:Et,props:{rankItem:{type:Object,default:null},matchItem:{type:Object,default:null},betTeamId:{type:Number,default:null},isBetting:{type:Boolean,default:!1},isNotStarted:{type:Boolean,default:!1},btnText:{type:String,default:""},instance:{type:Object,default:null}},emits:["bet"],setup(s,{emit:i}){const{t:o}=M(),l=K(),g=C(),n=U(""),{guessingSportsData:t,activeData:a}=D(g),{rankItem:c,matchItem:u,betTeamId:m,isBetting:b,isNotStarted:B,btnText:k}=ee(s),r=U(!1);pe(n,p=>{if(!p)return;const h=p.split(".").reduce((f,R,S)=>S?S===1?"".concat(f,".").concat(R.replace(/\D/g,"").slice(0,2)):f:R.replace(/\D/g,""),"");n.value=h},{immediate:!0});const _=()=>{var h,f;+n.value>+((h=a.value)==null?void 0:h.myIntegral)?n.value=(+((f=a.value)==null?void 0:f.myIntegral)).toString():n.value=n.value?parseFloat(n.value).toString():""},v=async()=>{var ae,ne;const{chargeRate:p}=Be(),{betMin:h,betMax:f,myIntegral:R,ruleValue:S,currentValue:j,ruleType:$}=a.value||{};if(!Q().hasLogined){Z().openLoginRegister();return}if(!m.value){H({message:o("lobby.event.bet.item.pleaseSelectTheTeam")});return}if(!n.value||Number(n.value)<Number(h)||Number(n.value)>Number(f)){H({message:o("lobby.event.bet.item.onlySupports",{x:L((ae=Number(h))!=null?ae:0),y:L((ne=Number(f))!=null?ne:0)})});return}if(Number(n.value)>Number(R)){H({message:o("lobby.event.bet.item.notBeHigherThanYours")});return}if($>0&&Number(S)>Number(j)){H({message:o("lobby.event.bet.item.onlyParticipate",{a:it($),b:S}),showConfirmButton:$===Y.CUMULATIVERECHARGE,confirmButtonBadgeText:p?o("lobby.modal.pay.give2",{num:p}):"",confirmButtonText:o("lobby.event.sign.toRecharge"),onConfirm:ke});return}if(await oe.check({eventData:t.value,checkOptions:{[z.forbidReceive]:!0,[z.receiveType]:!0,[z.task]:!0}}))return;r.value=!0;const[te]=await Oe(we({activeId:t.value.id,rankId:c.value.rankId,roundId:c.value.roundId,matchId:u.value.matchId,betIntegral:n.value,betTeamId:m.value}));if(te){await oe.checkRes({config:{err:te,mute:!0,userRestrictCallback:()=>J.closeDialog(s.instance)},checkOptions:{[Ne.userRestrict]:!0}}),l.refreshEventItemDetail(t.value.id),r.value=!1;return}C().refreshCache(),J.closeDialog(s.instance),b.value=!1,n.value="",m.value=null,l.refreshEventItemDetail(t.value.id)},w=()=>{var p,h,f,R;n.value="".concat(Math.min(Number((h=(p=a.value)==null?void 0:p.myIntegral)!=null?h:0),Number((R=(f=a.value)==null?void 0:f.betMax)!=null?R:0)))},I=p=>{i("bet",p)};return()=>{var p,h;return e("div",{class:A.bettingModal},[e(Ie,{matchItem:u.value,betTeamId:m.value,isNotStarted:B.value,isBetting:b.value,onBet:I},null),e("div",{class:A.myIntegral},[e("span",null,[o("lobby.event.bet.item.yourIntegrals"),E(" ")]),(h=(p=a.value)==null?void 0:p.myIntegral)!=null?h:0]),e(xe,{class:A.input,onBlur:_,value:n.value,"onUpdate:value":f=>n.value=f,placeholder:o("lobby.event.bet.item.pleaseEnterTheBetPoint"),prefixIcon:"/lobby_asset/common/web/common/input_icon_jf.svg"},{suffix:()=>e("span",{class:A.all,onClick:w},[o("lobby.event.bet.item.all")])}),e(ve,{class:{[A.isbetted]:b.value,[A.toBetting]:!0},loading:r.value,onClick:v},{default:()=>[e("span",null,[de(k.value)])]}),e("div",{class:A.endTime},[o("lobby.event.bet.item.deadlineForBetting"),me(u.value.startTime)])])}}}),Dt="_pkListItem_1xi65_17",Ot="_matchRight_1xi65_26",At="_text_1xi65_38",Lt="_betting_1xi65_43",Mt="_bettingEnd_1xi65_46",qt="_bettingOpenWin_1xi65_49",Gt="_bettingOpenLose_1xi65_52",$t="_bettingNot_1xi65_55",Pt="_notBetting_1xi65_62",Vt="_toBetting_1xi65_68",Ft="_btnText_1xi65_77",Ut="_isbetted_1xi65_80",jt="_winIntegral_1xi65_84",Ht="_bettingModal_1xi65_93",y={pkListItem:Dt,matchRight:Ot,text:At,betting:Lt,bettingEnd:Mt,bettingOpenWin:qt,bettingOpenLose:Gt,bettingNot:$t,notBetting:Pt,toBetting:Vt,btnText:Ft,isbetted:Ut,winIntegral:jt,bettingModal:Ht},[Wt]=q("event-item-modes-guessing-sports-pk-list-item"),Yt=G({name:Wt,props:{rankItem:{type:Object,default:null},matchItem:{type:Object,default:null},matchIndex:{type:Number,default:0}},setup(s){const{t:i}=M(),{rankItem:o,matchItem:l}=ee(s),g=C(),{guessingSportsData:n}=D(g),t=U(null),a=U(!1);Ce(()=>{var r;t.value=(r=l.value.betTeamId)!=null?r:0,a.value=!!l.value.betTeamId});const c=T(()=>{let r=a.value?i("lobby.event.bet.item.renew"):i("lobby.event.bet.item.bet");return l.value.matchStatus===O.BETTINGEND&&(r=i("lobby.event.bet.item.seal")),r}),u=T(()=>{var r;return((r=l.value)==null?void 0:r.matchStatus)===O.TO_BE_DETERMINED}),m=T(()=>{var r,_;return((r=l.value)==null?void 0:r.matchStatus)===O.BETTINGEND||((_=n.value)==null?void 0:_.status)===F.OVER}),b=T(()=>{const r=l.value.winTeamId,_=r&&t.value===r;return{[O.BETTING]:{text:i("lobby.event.bet.item.betting"),className:y.betting,hasBtn:!0},[O.BETTINGEND]:{text:i("lobby.event.bet.item.bettingEnd"),className:y.bettingEnd,hasBtn:!0},[O.OPENED]:{text:[l.value.betIntegral!=="0"?i("lobby.event.bet.item.failed"):i("lobby.event.bet.item.opened"),i("lobby.event.bet.item.win")][Number(_)],className:_?y.bettingOpenWin:y.bettingOpenLose,hasBtn:!1},[O.TO_BE_DETERMINED]:{text:i("lobby.event.bet.item.noGame"),className:y.bettingNot,hasBtn:!1}}[l.value.matchStatus]}),B=r=>{t.value=r},k=()=>{if(!Q().hasLogined){Z().openLoginRegister();return}const r=J.showDialog({title:()=>c.value,className:y.bettingModal,message:()=>e(Ct,{rankItem:o.value,matchItem:l.value,betTeamId:t.value,isNotStarted:u.value,isBetting:a.value,btnText:c.value,instance:r==null?void 0:r.instance,onBet:B},null),showCloseButton:!0,showConfirmButton:!1})};return()=>{var r,_,v;return e("div",{class:y.pkListItem},[e(Ie,{matchItem:l.value,betTeamId:t.value,isNotStarted:u.value,isBetting:a.value,onBet:B},null),u.value?e("div",{class:[y.text,b.value.className,y.matchRight]},[b.value.text]):e("div",{class:y.matchRight},[e("div",{class:[y.text,b.value.className]},[b.value.text]),((r=l.value)==null?void 0:r.betIntegral)==="0"&&e("div",{class:y.notBetting},[i("lobby.event.bet.item.youDontNote")]),b.value.hasBtn?e(ve,{class:{[y.toBetting]:!0,[y.isbetted]:a.value&&!m.value},disabled:m.value,onClick:k},{default:()=>[e("span",{class:y.btnText},[de(c.value)])]}):e("div",{style:{height:"50px"}},null),((_=l.value)==null?void 0:_.winIntegral)!=="0"&&e("div",{class:y.winIntegral},[be((v=l.value)==null?void 0:v.winIntegral),e("span",null,[" "+i("lobby.event.bet.item.integral")])])])])}}}),W={"guessing-placeholder":"_guessing-placeholder_1h09i_17","pk-list-tabs":"_pk-list-tabs_1h09i_26","pk-list-tab-title":"_pk-list-tab-title_1h09i_40"},[zt]=q("event-item-modes-guessing-sports-pk-list"),Xt=G({name:zt,setup(){const{t:s}=M(),i=C(),{activeData:o,guessingSportsData:l}=D(i),g=U(0);pe(()=>l.value,(t,a)=>{var c,u;if((t==null?void 0:t.id)!==(a==null?void 0:a.id)){const m=(u=(c=t==null?void 0:t.activeData)==null?void 0:c.rankList)==null?void 0:u.findIndex(b=>b.defaultShow);m>-1&&(g.value=m)}},{immediate:!0});const n=T(()=>{var t,a;return(a=(t=o.value)==null?void 0:t.rankList)!=null&&a.length?null:"empty"});return()=>e(ge,{class:[W["guessing-placeholder"]],type:n.value,empty:{text:s("lobby.event.bet.noGame"),image:"/lobby_asset/{layout}-{bg}-common/common/event/img_none_jchd.png"}},{default:()=>{var t;return[e(Re,{active:g.value,"onUpdate:active":a=>g.value=a,class:W["pk-list-tabs"],titleNavClass:W["pk-list-tabs-title"],animated:!0,key:(t=l.value)==null?void 0:t.id,shrink:!0},{default:()=>{var a,c;return[(c=(a=o.value)==null?void 0:a.rankList)==null?void 0:c.map(u=>e(Se,{key:u.rankId+u.roundId,titleClass:W["pk-list-tab-title"],title:()=>u.rankName,content:()=>e(Ee,{finished:!0},{default:()=>{var m;return[(m=u==null?void 0:u.matchList)==null?void 0:m.map((b,B)=>e(Yt,{class:"pk-list-item",key:b.matchId,rankItem:u,matchItem:b,matchIndex:B},null))]}})},null))]}})]}})}}),Jt={},[Kt]=q("event-item-modes-guessing-sports"),da=G({name:Kt,props:{...ye,eventId:Number},setup(s){const i=K(),o=C(),{guessingSportsData:l,isItemLoading:g,itemErr:n}=D(o),t=T(()=>g.value?"nested-loading":n.value?"retry":null),a=async()=>{s.eventId&&i.refreshEventItemDetail(s.eventId)};return()=>e(ge,{type:t.value,class:Jt.guessingSportsMain,onRetry:a},{default:()=>[e(ot,null,null),e(Xt,null,null),e(Ae,{eventData:l.value},null)]})}});export{da as default};
//# sourceMappingURL=GuessingSportsIndex.hTZGxWNK.js.map
