import{km as $,cZ as u,a as R,cp as z,az as S,R as F,cH as I,a6 as U,bg as V,I as f,q as T,E as Y,b as G,cd as H,t as C,bq as W,bG as M,kk as B,U as J,d0 as Z,d1 as K,aa as Q}from"./main.C8q1iJMV.js";import{E as X}from"../vendors/vendor-swiper.ZXc-sUCV.js";import{a as j,E as N,M as ee}from"./ModalContentIndex.Dj08dEyt.js";import{a as ae,L as te}from"./ListItemIndex.Bcx-5lrU.js";import"../vendors/vendor-default.CjiYZF7Q.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import{l as k,w as re,o as O,f as p,p as e,r as E,y as q,z as L,E as D,F as se,v as ce}from"../vendors/vendor-@vue.DNlpgob2.js";import{S as ne}from"./SourceTextIndex.B2mGCFWw.js";import{R as A,E as P}from"./ReceiveCountdownIndex.C4K-6t0P.js";import{u as oe}from"./useReceiveOne.D6y37THV.js";const Fe=()=>({getSwiperConfig:(m,n)=>{const o=$();let l=m===u.Treasure?o*2.2:o*1.55;return n&&(l=m===u.Treasure?o*2.55:o*1.9),{centeredSlides:!0,slidesPerView:"auto",loop:!1,loopedSlides:3,spaceBetween:0,slidesPerGroup:1,grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:l,depth:300,modifier:1,slideShadows:!1},modules:[X]}}}),Ue=3,ie="_recordItem_48bo8_41",le="_recordMain_48bo8_52",de="_showLast_48bo8_56",ue="_treasure_48bo8_61",g={"canreceive-record-box":"_canreceive-record-box_48bo8_17","canreceive-record-tab":"_canreceive-record-tab_48bo8_20","canreceive-record-title":"_canreceive-record-title_48bo8_27","canreceive-record-more-btn":"_canreceive-record-more-btn_48bo8_32","record-placeholder":"_record-placeholder_48bo8_37",recordItem:ie,recordMain:le,showLast:de,"red-pocket":"_red-pocket_48bo8_60",treasure:ue},[me]=T("pages-home-discount-can-receive-components-receive-records"),Ve=k({name:me,props:{canReceiveStyle:{type:Number,default:u.Normal}},setup(a){const{t:m}=R(),n=z(ae,{immediate:!1,transformFn:t=>({data:t.list,total:t.count}),defaultPageSize:10});re(()=>S().hasLogined,(t,s)=>{t!==s&&(n.payload.value={...n.payload.value,timeDay:j.LastSixtyDay,status:N.All},n.loadData(!0))}),O(()=>{S().hasLogined&&(n.payload.value={...n.payload.value,timeDay:j.LastSixtyDay,status:N.All},n.loadData(!0))});const o=async()=>{S().hasLogined&&n.loadData(!0)},l=G(),b=()=>{l.push({name:Y.RECORDS})};F({initRecordData:o});const h=p(()=>{var t;return n.loading.value?"nested-loading":n.listError.value?"retry":(t=n.list.value)!=null&&t.length?null:"empty"}),y=p(()=>a.canReceiveStyle===u.RedPocket?{width:I(29),height:I(39),src:"/lobby_asset/common/common/event/hongbao_icon_s.png",class:g["red-pocket"]}:{width:I(39),height:I(27),src:"/lobby_asset/common/common/event/baoxiang_icon_s.png",class:g.treasure});return()=>e("div",null,[e("div",{class:g["canreceive-record-box"]},[e("div",{class:g["canreceive-record-tab"]},[e("div",{class:g["canreceive-record-title"]},[e("span",null,[m("lobby.cashback.pageTitle.pickUpRecord")])]),e("div",{onClick:b,class:g["canreceive-record-more-btn"]},[m("lobby.promote.promote.more")])])]),e(U,{empty:{text:m("lobby.event.luckyWheel.tabs.noData")},class:g["record-placeholder"],type:h.value,onRetry:o},{default:()=>{var t,s;return[e(V,{finished:!0,finishedText:((t=n.list.value)==null?void 0:t.length)>=10?m("lobby.reward.base.onlyShow10LimitTip"):"",class:{[g.recordMain]:!0,[g.showLast]:((s=n.list.value)==null?void 0:s.length)>=10}},{default:()=>{var d,_;return[(_=(d=n.list.value)==null?void 0:d.slice(0,10))==null?void 0:_.map(i=>e(te,{listItem:i,key:i.id,class:g.recordItem},{namePrefix:()=>e(f,y.value,null)}))]}})]}})])}}),_e="_congrats_qhfjr_36",ve="_currency_qhfjr_56",be="_activity_qhfjr_72",ge="_canreceiveAnimationShape1_qhfjr_1",pe="_canreceiveAnimationShape2_qhfjr_1",r={"receive-success-box":"_receive-success-box_qhfjr_17","receive-success-info":"_receive-success-info_qhfjr_26","success-info-item":"_success-info-item_qhfjr_31",congrats:_e,"currency-activity":"_currency-activity_qhfjr_56",currency:ve,activity:be,"canreceive-card-logtime":"_canreceive-card-logtime_qhfjr_76","canreceive-card-typename":"_canreceive-card-typename_qhfjr_77","canreceive-card-value":"_canreceive-card-value_qhfjr_95","redpack-mode":"_redpack-mode_qhfjr_113","finally-images":"_finally-images_qhfjr_113",canreceiveAnimationShape1:ge,"hongbao-img-hbbggy":"_hongbao-img-hbbggy_qhfjr_116","hongbao-img-hbddk":"_hongbao-img-hbddk_qhfjr_122","hongbao-reward-apng":"_hongbao-reward-apng_qhfjr_127","hongbao-reward-coin":"_hongbao-reward-coin_qhfjr_132","hongbao-reward-n":"_hongbao-reward-n_qhfjr_138","treasure-mode":"_treasure-mode_qhfjr_144",canreceiveAnimationShape2:pe,"treasure-reward-box":"_treasure-reward-box_qhfjr_150","treasure-reward-apng-box":"_treasure-reward-apng-box_qhfjr_155"},[he]=T("pages-can-receive-record-info"),Ye=k({name:he,props:{canReceiveStyle:{type:Number,default:u.Normal},targetItem:{type:Object,default:null}},emits:["animatedEnd","imageShowEnd"],setup(a,{emit:m}){const{t:n}=R(),o=E(!1),l=E([]),b=p(()=>{var t;return a.canReceiveStyle===u.RedPocket?[{class:r["hongbao-img-hbbggy"],src:"/lobby_asset/common/common/event/hongbao_img_hbbggy_s.png",isBg:!0},{class:r["hongbao-img-hbddk"],src:"/lobby_asset/common/common/event/hongbao_img_hbddk_s.png"},{class:r["hongbao-reward-apng"],isApng:!0,src:"/lobby_asset/common/web/animated/apng_reward_hb_1_alpha.png"},{class:r["hongbao-reward-coin"],isApng:!0,src:"/lobby_asset/common/web/animated/apng_reward_hb_coin_alpha.png"},{class:r["hongbao-reward-n"],isApng:!0,src:"/lobby_asset/common/web/animated/apng_reward_hb_N_alpha.png",hidden:!((t=a.targetItem)!=null&&t.activity)}].filter(s=>s.hidden!==!0):[{class:r["treasure-reward-box"],isApng:!0,src:"/lobby_asset/common/web/animated/apng_reward_bx_2_alpha.png",isBg:!0},{class:r["treasure-reward-apng-box"],isApng:!0,src:"/lobby_asset/common/web/animated/apng_reward_bx_1_alpha.png"}]});O(()=>{setTimeout(()=>{!b.value.every(t=>l.value.includes(t.class))&&!o.value&&m("animatedEnd")},10*1e3)});const h=p(()=>{var t,s;return(s=H[((t=S().userInfos)==null?void 0:t.currency)||"CNY"])==null?void 0:s.PAY_JB}),y=(t,s)=>{l.value.includes(t)||(s&&m("imageShowEnd"),l.value.push(t),b.value.every(d=>l.value.includes(d.class))&&setTimeout(()=>{o.value=!0,setTimeout(()=>{m("animatedEnd")},.5*1e3)},1.5*1e3))};return()=>{var t,s,d,_,i;return e("div",{class:{[r["receive-success-box"]]:!0,[r["redpack-mode"]]:a.canReceiveStyle===u.RedPocket,[r["treasure-mode"]]:a.canReceiveStyle===u.Treasure}},[e("div",{class:{[r["receive-success-info"]]:!0,[r["finally-images"]]:o.value}},[(t=b.value)==null?void 0:t.map(c=>c.isApng?q(e(f,{class:[r["success-info-item"],c.class],"data-src":c.src,src:c.src,isApng:!0,onLoad:()=>{y(c.class,c.isBg)},canvasMode:{numPlays:1}},null),[[L,!c.hidden]]):q(e(f,{class:[r["success-info-item"],c.class],"data-src":c.src,src:c.src,onLoad:()=>{y(c.class,c.isBg)}},null),[[L,!c.hidden]])),e("div",{class:[r["success-info-item"],r.congrats]},[e(C,{html:n("lobby.event.collectWords.congrats")},null)]),e("div",{class:[r["success-info-item"],r["currency-activity"]]},[e("div",{class:r.currency},[e(f,{class:[r["icon-text"]],src:h.value},null),e("span",{class:r["canreceive-info-value"]},[W((s=a.targetItem)==null?void 0:s.reward)])]),!!((d=a.targetItem)!=null&&d.activity)&&e("div",{class:r.activity},[e(f,{src:"/lobby_asset/common/web/common/comm_icon_shy.svg"},null),e("span",{class:r["canreceive-info-value"]},[(_=a.targetItem)==null?void 0:_.activity])])]),e("div",{class:r["canreceive-card-logtime"]},[M((i=a.targetItem)==null?void 0:i.logCreateTime,"ymd")]),e("div",{class:r["canreceive-card-typename"]},[e("span",{class:r["canreceive-card-key"]},[n("lobby.records.activeTypeName")]),e("span",{class:r["canreceive-card-value"]},[e(ne,{rewardData:a.targetItem},null)])])])])}}}),ye=3,xe="_collect_16x36_17",fe="_shake_16x36_102",we="_rewardTimeTips_16x36_105",Se="_animated_16x36_112",x={"receive-btn-box":"_receive-btn-box_16x36_17",collect:xe,"receive-btn":"_receive-btn_16x36_17","reset-countdown":"_reset-countdown_16x36_47","treasure-mode":"_treasure-mode_16x36_64",shake:fe,rewardTimeTips:we,animated:Se},[Ie]=T("pages-can-receive-open-btn"),Re=k({name:Ie,props:{receiveItem:{type:Object,default:null},imageSrc:{type:String,default:""},canReceiveStyle:{type:Number,default:u.Normal}},setup(a){const{t:m}=R(),n=S(),o=oe(),l=D("refreshData"),b=D("receiveSuccess"),h=B(),y=p(()=>{var i,c,w;return(c=h.receivedList)!=null&&c.includes((i=a.receiveItem)==null?void 0:i.id)?!1:((w=a.receiveItem)==null?void 0:w.receiveDuration)<0}),t=p(()=>{var i,c,w;return(c=h.receivedList)!=null&&c.includes((i=a.receiveItem)==null?void 0:i.id)?!1:((w=a.receiveItem)==null?void 0:w.receiveDuration)>0}),s=i=>{if(i)return b==null?void 0:b(a.receiveItem);l==null||l()},d=i=>{i.stopPropagation(),o.handleReceive(a.receiveItem,s)},_=()=>{l==null||l()};return()=>{if(!n.hasLogined)return e("div",null,null);const{id:i,receiveDuration:c}=a.receiveItem;return e("div",{class:{[x["receive-btn-box"]]:!0,"receive-btn-box":!0,[x.shake]:o.shakeId.value===i,[x["redpack-mode"]]:a.canReceiveStyle===u.RedPocket,[x["treasure-mode"]]:a.canReceiveStyle===u.Treasure,"treasure-mode":a.canReceiveStyle===u.Treasure}},[e("div",{class:x.collect,onClick:d},[e(f,{onClick:d,tag:"div",src:a.imageSrc,class:[x["receive-btn"],"receive-btn"]},{default:()=>[e(C,{html:m("lobby.event.redPocket.open")},null)]}),y.value&&e(A,{class:x["reset-countdown"],textFormatType:P.Expired1,duration:c,onComplete:_},null),t.value&&e(A,{class:x["reset-countdown"],textFormatType:P.CanReceive,duration:c,onComplete:_},null)])])}}}),ke="_countText_rxx7l_32",Te="_countSpan_rxx7l_32",Ce="_congrats_rxx7l_48",je="_currency_rxx7l_59",Ne="_activity_rxx7l_68",v={"swiper-slide-item":"_swiper-slide-item_rxx7l_17","redpack-mode":"_redpack-mode_rxx7l_20","swiper-slide-bg":"_swiper-slide-bg_rxx7l_24","time-down-top-box":"_time-down-top-box_rxx7l_29",countText:ke,countSpan:Te,"receive-countdown-time":"_receive-countdown-time_rxx7l_41","expired-countdown":"_expired-countdown_rxx7l_42","swiper-slide-success-info":"_swiper-slide-success-info_rxx7l_45",congrats:Ce,"currency-activity":"_currency-activity_rxx7l_59",currency:je,activity:Ne,"swiper-slide-receive-bg":"_swiper-slide-receive-bg_rxx7l_80","swiper-slide-title":"_swiper-slide-title_rxx7l_87","swiper-slide-receive-box":"_swiper-slide-receive-box_rxx7l_108","swiper-slide-btn":"_swiper-slide-btn_rxx7l_117","swiper-slide-logtime":"_swiper-slide-logtime_rxx7l_147","swiper-slide-typename":"_swiper-slide-typename_rxx7l_148","swiper-slide-value":"_swiper-slide-value_rxx7l_167","swiper-slide-not-click":"_swiper-slide-not-click_rxx7l_184","source-text":"_source-text_rxx7l_171","treasure-mode":"_treasure-mode_rxx7l_206","modal-content-box":"_modal-content-box_rxx7l_247"},[Ee]=J("pages-home-discount-can-receive-modes-swiper-slide-item"),Ge=k({name:Ee,props:{slideItem:{type:Object,default:null},canReceiveStyle:{type:Number,default:u.Normal},totolLength:{type:Number,default:0},idx:{type:Number,default:0},swiperNowIdx:{type:Number,default:0}},setup(a){const{t:m}=R(),n=B(),o=p(()=>{var s,d,_;return(d=n.receivedList)!=null&&d.includes((s=a.slideItem)==null?void 0:s.id)?!1:((_=a.slideItem)==null?void 0:_.receiveDuration)<=0}),l=p(()=>a.canReceiveStyle===u.Treasure?o.value?"/lobby_asset/common/common/event/baoxiang_img_bxbj2_s.png":"/lobby_asset/common/common/event/baoxiang_img_bxzh_s.png":o.value?"/lobby_asset/common/common/event/hongbao_img_hbbj2_s.png":"/lobby_asset/common/common/event/hongbao_img_hbzh_s.png"),b=p(()=>a.canReceiveStyle===u.Treasure?"":o.value?"/lobby_asset/common/common/event/hongbao_img_btn_kai_s.png":"/lobby_asset/common/common/event/hongbao_img_btn_kaizh_s.png"),h=p(()=>Math.abs(a.idx-a.swiperNowIdx)<ye),y=()=>{Q.showDialog({title:m("lobby.reward.base.templateTitle"),className:v["modal-content-box"],message:()=>e(ee,{rewardData:a.slideItem,isRecords:!1,hiddenStatus:!0},null),showConfirmButton:!1,showCloseButton:!0})},t=async()=>{const{activeType:s,template:d,activeId:_,ruleId:i}=a.slideItem;await Z(s,d,_,Number(i))?K(a.slideItem):y()};return()=>e("div",{class:{[v["swiper-slide-item"]]:!0,[v["redpack-mode"]]:a.canReceiveStyle===u.RedPocket,[v["treasure-mode"]]:a.canReceiveStyle===u.Treasure,"swiper-slide-item":!0}},[e(f,{class:[v["swiper-slide-bg"],o.value?"":v["swiper-slide-not-click"]],src:l.value,tag:"div",lazy:!1},{default:()=>{var s,d;return[h.value&&e(se,null,[e("div",{class:v["swiper-slide-title"]},[e(C,{html:(s=a.slideItem)==null?void 0:s.activeName},null)]),e(Re,{canReceiveStyle:a.canReceiveStyle,receiveItem:a.slideItem,imageSrc:b.value},null),e("div",{class:v["swiper-slide-logtime"]},[M(a.slideItem.logCreateTime,"ymd")]),e("div",{class:v["swiper-slide-typename"],onClick:t},[e("span",{class:v["swiper-slide-key"]},[m("lobby.records.activeTypeName"),ce(":")]),e("span",{class:v["swiper-slide-value"]},[e("span",{class:[v["source-text"],"source-text"]},[(d=a.slideItem)==null?void 0:d.activeTypeText])])])])]}})])}});export{Ue as M,Ve as R,Ge as S,Ye as a,Fe as u};
//# sourceMappingURL=SlideItemIndex.1G2Tn6E0.js.map
