import{D as g}from"../vendors/vendor-default.CjiYZF7Q.js";import{hC as C,a as w,gb as h,hE as _,fM as b,gz as P,Y as v,fI as y,q as D,i0 as E,w as O,r as U,cX as F,g5 as N}from"./main.C8q1iJMV.js";import"../vendors/vendor-bignumber.BRr1dcww.js";import"../vendors/vendor-swiper.ZXc-sUCV.js";import{l as R,r as S,h as q,p as a,C as A}from"../vendors/vendor-@vue.DNlpgob2.js";import"../vendors/vendor-lodash.BYdGDldS.js";import"../vendors/vendor-stable.LD58Pbb3.js";import"../vendors/vendor-@intlify.BmUtFfVu.js";import"../vendors/vendor-@sentry.EjpkRnd3.js";import"../vendors/vendor-dom-to-image.C12bjAh8.js";const G="_forceChangePasswordDialog_96qdw_17",I="_forceChangePassword_96qdw_17",V="_title_96qdw_20",M="_desc_96qdw_27",j="_submit_96qdw_31",r={forceChangePasswordDialog:G,forceChangePassword:I,title:V,desc:M,submit:j};function H(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!A(o)}const[T]=D("pages-dialogs-force-change-password"),Q=R({name:T,setup(){const{visible:o,openOptions:c,closeDialog:u}=C("forceChangePassword"),{t}=w(),n=S(!1),{validate:d,validateField:m}=g(),{editFillArray:f}=h(),e=q({userpass:"",confirmUserpass:""});_("CONFIG_CHANGE_SUCCESS",()=>d());const p=async()=>{if((await d()).valid&&!n.value&&c.value){n.value=!0;try{await E(e.userpass),f({userpass:e.userpass}),O.success({message:t("lobby.modal.forceChangePwd.successTips"),onClose(){var s,l;u("forceChangePassword"),(l=(s=c.value)==null?void 0:s.onSuccess)==null||l.call(s)}})}catch(s){const{code:l}=U(s);l===F.CONFIG_CHANGE_PASSWORD_FORMAT_ERR&&N("CONFIG_CHANGE_ERR").emit()}finally{n.value=!1}}};return()=>{let i;return a(y,{show:o.value,"onUpdate:show":s=>o.value=s,class:r.forceChangePasswordDialog,showCloseButton:!1,closeOnRouteChange:!1},{default:()=>[a("div",{class:r.forceChangePassword},[a("h3",{class:r.title},[t("lobby.modal.forceChangePwd.title")]),a(b,{name:"userpass",useConfig:!0,required:!0,modelValue:e.userpass,"onUpdate:modelValue":s=>e.userpass=s,onChange:s=>{s&&e.confirmUserpass&&m("confirmUserpass")}},null),a(P,{required:!0,name:"confirmUserpass",password:e.userpass,modelValue:e.confirmUserpass,"onUpdate:modelValue":s=>e.confirmUserpass=s},null),a("div",{class:r.desc},[t("lobby.modal.forceChangePwd.tips")]),a("div",{class:r.submit},[a(v,{block:!0,type:"primary",loading:n.value,onClick:p},H(i=t("lobby.common.tips.confirm"))?i:{default:()=>[i]})])])]})}}});export{Q as default};
//# sourceMappingURL=ForceChangePasswordIndex.DAIcX4T2.js.map
